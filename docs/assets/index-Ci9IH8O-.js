var Xv=Object.defineProperty;var Yv=(t,e,n)=>e in t?Xv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var bt=(t,e,n)=>Yv(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Zv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function Gn(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Vv(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var ac={exports:{}};/*!
 * Tabler v1.4.0 (https://tabler.io)
 * Copyright 2018-2025 The Tabler Authors
 * Copyright 2018-2025 codecalm.net PaweÅ‚ Kuna
 * Licensed under MIT (https://github.com/tabler/tabler/blob/master/LICENSE)
 */(function(t,e){(function(n,r){r(e)})(Zv,function(n){const r=document.querySelectorAll('[data-bs-toggle="autosize"]');r.length&&r.forEach(function(_){window.autosize&&window.autosize(_)});const i=document.querySelectorAll("[data-countup]");i.length&&i.forEach(function(_){let a={};try{const x=_.getAttribute("data-countup")?JSON.parse(_.getAttribute("data-countup")):{};a=Object.assign({enableScrollSpy:!0},x)}catch{}const m=parseInt(_.innerHTML,10);if(window.countUp&&window.countUp.CountUp){const x=new window.countUp.CountUp(_,m,a);x.error||x.start()}}),[].slice.call(document.querySelectorAll("[data-mask]")).map(function(_){window.IMask&&new window.IMask(_,{mask:_.dataset.mask,lazy:_.dataset["mask-visible"]==="true"})});var s="top",o="bottom",f="right",g="left",w="auto",A=[s,o,f,g],h="start",y="end",E="clippingParents",S="viewport",O="popper",b="reference",p=A.reduce(function(_,a){return _.concat([a+"-"+h,a+"-"+y])},[]),l=[].concat(A,[w]).reduce(function(_,a){return _.concat([a,a+"-"+h,a+"-"+y])},[]),u="beforeRead",c="read",d="afterRead",v="beforeMain",D="main",I="afterMain",k="beforeWrite",M="write",U="afterWrite",ee=[u,c,d,v,D,I,k,M,U];function X(_){return _?(_.nodeName||"").toLowerCase():null}function H(_){if(_==null)return window;if(_.toString()!=="[object Window]"){var a=_.ownerDocument;return a&&a.defaultView||window}return _}function Z(_){return _ instanceof H(_).Element||_ instanceof Element}function Q(_){return _ instanceof H(_).HTMLElement||_ instanceof HTMLElement}function te(_){return typeof ShadowRoot<"u"&&(_ instanceof H(_).ShadowRoot||_ instanceof ShadowRoot)}const $={name:"applyStyles",enabled:!0,phase:"write",fn:function(_){var a=_.state;Object.keys(a.elements).forEach(function(m){var x=a.styles[m]||{},R=a.attributes[m]||{},B=a.elements[m];Q(B)&&X(B)&&(Object.assign(B.style,x),Object.keys(R).forEach(function(z){var Y=R[z];Y===!1?B.removeAttribute(z):B.setAttribute(z,Y===!0?"":Y)}))})},effect:function(_){var a=_.state,m={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,m.popper),a.styles=m,a.elements.arrow&&Object.assign(a.elements.arrow.style,m.arrow),function(){Object.keys(a.elements).forEach(function(x){var R=a.elements[x],B=a.attributes[x]||{},z=Object.keys(a.styles.hasOwnProperty(x)?a.styles[x]:m[x]).reduce(function(Y,ne){return Y[ne]="",Y},{});Q(R)&&X(R)&&(Object.assign(R.style,z),Object.keys(B).forEach(function(Y){R.removeAttribute(Y)}))})}},requires:["computeStyles"]};function C(_){return _.split("-")[0]}var P=Math.max,q=Math.min,j=Math.round;function K(){var _=navigator.userAgentData;return _!=null&&_.brands&&Array.isArray(_.brands)?_.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function J(){return!/^((?!chrome|android).)*safari/i.test(K())}function F(_,a,m){a===void 0&&(a=!1),m===void 0&&(m=!1);var x=_.getBoundingClientRect(),R=1,B=1;a&&Q(_)&&(R=_.offsetWidth>0&&j(x.width)/_.offsetWidth||1,B=_.offsetHeight>0&&j(x.height)/_.offsetHeight||1);var z=(Z(_)?H(_):window).visualViewport,Y=!J()&&m,ne=(x.left+(Y&&z?z.offsetLeft:0))/R,ae=(x.top+(Y&&z?z.offsetTop:0))/B,oe=x.width/R,ie=x.height/B;return{width:oe,height:ie,top:ae,right:ne+oe,bottom:ae+ie,left:ne,x:ne,y:ae}}function T(_){var a=F(_),m=_.offsetWidth,x=_.offsetHeight;return Math.abs(a.width-m)<=1&&(m=a.width),Math.abs(a.height-x)<=1&&(x=a.height),{x:_.offsetLeft,y:_.offsetTop,width:m,height:x}}function L(_,a){var m=a.getRootNode&&a.getRootNode();if(_.contains(a))return!0;if(m&&te(m)){var x=a;do{if(x&&_.isSameNode(x))return!0;x=x.parentNode||x.host}while(x)}return!1}function N(_){return H(_).getComputedStyle(_)}function G(_){return["table","td","th"].indexOf(X(_))>=0}function W(_){return((Z(_)?_.ownerDocument:_.document)||window.document).documentElement}function se(_){return X(_)==="html"?_:_.assignedSlot||_.parentNode||(te(_)?_.host:null)||W(_)}function ce(_){return Q(_)&&N(_).position!=="fixed"?_.offsetParent:null}function de(_){for(var a=H(_),m=ce(_);m&&G(m)&&N(m).position==="static";)m=ce(m);return m&&(X(m)==="html"||X(m)==="body"&&N(m).position==="static")?a:m||function(x){var R=/firefox/i.test(K());if(/Trident/i.test(K())&&Q(x)&&N(x).position==="fixed")return null;var B=se(x);for(te(B)&&(B=B.host);Q(B)&&["html","body"].indexOf(X(B))<0;){var z=N(B);if(z.transform!=="none"||z.perspective!=="none"||z.contain==="paint"||["transform","perspective"].indexOf(z.willChange)!==-1||R&&z.willChange==="filter"||R&&z.filter&&z.filter!=="none")return B;B=B.parentNode}return null}(_)||a}function Oe(_){return["top","bottom"].indexOf(_)>=0?"x":"y"}function je(_,a,m){return P(_,q(a,m))}function re(_){return Object.assign({},{top:0,right:0,bottom:0,left:0},_)}function ue(_,a){return a.reduce(function(m,x){return m[x]=_,m},{})}const fe={name:"arrow",enabled:!0,phase:"main",fn:function(_){var a,m=_.state,x=_.name,R=_.options,B=m.elements.arrow,z=m.modifiersData.popperOffsets,Y=C(m.placement),ne=Oe(Y),ae=[g,f].indexOf(Y)>=0?"height":"width";if(B&&z){var oe=function(Le,De){return re(typeof(Le=typeof Le=="function"?Le(Object.assign({},De.rects,{placement:De.placement})):Le)!="number"?Le:ue(Le,A))}(R.padding,m),ie=T(B),$e=ne==="y"?s:g,ve=ne==="y"?o:f,_e=m.rects.reference[ae]+m.rects.reference[ne]-z[ne]-m.rects.popper[ae],pe=z[ne]-m.rects.reference[ne],ye=de(B),qe=ye?ne==="y"?ye.clientHeight||0:ye.clientWidth||0:0,Be=_e/2-pe/2,Ce=oe[$e],Te=qe-ie[ae]-oe[ve],Se=qe/2-ie[ae]/2+Be,xe=je(Ce,Se,Te),ke=ne;m.modifiersData[x]=((a={})[ke]=xe,a.centerOffset=xe-Se,a)}},effect:function(_){var a=_.state,m=_.options.element,x=m===void 0?"[data-popper-arrow]":m;x!=null&&(typeof x!="string"||(x=a.elements.popper.querySelector(x)))&&L(a.elements.popper,x)&&(a.elements.arrow=x)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ge(_){return _.split("-")[1]}var me={top:"auto",right:"auto",bottom:"auto",left:"auto"};function he(_){var a,m=_.popper,x=_.popperRect,R=_.placement,B=_.variation,z=_.offsets,Y=_.position,ne=_.gpuAcceleration,ae=_.adaptive,oe=_.roundOffsets,ie=_.isFixed,$e=z.x,ve=$e===void 0?0:$e,_e=z.y,pe=_e===void 0?0:_e,ye=typeof oe=="function"?oe({x:ve,y:pe}):{x:ve,y:pe};ve=ye.x,pe=ye.y;var qe=z.hasOwnProperty("x"),Be=z.hasOwnProperty("y"),Ce=g,Te=s,Se=window;if(ae){var xe=de(m),ke="clientHeight",Le="clientWidth";xe===H(m)&&N(xe=W(m)).position!=="static"&&Y==="absolute"&&(ke="scrollHeight",Le="scrollWidth"),(R===s||(R===g||R===f)&&B===y)&&(Te=o,pe-=(ie&&xe===Se&&Se.visualViewport?Se.visualViewport.height:xe[ke])-x.height,pe*=ne?1:-1),R!==g&&(R!==s&&R!==o||B!==y)||(Ce=f,ve-=(ie&&xe===Se&&Se.visualViewport?Se.visualViewport.width:xe[Le])-x.width,ve*=ne?1:-1)}var De,Ue=Object.assign({position:Y},ae&&me),vt=oe===!0?function(kt,at){var _t=kt.x,yt=kt.y,Me=at.devicePixelRatio||1;return{x:j(_t*Me)/Me||0,y:j(yt*Me)/Me||0}}({x:ve,y:pe},H(m)):{x:ve,y:pe};return ve=vt.x,pe=vt.y,ne?Object.assign({},Ue,((De={})[Te]=Be?"0":"",De[Ce]=qe?"0":"",De.transform=(Se.devicePixelRatio||1)<=1?"translate("+ve+"px, "+pe+"px)":"translate3d("+ve+"px, "+pe+"px, 0)",De)):Object.assign({},Ue,((a={})[Te]=Be?pe+"px":"",a[Ce]=qe?ve+"px":"",a.transform="",a))}const Ot={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(_){var a=_.state,m=_.options,x=m.gpuAcceleration,R=x===void 0||x,B=m.adaptive,z=B===void 0||B,Y=m.roundOffsets,ne=Y===void 0||Y,ae={placement:C(a.placement),variation:ge(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:R,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,he(Object.assign({},ae,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:z,roundOffsets:ne})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,he(Object.assign({},ae,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:ne})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})},data:{}};var st={passive:!0};const Xi={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(_){var a=_.state,m=_.instance,x=_.options,R=x.scroll,B=R===void 0||R,z=x.resize,Y=z===void 0||z,ne=H(a.elements.popper),ae=[].concat(a.scrollParents.reference,a.scrollParents.popper);return B&&ae.forEach(function(oe){oe.addEventListener("scroll",m.update,st)}),Y&&ne.addEventListener("resize",m.update,st),function(){B&&ae.forEach(function(oe){oe.removeEventListener("scroll",m.update,st)}),Y&&ne.removeEventListener("resize",m.update,st)}},data:{}};var Ed={left:"right",right:"left",bottom:"top",top:"bottom"};function Vr(_){return _.replace(/left|right|bottom|top/g,function(a){return Ed[a]})}var Sd={start:"end",end:"start"};function Do(_){return _.replace(/start|end/g,function(a){return Sd[a]})}function Yi(_){var a=H(_);return{scrollLeft:a.pageXOffset,scrollTop:a.pageYOffset}}function Zi(_){return F(W(_)).left+Yi(_).scrollLeft}function Vi(_){var a=N(_),m=a.overflow,x=a.overflowX,R=a.overflowY;return/auto|scroll|overlay|hidden/.test(m+R+x)}function qo(_){return["html","body","#document"].indexOf(X(_))>=0?_.ownerDocument.body:Q(_)&&Vi(_)?_:qo(se(_))}function Cr(_,a){var m;a===void 0&&(a=[]);var x=qo(_),R=x===((m=_.ownerDocument)==null?void 0:m.body),B=H(x),z=R?[B].concat(B.visualViewport||[],Vi(x)?x:[]):x,Y=a.concat(z);return R?Y:Y.concat(Cr(se(z)))}function es(_){return Object.assign({},_,{left:_.x,top:_.y,right:_.x+_.width,bottom:_.y+_.height})}function Lo(_,a,m){return a===S?es(function(x,R){var B=H(x),z=W(x),Y=B.visualViewport,ne=z.clientWidth,ae=z.clientHeight,oe=0,ie=0;if(Y){ne=Y.width,ae=Y.height;var $e=J();($e||!$e&&R==="fixed")&&(oe=Y.offsetLeft,ie=Y.offsetTop)}return{width:ne,height:ae,x:oe+Zi(x),y:ie}}(_,m)):Z(a)?function(x,R){var B=F(x,!1,R==="fixed");return B.top=B.top+x.clientTop,B.left=B.left+x.clientLeft,B.bottom=B.top+x.clientHeight,B.right=B.left+x.clientWidth,B.width=x.clientWidth,B.height=x.clientHeight,B.x=B.left,B.y=B.top,B}(a,m):es(function(x){var R,B=W(x),z=Yi(x),Y=(R=x.ownerDocument)==null?void 0:R.body,ne=P(B.scrollWidth,B.clientWidth,Y?Y.scrollWidth:0,Y?Y.clientWidth:0),ae=P(B.scrollHeight,B.clientHeight,Y?Y.scrollHeight:0,Y?Y.clientHeight:0),oe=-z.scrollLeft+Zi(x),ie=-z.scrollTop;return N(Y||B).direction==="rtl"&&(oe+=P(B.clientWidth,Y?Y.clientWidth:0)-ne),{width:ne,height:ae,x:oe,y:ie}}(W(_)))}function Po(_){var a,m=_.reference,x=_.element,R=_.placement,B=R?C(R):null,z=R?ge(R):null,Y=m.x+m.width/2-x.width/2,ne=m.y+m.height/2-x.height/2;switch(B){case s:a={x:Y,y:m.y-x.height};break;case o:a={x:Y,y:m.y+m.height};break;case f:a={x:m.x+m.width,y:ne};break;case g:a={x:m.x-x.width,y:ne};break;default:a={x:m.x,y:m.y}}var ae=B?Oe(B):null;if(ae!=null){var oe=ae==="y"?"height":"width";switch(z){case h:a[ae]=a[ae]-(m[oe]/2-x[oe]/2);break;case y:a[ae]=a[ae]+(m[oe]/2-x[oe]/2)}}return a}function Wn(_,a){a===void 0&&(a={});var m=a,x=m.placement,R=x===void 0?_.placement:x,B=m.strategy,z=B===void 0?_.strategy:B,Y=m.boundary,ne=Y===void 0?E:Y,ae=m.rootBoundary,oe=ae===void 0?S:ae,ie=m.elementContext,$e=ie===void 0?O:ie,ve=m.altBoundary,_e=ve!==void 0&&ve,pe=m.padding,ye=pe===void 0?0:pe,qe=re(typeof ye!="number"?ye:ue(ye,A)),Be=$e===O?b:O,Ce=_.rects.popper,Te=_.elements[_e?Be:$e],Se=function(at,_t,yt,Me){var jt=_t==="clippingParents"?function(Re){var ot=Cr(se(Re)),wt=["absolute","fixed"].indexOf(N(Re).position)>=0&&Q(Re)?de(Re):Re;return Z(wt)?ot.filter(function(hn){return Z(hn)&&L(hn,wt)&&X(hn)!=="body"}):[]}(at):[].concat(_t),Rt=[].concat(jt,[yt]),sr=Rt[0],Ve=Rt.reduce(function(Re,ot){var wt=Lo(at,ot,Me);return Re.top=P(wt.top,Re.top),Re.right=q(wt.right,Re.right),Re.bottom=q(wt.bottom,Re.bottom),Re.left=P(wt.left,Re.left),Re},Lo(at,sr,Me));return Ve.width=Ve.right-Ve.left,Ve.height=Ve.bottom-Ve.top,Ve.x=Ve.left,Ve.y=Ve.top,Ve}(Z(Te)?Te:Te.contextElement||W(_.elements.popper),ne,oe,z),xe=F(_.elements.reference),ke=Po({reference:xe,element:Ce,placement:R}),Le=es(Object.assign({},Ce,ke)),De=$e===O?Le:xe,Ue={top:Se.top-De.top+qe.top,bottom:De.bottom-Se.bottom+qe.bottom,left:Se.left-De.left+qe.left,right:De.right-Se.right+qe.right},vt=_.modifiersData.offset;if($e===O&&vt){var kt=vt[R];Object.keys(Ue).forEach(function(at){var _t=[f,o].indexOf(at)>=0?1:-1,yt=[s,o].indexOf(at)>=0?"y":"x";Ue[at]+=kt[yt]*_t})}return Ue}function Cd(_,a){a===void 0&&(a={});var m=a,x=m.placement,R=m.boundary,B=m.rootBoundary,z=m.padding,Y=m.flipVariations,ne=m.allowedAutoPlacements,ae=ne===void 0?l:ne,oe=ge(x),ie=oe?Y?p:p.filter(function(_e){return ge(_e)===oe}):A,$e=ie.filter(function(_e){return ae.indexOf(_e)>=0});$e.length===0&&($e=ie);var ve=$e.reduce(function(_e,pe){return _e[pe]=Wn(_,{placement:pe,boundary:R,rootBoundary:B,padding:z})[C(pe)],_e},{});return Object.keys(ve).sort(function(_e,pe){return ve[_e]-ve[pe]})}const Io={name:"flip",enabled:!0,phase:"main",fn:function(_){var a=_.state,m=_.options,x=_.name;if(!a.modifiersData[x]._skip){for(var R=m.mainAxis,B=R===void 0||R,z=m.altAxis,Y=z===void 0||z,ne=m.fallbackPlacements,ae=m.padding,oe=m.boundary,ie=m.rootBoundary,$e=m.altBoundary,ve=m.flipVariations,_e=ve===void 0||ve,pe=m.allowedAutoPlacements,ye=a.options.placement,qe=C(ye),Be=ne||(qe!==ye&&_e?function(Re){if(C(Re)===w)return[];var ot=Vr(Re);return[Do(Re),ot,Do(ot)]}(ye):[Vr(ye)]),Ce=[ye].concat(Be).reduce(function(Re,ot){return Re.concat(C(ot)===w?Cd(a,{placement:ot,boundary:oe,rootBoundary:ie,padding:ae,flipVariations:_e,allowedAutoPlacements:pe}):ot)},[]),Te=a.rects.reference,Se=a.rects.popper,xe=new Map,ke=!0,Le=Ce[0],De=0;De<Ce.length;De++){var Ue=Ce[De],vt=C(Ue),kt=ge(Ue)===h,at=[s,o].indexOf(vt)>=0,_t=at?"width":"height",yt=Wn(a,{placement:Ue,boundary:oe,rootBoundary:ie,altBoundary:$e,padding:ae}),Me=at?kt?f:g:kt?o:s;Te[_t]>Se[_t]&&(Me=Vr(Me));var jt=Vr(Me),Rt=[];if(B&&Rt.push(yt[vt]<=0),Y&&Rt.push(yt[Me]<=0,yt[jt]<=0),Rt.every(function(Re){return Re})){Le=Ue,ke=!1;break}xe.set(Ue,Rt)}if(ke)for(var sr=function(Re){var ot=Ce.find(function(wt){var hn=xe.get(wt);if(hn)return hn.slice(0,Re).every(function(hi){return hi})});if(ot)return Le=ot,"break"},Ve=_e?3:1;Ve>0&&sr(Ve)!=="break";Ve--);a.placement!==Le&&(a.modifiersData[x]._skip=!0,a.placement=Le,a.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function jo(_,a,m){return m===void 0&&(m={x:0,y:0}),{top:_.top-a.height-m.y,right:_.right-a.width+m.x,bottom:_.bottom-a.height+m.y,left:_.left-a.width-m.x}}function Ro(_){return[s,f,o,g].some(function(a){return _[a]>=0})}const Bo={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(_){var a=_.state,m=_.name,x=a.rects.reference,R=a.rects.popper,B=a.modifiersData.preventOverflow,z=Wn(a,{elementContext:"reference"}),Y=Wn(a,{altBoundary:!0}),ne=jo(z,x),ae=jo(Y,R,B),oe=Ro(ne),ie=Ro(ae);a.modifiersData[m]={referenceClippingOffsets:ne,popperEscapeOffsets:ae,isReferenceHidden:oe,hasPopperEscaped:ie},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":oe,"data-popper-escaped":ie})}},No={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(_){var a=_.state,m=_.options,x=_.name,R=m.offset,B=R===void 0?[0,0]:R,z=l.reduce(function(oe,ie){return oe[ie]=function($e,ve,_e){var pe=C($e),ye=[g,s].indexOf(pe)>=0?-1:1,qe=typeof _e=="function"?_e(Object.assign({},ve,{placement:$e})):_e,Be=qe[0],Ce=qe[1];return Be=Be||0,Ce=(Ce||0)*ye,[g,f].indexOf(pe)>=0?{x:Ce,y:Be}:{x:Be,y:Ce}}(ie,a.rects,B),oe},{}),Y=z[a.placement],ne=Y.x,ae=Y.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=ne,a.modifiersData.popperOffsets.y+=ae),a.modifiersData[x]=z}},ts={name:"popperOffsets",enabled:!0,phase:"read",fn:function(_){var a=_.state,m=_.name;a.modifiersData[m]=Po({reference:a.rects.reference,element:a.rects.popper,placement:a.placement})},data:{}},Fo={name:"preventOverflow",enabled:!0,phase:"main",fn:function(_){var a=_.state,m=_.options,x=_.name,R=m.mainAxis,B=R===void 0||R,z=m.altAxis,Y=z!==void 0&&z,ne=m.boundary,ae=m.rootBoundary,oe=m.altBoundary,ie=m.padding,$e=m.tether,ve=$e===void 0||$e,_e=m.tetherOffset,pe=_e===void 0?0:_e,ye=Wn(a,{boundary:ne,rootBoundary:ae,padding:ie,altBoundary:oe}),qe=C(a.placement),Be=ge(a.placement),Ce=!Be,Te=Oe(qe),Se=Te==="x"?"y":"x",xe=a.modifiersData.popperOffsets,ke=a.rects.reference,Le=a.rects.popper,De=typeof pe=="function"?pe(Object.assign({},a.rects,{placement:a.placement})):pe,Ue=typeof De=="number"?{mainAxis:De,altAxis:De}:Object.assign({mainAxis:0,altAxis:0},De),vt=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,kt={x:0,y:0};if(xe){if(B){var at,_t=Te==="y"?s:g,yt=Te==="y"?o:f,Me=Te==="y"?"height":"width",jt=xe[Te],Rt=jt+ye[_t],sr=jt-ye[yt],Ve=ve?-Le[Me]/2:0,Re=Be===h?ke[Me]:Le[Me],ot=Be===h?-Le[Me]:-ke[Me],wt=a.elements.arrow,hn=ve&&wt?T(wt):{width:0,height:0},hi=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Ju=hi[_t],Qu=hi[yt],vi=je(0,ke[Me],hn[Me]),Uv=Ce?ke[Me]/2-Ve-vi-Ju-Ue.mainAxis:Re-vi-Ju-Ue.mainAxis,Kv=Ce?-ke[Me]/2+Ve+vi+Qu+Ue.mainAxis:ot+vi+Qu+Ue.mainAxis,xs=a.elements.arrow&&de(a.elements.arrow),zv=xs?Te==="y"?xs.clientTop||0:xs.clientLeft||0:0,Xu=(at=vt==null?void 0:vt[Te])!=null?at:0,Hv=jt+Kv-Xu,Yu=je(ve?q(Rt,jt+Uv-Xu-zv):Rt,jt,ve?P(sr,Hv):sr);xe[Te]=Yu,kt[Te]=Yu-jt}if(Y){var Zu,Gv=Te==="x"?s:g,Wv=Te==="x"?o:f,$n=xe[Se],gi=Se==="y"?"height":"width",Vu=$n+ye[Gv],ec=$n-ye[Wv],Os=[s,g].indexOf(qe)!==-1,tc=(Zu=vt==null?void 0:vt[Se])!=null?Zu:0,nc=Os?Vu:$n-ke[gi]-Le[gi]-tc+Ue.altAxis,rc=Os?$n+ke[gi]+Le[gi]-tc-Ue.altAxis:ec,ic=ve&&Os?function(Jv,Qv,Ts){var sc=je(Jv,Qv,Ts);return sc>Ts?Ts:sc}(nc,$n,rc):je(ve?nc:Vu,$n,ve?rc:ec);xe[Se]=ic,kt[Se]=ic-$n}a.modifiersData[x]=kt}},requiresIfExists:["offset"]};function xd(_,a,m){m===void 0&&(m=!1);var x,R,B=Q(a),z=Q(a)&&function(ie){var $e=ie.getBoundingClientRect(),ve=j($e.width)/ie.offsetWidth||1,_e=j($e.height)/ie.offsetHeight||1;return ve!==1||_e!==1}(a),Y=W(a),ne=F(_,z,m),ae={scrollLeft:0,scrollTop:0},oe={x:0,y:0};return(B||!B&&!m)&&((X(a)!=="body"||Vi(Y))&&(ae=(x=a)!==H(x)&&Q(x)?{scrollLeft:(R=x).scrollLeft,scrollTop:R.scrollTop}:Yi(x)),Q(a)?((oe=F(a,!0)).x+=a.clientLeft,oe.y+=a.clientTop):Y&&(oe.x=Zi(Y))),{x:ne.left+ae.scrollLeft-oe.x,y:ne.top+ae.scrollTop-oe.y,width:ne.width,height:ne.height}}function Od(_){var a=new Map,m=new Set,x=[];function R(B){m.add(B.name),[].concat(B.requires||[],B.requiresIfExists||[]).forEach(function(z){if(!m.has(z)){var Y=a.get(z);Y&&R(Y)}}),x.push(B)}return _.forEach(function(B){a.set(B.name,B)}),_.forEach(function(B){m.has(B.name)||R(B)}),x}var Mo={placement:"bottom",modifiers:[],strategy:"absolute"};function Uo(){for(var _=arguments.length,a=new Array(_),m=0;m<_;m++)a[m]=arguments[m];return!a.some(function(x){return!(x&&typeof x.getBoundingClientRect=="function")})}function ei(_){_===void 0&&(_={});var a=_,m=a.defaultModifiers,x=m===void 0?[]:m,R=a.defaultOptions,B=R===void 0?Mo:R;return function(z,Y,ne){ne===void 0&&(ne=B);var ae,oe,ie={placement:"bottom",orderedModifiers:[],options:Object.assign({},Mo,B),modifiersData:{},elements:{reference:z,popper:Y},attributes:{},styles:{}},$e=[],ve=!1,_e={state:ie,setOptions:function(ye){var qe=typeof ye=="function"?ye(ie.options):ye;pe(),ie.options=Object.assign({},B,ie.options,qe),ie.scrollParents={reference:Z(z)?Cr(z):z.contextElement?Cr(z.contextElement):[],popper:Cr(Y)};var Be,Ce,Te=function(Se){var xe=Od(Se);return ee.reduce(function(ke,Le){return ke.concat(xe.filter(function(De){return De.phase===Le}))},[])}((Be=[].concat(x,ie.options.modifiers),Ce=Be.reduce(function(Se,xe){var ke=Se[xe.name];return Se[xe.name]=ke?Object.assign({},ke,xe,{options:Object.assign({},ke.options,xe.options),data:Object.assign({},ke.data,xe.data)}):xe,Se},{}),Object.keys(Ce).map(function(Se){return Ce[Se]})));return ie.orderedModifiers=Te.filter(function(Se){return Se.enabled}),ie.orderedModifiers.forEach(function(Se){var xe=Se.name,ke=Se.options,Le=ke===void 0?{}:ke,De=Se.effect;if(typeof De=="function"){var Ue=De({state:ie,name:xe,instance:_e,options:Le});$e.push(Ue||function(){})}}),_e.update()},forceUpdate:function(){if(!ve){var ye=ie.elements,qe=ye.reference,Be=ye.popper;if(Uo(qe,Be)){ie.rects={reference:xd(qe,de(Be),ie.options.strategy==="fixed"),popper:T(Be)},ie.reset=!1,ie.placement=ie.options.placement,ie.orderedModifiers.forEach(function(De){return ie.modifiersData[De.name]=Object.assign({},De.data)});for(var Ce=0;Ce<ie.orderedModifiers.length;Ce++)if(ie.reset!==!0){var Te=ie.orderedModifiers[Ce],Se=Te.fn,xe=Te.options,ke=xe===void 0?{}:xe,Le=Te.name;typeof Se=="function"&&(ie=Se({state:ie,options:ke,name:Le,instance:_e})||ie)}else ie.reset=!1,Ce=-1}}},update:(ae=function(){return new Promise(function(ye){_e.forceUpdate(),ye(ie)})},function(){return oe||(oe=new Promise(function(ye){Promise.resolve().then(function(){oe=void 0,ye(ae())})})),oe}),destroy:function(){pe(),ve=!0}};if(!Uo(z,Y))return _e;function pe(){$e.forEach(function(ye){return ye()}),$e=[]}return _e.setOptions(ne).then(function(ye){!ve&&ne.onFirstUpdate&&ne.onFirstUpdate(ye)}),_e}}var Td=ei(),kd=ei({defaultModifiers:[Xi,ts,Ot,$]}),ns=ei({defaultModifiers:[Xi,ts,Ot,$,No,Io,Fo,fe,Bo]});const Ko=Object.freeze(Object.defineProperty({__proto__:null,afterMain:I,afterRead:d,afterWrite:U,applyStyles:$,arrow:fe,auto:w,basePlacements:A,beforeMain:v,beforeRead:u,beforeWrite:k,bottom:o,clippingParents:E,computeStyles:Ot,createPopper:ns,createPopperBase:Td,createPopperLite:kd,detectOverflow:Wn,end:y,eventListeners:Xi,flip:Io,hide:Bo,left:g,main:D,modifierPhases:ee,offset:No,placements:l,popper:O,popperGenerator:ei,popperOffsets:ts,preventOverflow:Fo,read:c,reference:b,right:f,start:h,top:s,variationPlacements:p,viewport:S,write:M},Symbol.toStringTag,{value:"Module"})),on=new Map,rs={set(_,a,m){on.has(_)||on.set(_,new Map);const x=on.get(_);x.has(a)||x.size===0?x.set(a,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(x.keys())[0]}.`)},get:(_,a)=>on.has(_)&&on.get(_).get(a)||null,remove(_,a){if(!on.has(_))return;const m=on.get(_);m.delete(a),m.size===0&&on.delete(_)}},is="transitionend",zo=_=>(_&&window.CSS&&window.CSS.escape&&(_=_.replace(/#([^\s"#']+)/g,(a,m)=>`#${CSS.escape(m)}`)),_),Dd=_=>_==null?`${_}`:Object.prototype.toString.call(_).match(/\s([a-z]+)/i)[1].toLowerCase(),Ho=_=>{_.dispatchEvent(new Event(is))},Jt=_=>!(!_||typeof _!="object")&&(_.jquery!==void 0&&(_=_[0]),_.nodeType!==void 0),un=_=>Jt(_)?_.jquery?_[0]:_:typeof _=="string"&&_.length>0?document.querySelector(zo(_)):null,Jn=_=>{if(!Jt(_)||_.getClientRects().length===0)return!1;const a=getComputedStyle(_).getPropertyValue("visibility")==="visible",m=_.closest("details:not([open])");if(!m)return a;if(m!==_){const x=_.closest("summary");if(x&&x.parentNode!==m||x===null)return!1}return a},cn=_=>!_||_.nodeType!==Node.ELEMENT_NODE||!!_.classList.contains("disabled")||(_.disabled!==void 0?_.disabled:_.hasAttribute("disabled")&&_.getAttribute("disabled")!=="false"),Go=_=>{if(!document.documentElement.attachShadow)return null;if(typeof _.getRootNode=="function"){const a=_.getRootNode();return a instanceof ShadowRoot?a:null}return _ instanceof ShadowRoot?_:_.parentNode?Go(_.parentNode):null},ti=()=>{},xr=_=>{_.offsetHeight},Wo=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,ss=[],gt=()=>document.documentElement.dir==="rtl",pt=_=>{var a;a=()=>{const m=Wo();if(m){const x=_.NAME,R=m.fn[x];m.fn[x]=_.jQueryInterface,m.fn[x].Constructor=_,m.fn[x].noConflict=()=>(m.fn[x]=R,_.jQueryInterface)}},document.readyState==="loading"?(ss.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of ss)m()}),ss.push(a)):a()},lt=(_,a=[],m=_)=>typeof _=="function"?_.call(...a):m,Jo=(_,a,m=!0)=>{if(!m)return void lt(_);const x=(z=>{if(!z)return 0;let{transitionDuration:Y,transitionDelay:ne}=window.getComputedStyle(z);const ae=Number.parseFloat(Y),oe=Number.parseFloat(ne);return ae||oe?(Y=Y.split(",")[0],ne=ne.split(",")[0],1e3*(Number.parseFloat(Y)+Number.parseFloat(ne))):0})(a)+5;let R=!1;const B=({target:z})=>{z===a&&(R=!0,a.removeEventListener(is,B),lt(_))};a.addEventListener(is,B),setTimeout(()=>{R||Ho(a)},x)},as=(_,a,m,x)=>{const R=_.length;let B=_.indexOf(a);return B===-1?!m&&x?_[R-1]:_[0]:(B+=m?1:-1,x&&(B=(B+R)%R),_[Math.max(0,Math.min(B,R-1))])},qd=/[^.]*(?=\..*)\.|.*/,Ld=/\..*/,Pd=/::\d+$/,os={};/*!
	  * Bootstrap v5.3.7 (https://getbootstrap.com/)
	  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
	  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
	  */let Qo=1;const Xo={mouseenter:"mouseover",mouseleave:"mouseout"},Id=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Yo(_,a){return a&&`${a}::${Qo++}`||_.uidEvent||Qo++}function Zo(_){const a=Yo(_);return _.uidEvent=a,os[a]=os[a]||{},os[a]}function Vo(_,a,m=null){return Object.values(_).find(x=>x.callable===a&&x.delegationSelector===m)}function eu(_,a,m){const x=typeof a=="string",R=x?m:a||m;let B=nu(_);return Id.has(B)||(B=_),[x,R,B]}function tu(_,a,m,x,R){if(typeof a!="string"||!_)return;let[B,z,Y]=eu(a,m,x);a in Xo&&(z=(_e=>function(pe){if(!pe.relatedTarget||pe.relatedTarget!==pe.delegateTarget&&!pe.delegateTarget.contains(pe.relatedTarget))return _e.call(this,pe)})(z));const ne=Zo(_),ae=ne[Y]||(ne[Y]={}),oe=Vo(ae,z,B?m:null);if(oe)return void(oe.oneOff=oe.oneOff&&R);const ie=Yo(z,a.replace(qd,"")),$e=B?function(ve,_e,pe){return function ye(qe){const Be=ve.querySelectorAll(_e);for(let{target:Ce}=qe;Ce&&Ce!==this;Ce=Ce.parentNode)for(const Te of Be)if(Te===Ce)return cs(qe,{delegateTarget:Ce}),ye.oneOff&&V.off(ve,qe.type,_e,pe),pe.apply(Ce,[qe])}}(_,m,z):function(ve,_e){return function pe(ye){return cs(ye,{delegateTarget:ve}),pe.oneOff&&V.off(ve,ye.type,_e),_e.apply(ve,[ye])}}(_,z);$e.delegationSelector=B?m:null,$e.callable=z,$e.oneOff=R,$e.uidEvent=ie,ae[ie]=$e,_.addEventListener(Y,$e,B)}function us(_,a,m,x,R){const B=Vo(a[m],x,R);B&&(_.removeEventListener(m,B,!!R),delete a[m][B.uidEvent])}function jd(_,a,m,x){const R=a[m]||{};for(const[B,z]of Object.entries(R))B.includes(x)&&us(_,a,m,z.callable,z.delegationSelector)}function nu(_){return _=_.replace(Ld,""),Xo[_]||_}const V={on(_,a,m,x){tu(_,a,m,x,!1)},one(_,a,m,x){tu(_,a,m,x,!0)},off(_,a,m,x){if(typeof a!="string"||!_)return;const[R,B,z]=eu(a,m,x),Y=z!==a,ne=Zo(_),ae=ne[z]||{},oe=a.startsWith(".");if(B===void 0){if(oe)for(const ie of Object.keys(ne))jd(_,ne,ie,a.slice(1));for(const[ie,$e]of Object.entries(ae)){const ve=ie.replace(Pd,"");Y&&!a.includes(ve)||us(_,ne,z,$e.callable,$e.delegationSelector)}}else{if(!Object.keys(ae).length)return;us(_,ne,z,B,R?m:null)}},trigger(_,a,m){if(typeof a!="string"||!_)return null;const x=Wo();let R=null,B=!0,z=!0,Y=!1;a!==nu(a)&&x&&(R=x.Event(a,m),x(_).trigger(R),B=!R.isPropagationStopped(),z=!R.isImmediatePropagationStopped(),Y=R.isDefaultPrevented());const ne=cs(new Event(a,{bubbles:B,cancelable:!0}),m);return Y&&ne.preventDefault(),z&&_.dispatchEvent(ne),ne.defaultPrevented&&R&&R.preventDefault(),ne}};function cs(_,a={}){for(const[m,x]of Object.entries(a))try{_[m]=x}catch{Object.defineProperty(_,m,{configurable:!0,get:()=>x})}return _}function ru(_){if(_==="true")return!0;if(_==="false")return!1;if(_===Number(_).toString())return Number(_);if(_===""||_==="null")return null;if(typeof _!="string")return _;try{return JSON.parse(decodeURIComponent(_))}catch{return _}}function ls(_){return _.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}const Qt={setDataAttribute(_,a,m){_.setAttribute(`data-bs-${ls(a)}`,m)},removeDataAttribute(_,a){_.removeAttribute(`data-bs-${ls(a)}`)},getDataAttributes(_){if(!_)return{};const a={},m=Object.keys(_.dataset).filter(x=>x.startsWith("bs")&&!x.startsWith("bsConfig"));for(const x of m){let R=x.replace(/^bs/,"");R=R.charAt(0).toLowerCase()+R.slice(1),a[R]=ru(_.dataset[x])}return a},getDataAttribute:(_,a)=>ru(_.getAttribute(`data-bs-${ls(a)}`))};class Or{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(a){return a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a}_mergeConfigObj(a,m){const x=Jt(m)?Qt.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof x=="object"?x:{},...Jt(m)?Qt.getDataAttributes(m):{},...typeof a=="object"?a:{}}}_typeCheckConfig(a,m=this.constructor.DefaultType){for(const[x,R]of Object.entries(m)){const B=a[x],z=Jt(B)?"element":Dd(B);if(!new RegExp(R).test(z))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${x}" provided type "${z}" but expected type "${R}".`)}}}class Tt extends Or{constructor(a,m){super(),(a=un(a))&&(this._element=a,this._config=this._getConfig(m),rs.set(this._element,this.constructor.DATA_KEY,this))}dispose(){rs.remove(this._element,this.constructor.DATA_KEY),V.off(this._element,this.constructor.EVENT_KEY);for(const a of Object.getOwnPropertyNames(this))this[a]=null}_queueCallback(a,m,x=!0){Jo(a,m,x)}_getConfig(a){return a=this._mergeConfigObj(a,this._element),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}static getInstance(a){return rs.get(un(a),this.DATA_KEY)}static getOrCreateInstance(a,m={}){return this.getInstance(a)||new this(a,typeof m=="object"?m:null)}static get VERSION(){return"5.3.7"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(a){return`${a}${this.EVENT_KEY}`}}const fs=_=>{let a=_.getAttribute("data-bs-target");if(!a||a==="#"){let m=_.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),a=m&&m!=="#"?m.trim():null}return a?a.split(",").map(m=>zo(m)).join(","):null},le={find:(_,a=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(a,_)),findOne:(_,a=document.documentElement)=>Element.prototype.querySelector.call(a,_),children:(_,a)=>[].concat(..._.children).filter(m=>m.matches(a)),parents(_,a){const m=[];let x=_.parentNode.closest(a);for(;x;)m.push(x),x=x.parentNode.closest(a);return m},prev(_,a){let m=_.previousElementSibling;for(;m;){if(m.matches(a))return[m];m=m.previousElementSibling}return[]},next(_,a){let m=_.nextElementSibling;for(;m;){if(m.matches(a))return[m];m=m.nextElementSibling}return[]},focusableChildren(_){const a=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(a,_).filter(m=>!cn(m)&&Jn(m))},getSelectorFromElement(_){const a=fs(_);return a&&le.findOne(a)?a:null},getElementFromSelector(_){const a=fs(_);return a?le.findOne(a):null},getMultipleElementsFromSelector(_){const a=fs(_);return a?le.find(a):[]}},ni=(_,a="hide")=>{const m=`click.dismiss${_.EVENT_KEY}`,x=_.NAME;V.on(document,m,`[data-bs-dismiss="${x}"]`,function(R){if(["A","AREA"].includes(this.tagName)&&R.preventDefault(),cn(this))return;const B=le.getElementFromSelector(this)||this.closest(`.${x}`);_.getOrCreateInstance(B)[a]()})},iu=".bs.alert",Rd=`close${iu}`,Bd=`closed${iu}`;class Qn extends Tt{static get NAME(){return"alert"}close(){if(V.trigger(this._element,Rd).defaultPrevented)return;this._element.classList.remove("show");const a=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,a)}_destroyElement(){this._element.remove(),V.trigger(this._element,Bd),this.dispose()}static jQueryInterface(a){return this.each(function(){const m=Qn.getOrCreateInstance(this);if(typeof a=="string"){if(m[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);m[a](this)}})}}ni(Qn,"close"),pt(Qn);const su='[data-bs-toggle="button"]';class Xn extends Tt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(a){return this.each(function(){const m=Xn.getOrCreateInstance(this);a==="toggle"&&m[a]()})}}V.on(document,"click.bs.button.data-api",su,_=>{_.preventDefault();const a=_.target.closest(su);Xn.getOrCreateInstance(a).toggle()}),pt(Xn);const Yn=".bs.swipe",Nd=`touchstart${Yn}`,Fd=`touchmove${Yn}`,Md=`touchend${Yn}`,Ud=`pointerdown${Yn}`,Kd=`pointerup${Yn}`,zd={endCallback:null,leftCallback:null,rightCallback:null},Hd={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class ri extends Or{constructor(a,m){super(),this._element=a,a&&ri.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return zd}static get DefaultType(){return Hd}static get NAME(){return"swipe"}dispose(){V.off(this._element,Yn)}_start(a){this._supportPointerEvents?this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX):this._deltaX=a.touches[0].clientX}_end(a){this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX-this._deltaX),this._handleSwipe(),lt(this._config.endCallback)}_move(a){this._deltaX=a.touches&&a.touches.length>1?0:a.touches[0].clientX-this._deltaX}_handleSwipe(){const a=Math.abs(this._deltaX);if(a<=40)return;const m=a/this._deltaX;this._deltaX=0,m&&lt(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(V.on(this._element,Ud,a=>this._start(a)),V.on(this._element,Kd,a=>this._end(a)),this._element.classList.add("pointer-event")):(V.on(this._element,Nd,a=>this._start(a)),V.on(this._element,Fd,a=>this._move(a)),V.on(this._element,Md,a=>this._end(a)))}_eventIsPointerPenTouch(a){return this._supportPointerEvents&&(a.pointerType==="pen"||a.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ln=".bs.carousel",au=".data-api",Gd="ArrowLeft",Wd="ArrowRight",Tr="next",Zn="prev",Vn="left",ii="right",Jd=`slide${ln}`,ds=`slid${ln}`,Qd=`keydown${ln}`,Xd=`mouseenter${ln}`,Yd=`mouseleave${ln}`,Zd=`dragstart${ln}`,Vd=`load${ln}${au}`,eh=`click${ln}${au}`,ou="carousel",si="active",uu=".active",cu=".carousel-item",th=uu+cu,nh={[Gd]:ii,[Wd]:Vn},rh={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},ih={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class pn extends Tt{constructor(a,m){super(a,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=le.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===ou&&this.cycle()}static get Default(){return rh}static get DefaultType(){return ih}static get NAME(){return"carousel"}next(){this._slide(Tr)}nextWhenVisible(){!document.hidden&&Jn(this._element)&&this.next()}prev(){this._slide(Zn)}pause(){this._isSliding&&Ho(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?V.one(this._element,ds,()=>this.cycle()):this.cycle())}to(a){const m=this._getItems();if(a>m.length-1||a<0)return;if(this._isSliding)return void V.one(this._element,ds,()=>this.to(a));const x=this._getItemIndex(this._getActive());if(x===a)return;const R=a>x?Tr:Zn;this._slide(R,m[a])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(a){return a.defaultInterval=a.interval,a}_addEventListeners(){this._config.keyboard&&V.on(this._element,Qd,a=>this._keydown(a)),this._config.pause==="hover"&&(V.on(this._element,Xd,()=>this.pause()),V.on(this._element,Yd,()=>this._maybeEnableCycle())),this._config.touch&&ri.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of le.find(".carousel-item img",this._element))V.on(m,Zd,x=>x.preventDefault());const a={leftCallback:()=>this._slide(this._directionToOrder(Vn)),rightCallback:()=>this._slide(this._directionToOrder(ii)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new ri(this._element,a)}_keydown(a){if(/input|textarea/i.test(a.target.tagName))return;const m=nh[a.key];m&&(a.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(a){return this._getItems().indexOf(a)}_setActiveIndicatorElement(a){if(!this._indicatorsElement)return;const m=le.findOne(uu,this._indicatorsElement);m.classList.remove(si),m.removeAttribute("aria-current");const x=le.findOne(`[data-bs-slide-to="${a}"]`,this._indicatorsElement);x&&(x.classList.add(si),x.setAttribute("aria-current","true"))}_updateInterval(){const a=this._activeElement||this._getActive();if(!a)return;const m=Number.parseInt(a.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(a,m=null){if(this._isSliding)return;const x=this._getActive(),R=a===Tr,B=m||as(this._getItems(),x,R,this._config.wrap);if(B===x)return;const z=this._getItemIndex(B),Y=ie=>V.trigger(this._element,ie,{relatedTarget:B,direction:this._orderToDirection(a),from:this._getItemIndex(x),to:z});if(Y(Jd).defaultPrevented||!x||!B)return;const ne=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(z),this._activeElement=B;const ae=R?"carousel-item-start":"carousel-item-end",oe=R?"carousel-item-next":"carousel-item-prev";B.classList.add(oe),xr(B),x.classList.add(ae),B.classList.add(ae),this._queueCallback(()=>{B.classList.remove(ae,oe),B.classList.add(si),x.classList.remove(si,oe,ae),this._isSliding=!1,Y(ds)},x,this._isAnimated()),ne&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return le.findOne(th,this._element)}_getItems(){return le.find(cu,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(a){return gt()?a===Vn?Zn:Tr:a===Vn?Tr:Zn}_orderToDirection(a){return gt()?a===Zn?Vn:ii:a===Zn?ii:Vn}static jQueryInterface(a){return this.each(function(){const m=pn.getOrCreateInstance(this,a);if(typeof a!="number"){if(typeof a=="string"){if(m[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);m[a]()}}else m.to(a)})}}V.on(document,eh,"[data-bs-slide], [data-bs-slide-to]",function(_){const a=le.getElementFromSelector(this);if(!a||!a.classList.contains(ou))return;_.preventDefault();const m=pn.getOrCreateInstance(a),x=this.getAttribute("data-bs-slide-to");return x?(m.to(x),void m._maybeEnableCycle()):Qt.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),V.on(window,Vd,()=>{const _=le.find('[data-bs-ride="carousel"]');for(const a of _)pn.getOrCreateInstance(a)}),pt(pn);const kr=".bs.collapse",sh=`show${kr}`,ah=`shown${kr}`,oh=`hide${kr}`,uh=`hidden${kr}`,ch=`click${kr}.data-api`,hs="show",er="collapse",ai="collapsing",lh=`:scope .${er} .${er}`,vs='[data-bs-toggle="collapse"]',fh={parent:null,toggle:!0},dh={parent:"(null|element)",toggle:"boolean"};class mn extends Tt{constructor(a,m){super(a,m),this._isTransitioning=!1,this._triggerArray=[];const x=le.find(vs);for(const R of x){const B=le.getSelectorFromElement(R),z=le.find(B).filter(Y=>Y===this._element);B!==null&&z.length&&this._triggerArray.push(R)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return fh}static get DefaultType(){return dh}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let a=[];if(this._config.parent&&(a=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(R=>R!==this._element).map(R=>mn.getOrCreateInstance(R,{toggle:!1}))),a.length&&a[0]._isTransitioning||V.trigger(this._element,sh).defaultPrevented)return;for(const R of a)R.hide();const m=this._getDimension();this._element.classList.remove(er),this._element.classList.add(ai),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const x=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(er,hs),this._element.style[m]="",V.trigger(this._element,ah)},this._element,!0),this._element.style[m]=`${this._element[x]}px`}hide(){if(this._isTransitioning||!this._isShown()||V.trigger(this._element,oh).defaultPrevented)return;const a=this._getDimension();this._element.style[a]=`${this._element.getBoundingClientRect()[a]}px`,xr(this._element),this._element.classList.add(ai),this._element.classList.remove(er,hs);for(const m of this._triggerArray){const x=le.getElementFromSelector(m);x&&!this._isShown(x)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[a]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(er),V.trigger(this._element,uh)},this._element,!0)}_isShown(a=this._element){return a.classList.contains(hs)}_configAfterMerge(a){return a.toggle=!!a.toggle,a.parent=un(a.parent),a}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const a=this._getFirstLevelChildren(vs);for(const m of a){const x=le.getElementFromSelector(m);x&&this._addAriaAndCollapsedClass([m],this._isShown(x))}}_getFirstLevelChildren(a){const m=le.find(lh,this._config.parent);return le.find(a,this._config.parent).filter(x=>!m.includes(x))}_addAriaAndCollapsedClass(a,m){if(a.length)for(const x of a)x.classList.toggle("collapsed",!m),x.setAttribute("aria-expanded",m)}static jQueryInterface(a){const m={};return typeof a=="string"&&/show|hide/.test(a)&&(m.toggle=!1),this.each(function(){const x=mn.getOrCreateInstance(this,m);if(typeof a=="string"){if(x[a]===void 0)throw new TypeError(`No method named "${a}"`);x[a]()}})}}V.on(document,ch,vs,function(_){(_.target.tagName==="A"||_.delegateTarget&&_.delegateTarget.tagName==="A")&&_.preventDefault();for(const a of le.getMultipleElementsFromSelector(this))mn.getOrCreateInstance(a,{toggle:!1}).toggle()}),pt(mn);const lu="dropdown",_n=".bs.dropdown",gs=".data-api",hh="ArrowUp",fu="ArrowDown",vh=`hide${_n}`,gh=`hidden${_n}`,ph=`show${_n}`,mh=`shown${_n}`,du=`click${_n}${gs}`,hu=`keydown${_n}${gs}`,_h=`keyup${_n}${gs}`,tr="show",yn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',yh=`${yn}.${tr}`,oi=".dropdown-menu",wh=gt()?"top-end":"top-start",bh=gt()?"top-start":"top-end",Ah=gt()?"bottom-end":"bottom-start",$h=gt()?"bottom-start":"bottom-end",Eh=gt()?"left-start":"right-start",Sh=gt()?"right-start":"left-start",Ch={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},xh={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class ht extends Tt{constructor(a,m){super(a,m),this._popper=null,this._parent=this._element.parentNode,this._menu=le.next(this._element,oi)[0]||le.prev(this._element,oi)[0]||le.findOne(oi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Ch}static get DefaultType(){return xh}static get NAME(){return lu}toggle(){return this._isShown()?this.hide():this.show()}show(){if(cn(this._element)||this._isShown())return;const a={relatedTarget:this._element};if(!V.trigger(this._element,ph,a).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))V.on(m,"mouseover",ti);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(tr),this._element.classList.add(tr),V.trigger(this._element,mh,a)}}hide(){if(cn(this._element)||!this._isShown())return;const a={relatedTarget:this._element};this._completeHide(a)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(a){if(!V.trigger(this._element,vh,a).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))V.off(m,"mouseover",ti);this._popper&&this._popper.destroy(),this._menu.classList.remove(tr),this._element.classList.remove(tr),this._element.setAttribute("aria-expanded","false"),Qt.removeDataAttribute(this._menu,"popper"),V.trigger(this._element,gh,a),this._element.focus()}}_getConfig(a){if(typeof(a=super._getConfig(a)).reference=="object"&&!Jt(a.reference)&&typeof a.reference.getBoundingClientRect!="function")throw new TypeError(`${lu.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return a}_createPopper(){if(Ko===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let a=this._element;this._config.reference==="parent"?a=this._parent:Jt(this._config.reference)?a=un(this._config.reference):typeof this._config.reference=="object"&&(a=this._config.reference);const m=this._getPopperConfig();this._popper=ns(a,this._menu,m)}_isShown(){return this._menu.classList.contains(tr)}_getPlacement(){const a=this._parent;if(a.classList.contains("dropend"))return Eh;if(a.classList.contains("dropstart"))return Sh;if(a.classList.contains("dropup-center"))return"top";if(a.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return a.classList.contains("dropup")?m?bh:wh:m?$h:Ah}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(m=>Number.parseInt(m,10)):typeof a=="function"?m=>a(m,this._element):a}_getPopperConfig(){const a={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Qt.setDataAttribute(this._menu,"popper","static"),a.modifiers=[{name:"applyStyles",enabled:!1}]),{...a,...lt(this._config.popperConfig,[void 0,a])}}_selectMenuItem({key:a,target:m}){const x=le.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(R=>Jn(R));x.length&&as(x,m,a===fu,!x.includes(m)).focus()}static jQueryInterface(a){return this.each(function(){const m=ht.getOrCreateInstance(this,a);if(typeof a=="string"){if(m[a]===void 0)throw new TypeError(`No method named "${a}"`);m[a]()}})}static clearMenus(a){if(a.button===2||a.type==="keyup"&&a.key!=="Tab")return;const m=le.find(yh);for(const x of m){const R=ht.getInstance(x);if(!R||R._config.autoClose===!1)continue;const B=a.composedPath(),z=B.includes(R._menu);if(B.includes(R._element)||R._config.autoClose==="inside"&&!z||R._config.autoClose==="outside"&&z||R._menu.contains(a.target)&&(a.type==="keyup"&&a.key==="Tab"||/input|select|option|textarea|form/i.test(a.target.tagName)))continue;const Y={relatedTarget:R._element};a.type==="click"&&(Y.clickEvent=a),R._completeHide(Y)}}static dataApiKeydownHandler(a){const m=/input|textarea/i.test(a.target.tagName),x=a.key==="Escape",R=[hh,fu].includes(a.key);if(!R&&!x||m&&!x)return;a.preventDefault();const B=this.matches(yn)?this:le.prev(this,yn)[0]||le.next(this,yn)[0]||le.findOne(yn,a.delegateTarget.parentNode),z=ht.getOrCreateInstance(B);if(R)return a.stopPropagation(),z.show(),void z._selectMenuItem(a);z._isShown()&&(a.stopPropagation(),z.hide(),B.focus())}}V.on(document,hu,yn,ht.dataApiKeydownHandler),V.on(document,hu,oi,ht.dataApiKeydownHandler),V.on(document,du,ht.clearMenus),V.on(document,_h,ht.clearMenus),V.on(document,du,yn,function(_){_.preventDefault(),ht.getOrCreateInstance(this).toggle()}),pt(ht);const vu="backdrop",gu="show",pu=`mousedown.bs.${vu}`,Oh={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Th={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class mu extends Or{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return Oh}static get DefaultType(){return Th}static get NAME(){return vu}show(a){if(!this._config.isVisible)return void lt(a);this._append();const m=this._getElement();this._config.isAnimated&&xr(m),m.classList.add(gu),this._emulateAnimation(()=>{lt(a)})}hide(a){this._config.isVisible?(this._getElement().classList.remove(gu),this._emulateAnimation(()=>{this.dispose(),lt(a)})):lt(a)}dispose(){this._isAppended&&(V.off(this._element,pu),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add("fade"),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=un(a.rootElement),a}_append(){if(this._isAppended)return;const a=this._getElement();this._config.rootElement.append(a),V.on(a,pu,()=>{lt(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){Jo(a,this._getElement(),this._config.isAnimated)}}const ui=".bs.focustrap",kh=`focusin${ui}`,Dh=`keydown.tab${ui}`,_u="backward",qh={autofocus:!0,trapElement:null},Lh={autofocus:"boolean",trapElement:"element"};class yu extends Or{constructor(a){super(),this._config=this._getConfig(a),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return qh}static get DefaultType(){return Lh}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),V.off(document,ui),V.on(document,kh,a=>this._handleFocusin(a)),V.on(document,Dh,a=>this._handleKeydown(a)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,V.off(document,ui))}_handleFocusin(a){const{trapElement:m}=this._config;if(a.target===document||a.target===m||m.contains(a.target))return;const x=le.focusableChildren(m);x.length===0?m.focus():this._lastTabNavDirection===_u?x[x.length-1].focus():x[0].focus()}_handleKeydown(a){a.key==="Tab"&&(this._lastTabNavDirection=a.shiftKey?_u:"forward")}}const wu=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",bu=".sticky-top",ci="padding-right",Au="margin-right";class ps{constructor(){this._element=document.body}getWidth(){const a=document.documentElement.clientWidth;return Math.abs(window.innerWidth-a)}hide(){const a=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ci,m=>m+a),this._setElementAttributes(wu,ci,m=>m+a),this._setElementAttributes(bu,Au,m=>m-a)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ci),this._resetElementAttributes(wu,ci),this._resetElementAttributes(bu,Au)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(a,m,x){const R=this.getWidth();this._applyManipulationCallback(a,B=>{if(B!==this._element&&window.innerWidth>B.clientWidth+R)return;this._saveInitialAttribute(B,m);const z=window.getComputedStyle(B).getPropertyValue(m);B.style.setProperty(m,`${x(Number.parseFloat(z))}px`)})}_saveInitialAttribute(a,m){const x=a.style.getPropertyValue(m);x&&Qt.setDataAttribute(a,m,x)}_resetElementAttributes(a,m){this._applyManipulationCallback(a,x=>{const R=Qt.getDataAttribute(x,m);R!==null?(Qt.removeDataAttribute(x,m),x.style.setProperty(m,R)):x.style.removeProperty(m)})}_applyManipulationCallback(a,m){if(Jt(a))m(a);else for(const x of le.find(a,this._element))m(x)}}const mt=".bs.modal",Ph=`hide${mt}`,Ih=`hidePrevented${mt}`,$u=`hidden${mt}`,Eu=`show${mt}`,jh=`shown${mt}`,Rh=`resize${mt}`,Bh=`click.dismiss${mt}`,Nh=`mousedown.dismiss${mt}`,Fh=`keydown.dismiss${mt}`,Mh=`click${mt}.data-api`,Su="modal-open",Cu="show",ms="modal-static",Uh={backdrop:!0,focus:!0,keyboard:!0},Kh={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class fn extends Tt{constructor(a,m){super(a,m),this._dialog=le.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ps,this._addEventListeners()}static get Default(){return Uh}static get DefaultType(){return Kh}static get NAME(){return"modal"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||this._isTransitioning||V.trigger(this._element,Eu,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Su),this._adjustDialog(),this._backdrop.show(()=>this._showElement(a)))}hide(){this._isShown&&!this._isTransitioning&&(V.trigger(this._element,Ph).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Cu),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){V.off(window,mt),V.off(this._dialog,mt),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new mu({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new yu({trapElement:this._element})}_showElement(a){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=le.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),xr(this._element),this._element.classList.add(Cu),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,V.trigger(this._element,jh,{relatedTarget:a})},this._dialog,this._isAnimated())}_addEventListeners(){V.on(this._element,Fh,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),V.on(window,Rh,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),V.on(this._element,Nh,a=>{V.one(this._element,Bh,m=>{this._element===a.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Su),this._resetAdjustments(),this._scrollBar.reset(),V.trigger(this._element,$u)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(V.trigger(this._element,Ih).defaultPrevented)return;const a=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(ms)||(a||(this._element.style.overflowY="hidden"),this._element.classList.add(ms),this._queueCallback(()=>{this._element.classList.remove(ms),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const a=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),x=m>0;if(x&&!a){const R=gt()?"paddingLeft":"paddingRight";this._element.style[R]=`${m}px`}if(!x&&a){const R=gt()?"paddingRight":"paddingLeft";this._element.style[R]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(a,m){return this.each(function(){const x=fn.getOrCreateInstance(this,a);if(typeof a=="string"){if(x[a]===void 0)throw new TypeError(`No method named "${a}"`);x[a](m)}})}}V.on(document,Mh,'[data-bs-toggle="modal"]',function(_){const a=le.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&_.preventDefault(),V.one(a,Eu,x=>{x.defaultPrevented||V.one(a,$u,()=>{Jn(this)&&this.focus()})});const m=le.findOne(".modal.show");m&&fn.getInstance(m).hide(),fn.getOrCreateInstance(a).toggle(this)}),ni(fn),pt(fn);const Xt=".bs.offcanvas",xu=".data-api",zh=`load${Xt}${xu}`,Ou="show",Tu="showing",ku="hiding",Du=".offcanvas.show",Hh=`show${Xt}`,Gh=`shown${Xt}`,Wh=`hide${Xt}`,qu=`hidePrevented${Xt}`,Lu=`hidden${Xt}`,Jh=`resize${Xt}`,Qh=`click${Xt}${xu}`,Xh=`keydown.dismiss${Xt}`,Yh={backdrop:!0,keyboard:!0,scroll:!1},Zh={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class It extends Tt{constructor(a,m){super(a,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Yh}static get DefaultType(){return Zh}static get NAME(){return"offcanvas"}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||V.trigger(this._element,Hh,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ps().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Tu),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ou),this._element.classList.remove(Tu),V.trigger(this._element,Gh,{relatedTarget:a})},this._element,!0))}hide(){this._isShown&&(V.trigger(this._element,Wh).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(ku),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Ou,ku),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ps().reset(),V.trigger(this._element,Lu)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const a=!!this._config.backdrop;return new mu({className:"offcanvas-backdrop",isVisible:a,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:a?()=>{this._config.backdrop!=="static"?this.hide():V.trigger(this._element,qu)}:null})}_initializeFocusTrap(){return new yu({trapElement:this._element})}_addEventListeners(){V.on(this._element,Xh,a=>{a.key==="Escape"&&(this._config.keyboard?this.hide():V.trigger(this._element,qu))})}static jQueryInterface(a){return this.each(function(){const m=It.getOrCreateInstance(this,a);if(typeof a=="string"){if(m[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);m[a](this)}})}}V.on(document,Qh,'[data-bs-toggle="offcanvas"]',function(_){const a=le.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&_.preventDefault(),cn(this))return;V.one(a,Lu,()=>{Jn(this)&&this.focus()});const m=le.findOne(Du);m&&m!==a&&It.getInstance(m).hide(),It.getOrCreateInstance(a).toggle(this)}),V.on(window,zh,()=>{for(const _ of le.find(Du))It.getOrCreateInstance(_).show()}),V.on(window,Jh,()=>{for(const _ of le.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(_).position!=="fixed"&&It.getOrCreateInstance(_).hide()}),ni(It),pt(It);const Pu={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Vh=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ev=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,tv=(_,a)=>{const m=_.nodeName.toLowerCase();return a.includes(m)?!Vh.has(m)||!!ev.test(_.nodeValue):a.filter(x=>x instanceof RegExp).some(x=>x.test(m))},nv={allowList:Pu,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},rv={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},iv={entry:"(string|element|function|null)",selector:"(string|element)"};class sv extends Or{constructor(a){super(),this._config=this._getConfig(a)}static get Default(){return nv}static get DefaultType(){return rv}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(a=>this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(a){return this._checkContent(a),this._config.content={...this._config.content,...a},this}toHtml(){const a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(const[R,B]of Object.entries(this._config.content))this._setContent(a,B,R);const m=a.children[0],x=this._resolvePossibleFunction(this._config.extraClass);return x&&m.classList.add(...x.split(" ")),m}_typeCheckConfig(a){super._typeCheckConfig(a),this._checkContent(a.content)}_checkContent(a){for(const[m,x]of Object.entries(a))super._typeCheckConfig({selector:m,entry:x},iv)}_setContent(a,m,x){const R=le.findOne(x,a);R&&((m=this._resolvePossibleFunction(m))?Jt(m)?this._putElementInTemplate(un(m),R):this._config.html?R.innerHTML=this._maybeSanitize(m):R.textContent=m:R.remove())}_maybeSanitize(a){return this._config.sanitize?function(m,x,R){if(!m.length)return m;if(R&&typeof R=="function")return R(m);const B=new window.DOMParser().parseFromString(m,"text/html"),z=[].concat(...B.body.querySelectorAll("*"));for(const Y of z){const ne=Y.nodeName.toLowerCase();if(!Object.keys(x).includes(ne)){Y.remove();continue}const ae=[].concat(...Y.attributes),oe=[].concat(x["*"]||[],x[ne]||[]);for(const ie of ae)tv(ie,oe)||Y.removeAttribute(ie.nodeName)}return B.body.innerHTML}(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return lt(a,[void 0,this])}_putElementInTemplate(a,m){if(this._config.html)return m.innerHTML="",void m.append(a);m.textContent=a.textContent}}const av=new Set(["sanitize","allowList","sanitizeFn"]),_s="fade",li="show",ov=".tooltip-inner",Iu=".modal",ju="hide.bs.modal",Dr="hover",ys="focus",ws="click",uv={AUTO:"auto",TOP:"top",RIGHT:gt()?"left":"right",BOTTOM:"bottom",LEFT:gt()?"right":"left"},cv={allowList:Pu,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},lv={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Yt extends Tt{constructor(a,m){if(Ko===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(a,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return cv}static get DefaultType(){return lv}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),V.off(this._element.closest(Iu),ju,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const a=V.trigger(this._element,this.constructor.eventName("show")),m=(Go(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(a.defaultPrevented||!m)return;this._disposePopper();const x=this._getTipElement();this._element.setAttribute("aria-describedby",x.getAttribute("id"));const{container:R}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(R.append(x),V.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(x),x.classList.add(li),"ontouchstart"in document.documentElement)for(const B of[].concat(...document.body.children))V.on(B,"mouseover",ti);this._queueCallback(()=>{V.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!V.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(li),"ontouchstart"in document.documentElement)for(const a of[].concat(...document.body.children))V.off(a,"mouseover",ti);this._activeTrigger[ws]=!1,this._activeTrigger[ys]=!1,this._activeTrigger[Dr]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),V.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(a){const m=this._getTemplateFactory(a).toHtml();if(!m)return null;m.classList.remove(_s,li),m.classList.add(`bs-${this.constructor.NAME}-auto`);const x=(R=>{do R+=Math.floor(1e6*Math.random());while(document.getElementById(R));return R})(this.constructor.NAME).toString();return m.setAttribute("id",x),this._isAnimated()&&m.classList.add(_s),m}setContent(a){this._newContent=a,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(a){return this._templateFactory?this._templateFactory.changeContent(a):this._templateFactory=new sv({...this._config,content:a,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[ov]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(a){return this.constructor.getOrCreateInstance(a.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(_s)}_isShown(){return this.tip&&this.tip.classList.contains(li)}_createPopper(a){const m=lt(this._config.placement,[this,a,this._element]),x=uv[m.toUpperCase()];return ns(this._element,a,this._getPopperConfig(x))}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(m=>Number.parseInt(m,10)):typeof a=="function"?m=>a(m,this._element):a}_resolvePossibleFunction(a){return lt(a,[this._element,this._element])}_getPopperConfig(a){const m={placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:x=>{this._getTipElement().setAttribute("data-popper-placement",x.state.placement)}}]};return{...m,...lt(this._config.popperConfig,[void 0,m])}}_setListeners(){const a=this._config.trigger.split(" ");for(const m of a)if(m==="click")V.on(this._element,this.constructor.eventName("click"),this._config.selector,x=>{const R=this._initializeOnDelegatedTarget(x);R._activeTrigger[ws]=!(R._isShown()&&R._activeTrigger[ws]),R.toggle()});else if(m!=="manual"){const x=m===Dr?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),R=m===Dr?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");V.on(this._element,x,this._config.selector,B=>{const z=this._initializeOnDelegatedTarget(B);z._activeTrigger[B.type==="focusin"?ys:Dr]=!0,z._enter()}),V.on(this._element,R,this._config.selector,B=>{const z=this._initializeOnDelegatedTarget(B);z._activeTrigger[B.type==="focusout"?ys:Dr]=z._element.contains(B.relatedTarget),z._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},V.on(this._element.closest(Iu),ju,this._hideModalHandler)}_fixTitle(){const a=this._element.getAttribute("title");a&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",a),this._element.setAttribute("data-bs-original-title",a),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(a,m){clearTimeout(this._timeout),this._timeout=setTimeout(a,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(a){const m=Qt.getDataAttributes(this._element);for(const x of Object.keys(m))av.has(x)&&delete m[x];return a={...m,...typeof a=="object"&&a?a:{}},a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a.container=a.container===!1?document.body:un(a.container),typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),typeof a.title=="number"&&(a.title=a.title.toString()),typeof a.content=="number"&&(a.content=a.content.toString()),a}_getDelegateConfig(){const a={};for(const[m,x]of Object.entries(this._config))this.constructor.Default[m]!==x&&(a[m]=x);return a.selector=!1,a.trigger="manual",a}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(a){return this.each(function(){const m=Yt.getOrCreateInstance(this,a);if(typeof a=="string"){if(m[a]===void 0)throw new TypeError(`No method named "${a}"`);m[a]()}})}}pt(Yt);const fv=".popover-header",dv=".popover-body",hv={...Yt.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},vv={...Yt.DefaultType,content:"(null|string|element|function)"};class nr extends Yt{static get Default(){return hv}static get DefaultType(){return vv}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[fv]:this._getTitle(),[dv]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(a){return this.each(function(){const m=nr.getOrCreateInstance(this,a);if(typeof a=="string"){if(m[a]===void 0)throw new TypeError(`No method named "${a}"`);m[a]()}})}}pt(nr);const bs=".bs.scrollspy",gv=`activate${bs}`,Ru=`click${bs}`,pv=`load${bs}.data-api`,rr="active",As="[href]",Bu=".nav-link",mv=`${Bu}, .nav-item > ${Bu}, .list-group-item`,_v={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},yv={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ir extends Tt{constructor(a,m){super(a,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return _v}static get DefaultType(){return yv}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const a of this._observableSections.values())this._observer.observe(a)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(a){return a.target=un(a.target)||document.body,a.rootMargin=a.offset?`${a.offset}px 0px -30%`:a.rootMargin,typeof a.threshold=="string"&&(a.threshold=a.threshold.split(",").map(m=>Number.parseFloat(m))),a}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(V.off(this._config.target,Ru),V.on(this._config.target,Ru,As,a=>{const m=this._observableSections.get(a.target.hash);if(m){a.preventDefault();const x=this._rootElement||window,R=m.offsetTop-this._element.offsetTop;if(x.scrollTo)return void x.scrollTo({top:R,behavior:"smooth"});x.scrollTop=R}}))}_getNewObserver(){const a={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),a)}_observerCallback(a){const m=z=>this._targetLinks.get(`#${z.target.id}`),x=z=>{this._previousScrollData.visibleEntryTop=z.target.offsetTop,this._process(m(z))},R=(this._rootElement||document.documentElement).scrollTop,B=R>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=R;for(const z of a){if(!z.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(z));continue}const Y=z.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(B&&Y){if(x(z),!R)return}else B||Y||x(z)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const a=le.find(As,this._config.target);for(const m of a){if(!m.hash||cn(m))continue;const x=le.findOne(decodeURI(m.hash),this._element);Jn(x)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,x))}}_process(a){this._activeTarget!==a&&(this._clearActiveClass(this._config.target),this._activeTarget=a,a.classList.add(rr),this._activateParents(a),V.trigger(this._element,gv,{relatedTarget:a}))}_activateParents(a){if(a.classList.contains("dropdown-item"))le.findOne(".dropdown-toggle",a.closest(".dropdown")).classList.add(rr);else for(const m of le.parents(a,".nav, .list-group"))for(const x of le.prev(m,mv))x.classList.add(rr)}_clearActiveClass(a){a.classList.remove(rr);const m=le.find(`${As}.${rr}`,a);for(const x of m)x.classList.remove(rr)}static jQueryInterface(a){return this.each(function(){const m=ir.getOrCreateInstance(this,a);if(typeof a=="string"){if(m[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);m[a]()}})}}V.on(window,pv,()=>{for(const _ of le.find('[data-bs-spy="scroll"]'))ir.getOrCreateInstance(_)}),pt(ir);const wn=".bs.tab",wv=`hide${wn}`,bv=`hidden${wn}`,Av=`show${wn}`,$v=`shown${wn}`,Ev=`click${wn}`,Sv=`keydown${wn}`,Cv=`load${wn}`,xv="ArrowLeft",Nu="ArrowRight",Ov="ArrowUp",Fu="ArrowDown",$s="Home",Mu="End",bn="active",Uu="fade",Es="show",Ku=".dropdown-toggle",Ss=`:not(${Ku})`,zu='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Cs=`.nav-link${Ss}, .list-group-item${Ss}, [role="tab"]${Ss}, ${zu}`,Tv=`.${bn}[data-bs-toggle="tab"], .${bn}[data-bs-toggle="pill"], .${bn}[data-bs-toggle="list"]`;class Zt extends Tt{constructor(a){super(a),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),V.on(this._element,Sv,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const a=this._element;if(this._elemIsActive(a))return;const m=this._getActiveElem(),x=m?V.trigger(m,wv,{relatedTarget:a}):null;V.trigger(a,Av,{relatedTarget:m}).defaultPrevented||x&&x.defaultPrevented||(this._deactivate(m,a),this._activate(a,m))}_activate(a,m){a&&(a.classList.add(bn),this._activate(le.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.removeAttribute("tabindex"),a.setAttribute("aria-selected",!0),this._toggleDropDown(a,!0),V.trigger(a,$v,{relatedTarget:m})):a.classList.add(Es)},a,a.classList.contains(Uu)))}_deactivate(a,m){a&&(a.classList.remove(bn),a.blur(),this._deactivate(le.getElementFromSelector(a)),this._queueCallback(()=>{a.getAttribute("role")==="tab"?(a.setAttribute("aria-selected",!1),a.setAttribute("tabindex","-1"),this._toggleDropDown(a,!1),V.trigger(a,bv,{relatedTarget:m})):a.classList.remove(Es)},a,a.classList.contains(Uu)))}_keydown(a){if(![xv,Nu,Ov,Fu,$s,Mu].includes(a.key))return;a.stopPropagation(),a.preventDefault();const m=this._getChildren().filter(R=>!cn(R));let x;if([$s,Mu].includes(a.key))x=m[a.key===$s?0:m.length-1];else{const R=[Nu,Fu].includes(a.key);x=as(m,a.target,R,!0)}x&&(x.focus({preventScroll:!0}),Zt.getOrCreateInstance(x).show())}_getChildren(){return le.find(Cs,this._parent)}_getActiveElem(){return this._getChildren().find(a=>this._elemIsActive(a))||null}_setInitialAttributes(a,m){this._setAttributeIfNotExists(a,"role","tablist");for(const x of m)this._setInitialAttributesOnChild(x)}_setInitialAttributesOnChild(a){a=this._getInnerElement(a);const m=this._elemIsActive(a),x=this._getOuterElement(a);a.setAttribute("aria-selected",m),x!==a&&this._setAttributeIfNotExists(x,"role","presentation"),m||a.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(a,"role","tab"),this._setInitialAttributesOnTargetPanel(a)}_setInitialAttributesOnTargetPanel(a){const m=le.getElementFromSelector(a);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),a.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${a.id}`))}_toggleDropDown(a,m){const x=this._getOuterElement(a);if(!x.classList.contains("dropdown"))return;const R=(B,z)=>{const Y=le.findOne(B,x);Y&&Y.classList.toggle(z,m)};R(Ku,bn),R(".dropdown-menu",Es),x.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(a,m,x){a.hasAttribute(m)||a.setAttribute(m,x)}_elemIsActive(a){return a.classList.contains(bn)}_getInnerElement(a){return a.matches(Cs)?a:le.findOne(Cs,a)}_getOuterElement(a){return a.closest(".nav-item, .list-group-item")||a}static jQueryInterface(a){return this.each(function(){const m=Zt.getOrCreateInstance(this);if(typeof a=="string"){if(m[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);m[a]()}})}}V.on(document,Ev,zu,function(_){["A","AREA"].includes(this.tagName)&&_.preventDefault(),cn(this)||Zt.getOrCreateInstance(this).show()}),V.on(window,Cv,()=>{for(const _ of le.find(Tv))Zt.getOrCreateInstance(_)}),pt(Zt);const dn=".bs.toast",kv=`mouseover${dn}`,Dv=`mouseout${dn}`,qv=`focusin${dn}`,Lv=`focusout${dn}`,Pv=`hide${dn}`,Iv=`hidden${dn}`,jv=`show${dn}`,Rv=`shown${dn}`,Hu="hide",fi="show",di="showing",Bv={animation:"boolean",autohide:"boolean",delay:"number"},Nv={animation:!0,autohide:!0,delay:5e3};class An extends Tt{constructor(a,m){super(a,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Nv}static get DefaultType(){return Bv}static get NAME(){return"toast"}show(){V.trigger(this._element,jv).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Hu),xr(this._element),this._element.classList.add(fi,di),this._queueCallback(()=>{this._element.classList.remove(di),V.trigger(this._element,Rv),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(V.trigger(this._element,Pv).defaultPrevented||(this._element.classList.add(di),this._queueCallback(()=>{this._element.classList.add(Hu),this._element.classList.remove(di,fi),V.trigger(this._element,Iv)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(fi),super.dispose()}isShown(){return this._element.classList.contains(fi)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(a,m){switch(a.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const x=a.relatedTarget;this._element===x||this._element.contains(x)||this._maybeScheduleHide()}_setListeners(){V.on(this._element,kv,a=>this._onInteraction(a,!0)),V.on(this._element,Dv,a=>this._onInteraction(a,!1)),V.on(this._element,qv,a=>this._onInteraction(a,!0)),V.on(this._element,Lv,a=>this._onInteraction(a,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(a){return this.each(function(){const m=An.getOrCreateInstance(this,a);if(typeof a=="string"){if(m[a]===void 0)throw new TypeError(`No method named "${a}"`);m[a](this)}})}}ni(An),pt(An);const Fv=Object.freeze(Object.defineProperty({__proto__:null,Alert:Qn,Button:Xn,Carousel:pn,Collapse:mn,Dropdown:ht,Modal:fn,Offcanvas:It,Popover:nr,ScrollSpy:ir,Tab:Zt,Toast:An,Tooltip:Yt},Symbol.toStringTag,{value:"Module"}));[].slice.call(document.querySelectorAll('[data-bs-toggle="dropdown"]')).map(function(_){let a={boundary:_.getAttribute("data-bs-boundary")==="viewport"?document.querySelector(".btn"):"clippingParents"};return new ht(_,a)}),[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map(function(_){let a={delay:{show:50,hide:50},html:_.getAttribute("data-bs-html")==="true",placement:_.getAttribute("data-bs-placement")??"auto"};return new Yt(_,a)}),[].slice.call(document.querySelectorAll('[data-bs-toggle="popover"]')).map(function(_){let a={delay:{show:50,hide:50},html:_.getAttribute("data-bs-html")==="true",placement:_.getAttribute("data-bs-placement")??"auto"};return new nr(_,a)}),[].slice.call(document.querySelectorAll('[data-bs-toggle="switch-icon"]')).map(function(_){_.addEventListener("click",a=>{a.stopPropagation(),_.classList.toggle("active")})}),(()=>{const _=window.location.hash;_&&[].slice.call(document.querySelectorAll('[data-bs-toggle="tab"]')).filter(a=>a.hash===_).map(a=>{new Zt(a).show()})})(),[].slice.call(document.querySelectorAll('[data-bs-toggle="toast"]')).map(function(_){if(!_.hasAttribute("data-bs-target"))return;const a=new An(_.getAttribute("data-bs-target"));_.addEventListener("click",()=>{a.show()})});const Gu="tblr-",Wu=(_,a)=>{const m=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(_);return m?`rgba(${parseInt(m[1],16)}, ${parseInt(m[2],16)}, ${parseInt(m[3],16)}, ${a})`:null},Mv=Object.freeze(Object.defineProperty({__proto__:null,getColor:(_,a=1)=>{const m=getComputedStyle(document.body).getPropertyValue(`--${Gu}${_}`).trim();return a!==1?Wu(m,a):m},hexToRgba:Wu,prefix:Gu},Symbol.toStringTag,{value:"Module"}));n.Alert=Qn,n.Button=Xn,n.Carousel=pn,n.Collapse=mn,n.Dropdown=ht,n.Modal=fn,n.Offcanvas=It,n.Popover=nr,n.ScrollSpy=ir,n.Tab=Zt,n.Toast=An,n.Tooltip=Yt,n.bootstrap=Fv,n.tabler=Mv,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})})(ac,ac.exports);var ml={exports:{}};(function(t){var e=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var i=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,s=0,o={},f={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function l(u){return u instanceof g?new g(u.type,l(u.content),u.alias):Array.isArray(u)?u.map(l):u.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(l){return Object.prototype.toString.call(l).slice(8,-1)},objId:function(l){return l.__id||Object.defineProperty(l,"__id",{value:++s}),l.__id},clone:function l(u,c){c=c||{};var d,v;switch(f.util.type(u)){case"Object":if(v=f.util.objId(u),c[v])return c[v];d={},c[v]=d;for(var D in u)u.hasOwnProperty(D)&&(d[D]=l(u[D],c));return d;case"Array":return v=f.util.objId(u),c[v]?c[v]:(d=[],c[v]=d,u.forEach(function(I,k){d[k]=l(I,c)}),d);default:return u}},getLanguage:function(l){for(;l;){var u=i.exec(l.className);if(u)return u[1].toLowerCase();l=l.parentElement}return"none"},setLanguage:function(l,u){l.className=l.className.replace(RegExp(i,"gi"),""),l.classList.add("language-"+u)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(d){var l=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(d.stack)||[])[1];if(l){var u=document.getElementsByTagName("script");for(var c in u)if(u[c].src==l)return u[c]}return null}},isActive:function(l,u,c){for(var d="no-"+u;l;){var v=l.classList;if(v.contains(u))return!0;if(v.contains(d))return!1;l=l.parentElement}return!!c}},languages:{plain:o,plaintext:o,text:o,txt:o,extend:function(l,u){var c=f.util.clone(f.languages[l]);for(var d in u)c[d]=u[d];return c},insertBefore:function(l,u,c,d){d=d||f.languages;var v=d[l],D={};for(var I in v)if(v.hasOwnProperty(I)){if(I==u)for(var k in c)c.hasOwnProperty(k)&&(D[k]=c[k]);c.hasOwnProperty(I)||(D[I]=v[I])}var M=d[l];return d[l]=D,f.languages.DFS(f.languages,function(U,ee){ee===M&&U!=l&&(this[U]=D)}),D},DFS:function l(u,c,d,v){v=v||{};var D=f.util.objId;for(var I in u)if(u.hasOwnProperty(I)){c.call(u,I,u[I],d||I);var k=u[I],M=f.util.type(k);M==="Object"&&!v[D(k)]?(v[D(k)]=!0,l(k,c,null,v)):M==="Array"&&!v[D(k)]&&(v[D(k)]=!0,l(k,c,I,v))}}},plugins:{},highlightAll:function(l,u){f.highlightAllUnder(document,l,u)},highlightAllUnder:function(l,u,c){var d={callback:c,container:l,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};f.hooks.run("before-highlightall",d),d.elements=Array.prototype.slice.apply(d.container.querySelectorAll(d.selector)),f.hooks.run("before-all-elements-highlight",d);for(var v=0,D;D=d.elements[v++];)f.highlightElement(D,u===!0,d.callback)},highlightElement:function(l,u,c){var d=f.util.getLanguage(l),v=f.languages[d];f.util.setLanguage(l,d);var D=l.parentElement;D&&D.nodeName.toLowerCase()==="pre"&&f.util.setLanguage(D,d);var I=l.textContent,k={element:l,language:d,grammar:v,code:I};function M(ee){k.highlightedCode=ee,f.hooks.run("before-insert",k),k.element.innerHTML=k.highlightedCode,f.hooks.run("after-highlight",k),f.hooks.run("complete",k),c&&c.call(k.element)}if(f.hooks.run("before-sanity-check",k),D=k.element.parentElement,D&&D.nodeName.toLowerCase()==="pre"&&!D.hasAttribute("tabindex")&&D.setAttribute("tabindex","0"),!k.code){f.hooks.run("complete",k),c&&c.call(k.element);return}if(f.hooks.run("before-highlight",k),!k.grammar){M(f.util.encode(k.code));return}if(u&&r.Worker){var U=new Worker(f.filename);U.onmessage=function(ee){M(ee.data)},U.postMessage(JSON.stringify({language:k.language,code:k.code,immediateClose:!0}))}else M(f.highlight(k.code,k.grammar,k.language))},highlight:function(l,u,c){var d={code:l,grammar:u,language:c};if(f.hooks.run("before-tokenize",d),!d.grammar)throw new Error('The language "'+d.language+'" has no grammar.');return d.tokens=f.tokenize(d.code,d.grammar),f.hooks.run("after-tokenize",d),g.stringify(f.util.encode(d.tokens),d.language)},tokenize:function(l,u){var c=u.rest;if(c){for(var d in c)u[d]=c[d];delete u.rest}var v=new h;return y(v,v.head,l),A(l,v,u,v.head,0),S(v)},hooks:{all:{},add:function(l,u){var c=f.hooks.all;c[l]=c[l]||[],c[l].push(u)},run:function(l,u){var c=f.hooks.all[l];if(!(!c||!c.length))for(var d=0,v;v=c[d++];)v(u)}},Token:g};r.Prism=f;function g(l,u,c,d){this.type=l,this.content=u,this.alias=c,this.length=(d||"").length|0}g.stringify=function l(u,c){if(typeof u=="string")return u;if(Array.isArray(u)){var d="";return u.forEach(function(M){d+=l(M,c)}),d}var v={type:u.type,content:l(u.content,c),tag:"span",classes:["token",u.type],attributes:{},language:c},D=u.alias;D&&(Array.isArray(D)?Array.prototype.push.apply(v.classes,D):v.classes.push(D)),f.hooks.run("wrap",v);var I="";for(var k in v.attributes)I+=" "+k+'="'+(v.attributes[k]||"").replace(/"/g,"&quot;")+'"';return"<"+v.tag+' class="'+v.classes.join(" ")+'"'+I+">"+v.content+"</"+v.tag+">"};function w(l,u,c,d){l.lastIndex=u;var v=l.exec(c);if(v&&d&&v[1]){var D=v[1].length;v.index+=D,v[0]=v[0].slice(D)}return v}function A(l,u,c,d,v,D){for(var I in c)if(!(!c.hasOwnProperty(I)||!c[I])){var k=c[I];k=Array.isArray(k)?k:[k];for(var M=0;M<k.length;++M){if(D&&D.cause==I+","+M)return;var U=k[M],ee=U.inside,X=!!U.lookbehind,H=!!U.greedy,Z=U.alias;if(H&&!U.pattern.global){var Q=U.pattern.toString().match(/[imsuy]*$/)[0];U.pattern=RegExp(U.pattern.source,Q+"g")}for(var te=U.pattern||U,$=d.next,C=v;$!==u.tail&&!(D&&C>=D.reach);C+=$.value.length,$=$.next){var P=$.value;if(u.length>l.length)return;if(!(P instanceof g)){var q=1,j;if(H){if(j=w(te,C,l,X),!j||j.index>=l.length)break;var T=j.index,K=j.index+j[0].length,J=C;for(J+=$.value.length;T>=J;)$=$.next,J+=$.value.length;if(J-=$.value.length,C=J,$.value instanceof g)continue;for(var F=$;F!==u.tail&&(J<K||typeof F.value=="string");F=F.next)q++,J+=F.value.length;q--,P=l.slice(C,J),j.index-=C}else if(j=w(te,0,P,X),!j)continue;var T=j.index,L=j[0],N=P.slice(0,T),G=P.slice(T+L.length),W=C+P.length;D&&W>D.reach&&(D.reach=W);var se=$.prev;N&&(se=y(u,se,N),C+=N.length),E(u,se,q);var ce=new g(I,ee?f.tokenize(L,ee):L,Z,L);if($=y(u,se,ce),G&&y(u,$,G),q>1){var de={cause:I+","+M,reach:W};A(l,u,c,$.prev,C,de),D&&de.reach>D.reach&&(D.reach=de.reach)}}}}}}function h(){var l={value:null,prev:null,next:null},u={value:null,prev:l,next:null};l.next=u,this.head=l,this.tail=u,this.length=0}function y(l,u,c){var d=u.next,v={value:c,prev:u,next:d};return u.next=v,d.prev=v,l.length++,v}function E(l,u,c){for(var d=u.next,v=0;v<c&&d!==l.tail;v++)d=d.next;u.next=d,d.prev=u,l.length-=v}function S(l){for(var u=[],c=l.head.next;c!==l.tail;)u.push(c.value),c=c.next;return u}if(!r.document)return r.addEventListener&&(f.disableWorkerMessageHandler||r.addEventListener("message",function(l){var u=JSON.parse(l.data),c=u.language,d=u.code,v=u.immediateClose;r.postMessage(f.highlight(d,f.languages[c],c)),v&&r.close()},!1)),f;var O=f.util.currentScript();O&&(f.filename=O.src,O.hasAttribute("data-manual")&&(f.manual=!0));function b(){f.manual||f.highlightAll()}if(!f.manual){var p=document.readyState;p==="loading"||p==="interactive"&&O&&O.defer?document.addEventListener("DOMContentLoaded",b):window.requestAnimationFrame?window.requestAnimationFrame(b):window.setTimeout(b,16)}return f}(e);t.exports&&(t.exports=n),typeof globalThis<"u"&&(globalThis.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(i,s){var o={};o["language-"+s]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[s]},o.cdata=/^<!\[CDATA\[|\]\]>$/i;var f={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:o}};f["language-"+s]={pattern:/[\s\S]+/,inside:n.languages[s]};var g={};g[i]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return i}),"i"),lookbehind:!0,greedy:!0,inside:f},n.languages.insertBefore("markup","cdata",g)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,i){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[i,"language-"+i],inside:n.languages[i]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var i=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+i.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+i.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+i.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+i.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:i,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var s=r.languages.markup;s&&(s.tag.addInlined("style","css"),s.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loadingâ€¦",i=function(O,b){return"âœ– Error "+O+" while fetching file: "+b},s="âœ– Error: File does not exist or is empty",o={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},f="data-src-status",g="loading",w="loaded",A="failed",h="pre[data-src]:not(["+f+'="'+w+'"]):not(['+f+'="'+g+'"])';function y(O,b,p){var l=new XMLHttpRequest;l.open("GET",O,!0),l.onreadystatechange=function(){l.readyState==4&&(l.status<400&&l.responseText?b(l.responseText):l.status>=400?p(i(l.status,l.statusText)):p(s))},l.send(null)}function E(O){var b=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(O||"");if(b){var p=Number(b[1]),l=b[2],u=b[3];return l?u?[p,Number(u)]:[p,void 0]:[p,p]}}n.hooks.add("before-highlightall",function(O){O.selector+=", "+h}),n.hooks.add("before-sanity-check",function(O){var b=O.element;if(b.matches(h)){O.code="",b.setAttribute(f,g);var p=b.appendChild(document.createElement("CODE"));p.textContent=r;var l=b.getAttribute("data-src"),u=O.language;if(u==="none"){var c=(/\.(\w+)$/.exec(l)||[,"none"])[1];u=o[c]||c}n.util.setLanguage(p,u),n.util.setLanguage(b,u);var d=n.plugins.autoloader;d&&d.loadLanguages(u),y(l,function(v){b.setAttribute(f,w);var D=E(b.getAttribute("data-range"));if(D){var I=v.split(/\r\n?|\n/g),k=D[0],M=D[1]==null?I.length:D[1];k<0&&(k+=I.length),k=Math.max(0,Math.min(k-1,I.length)),M<0&&(M+=I.length),M=Math.max(0,Math.min(M,I.length)),v=I.slice(k,M).join(`
`),b.hasAttribute("data-start")||b.setAttribute("data-start",String(k+1))}p.textContent=v,n.highlightElement(p)},function(v){b.setAttribute(f,A),p.textContent=v})}}),n.plugins.fileHighlight={highlight:function(b){for(var p=(b||document).querySelectorAll(h),l=0,u;u=p[l++];)n.highlightElement(u)}};var S=!1;n.fileHighlight=function(){S||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),S=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()})(ml);var eg=ml.exports;const tg=Gn(eg);(function(t){t.languages.typescript=t.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),t.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete t.languages.typescript.parameter,delete t.languages.typescript["literal-property"];var e=t.languages.extend("typescript",{});delete e["class-name"],t.languages.typescript["class-name"].inside=e,t.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e}}}}),t.languages.ts=t.languages.typescript})(Prism);const ng={},rg=Object.freeze(Object.defineProperty({__proto__:null,default:ng},Symbol.toStringTag,{value:"Module"})),_l=Vv(rg);var Ma={};Ma.test=function(){return typeof globalThis.queueMicrotask=="function"};Ma.install=function(t){return function(){globalThis.queueMicrotask(t)}};var Ua={},yl=globalThis.MutationObserver||globalThis.WebKitMutationObserver;Ua.test=function(){return yl};Ua.install=function(t){var e=0,n=new yl(t),r=globalThis.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=e=++e%2}};var Ka={};Ka.test=function(){return globalThis.setImmediate?!1:typeof globalThis.MessageChannel<"u"};Ka.install=function(t){var e=new globalThis.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}};var za={};za.test=function(){return"document"in globalThis&&"onreadystatechange"in globalThis.document.createElement("script")};za.install=function(t){return function(){var e=globalThis.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},globalThis.document.documentElement.appendChild(e),t}};var Ha={};Ha.test=function(){return!0};Ha.install=function(t){return function(){setTimeout(t,0)}};var Rr=[_l,Ma,Ua,Ka,za,Ha],lr,Tn,Br=-1,vn=[],Zs=!1;function ig(){!lr||!Tn||(lr=!1,Tn.length?vn=Tn.concat(vn):Br=-1,vn.length&&wl())}function wl(){if(!lr){Zs=!1,lr=!0;for(var t=vn.length,e=setTimeout(ig);t;){for(Tn=vn,vn=[];Tn&&++Br<t;)Tn[Br].run();Br=-1,t=vn.length}Tn=null,Br=-1,lr=!1,clearTimeout(e)}}var bl,qr=-1,sg=Rr.length;for(;++qr<sg;)if(Rr[qr]&&Rr[qr].test&&Rr[qr].test()){bl=Rr[qr].install(wl);break}function Al(t,e){this.fun=t,this.array=e}Al.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}};var ag=og;function og(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];vn.push(new Al(t,e)),!Zs&&!lr&&(Zs=!0,bl())}const Gt=Gn(ag);var $l={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(p,l){var u=p[0],c=p[1],d=p[2],v=p[3];u+=(c&d|~c&v)+l[0]-680876936|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[1]-389564586|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[2]+606105819|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[3]-1044525330|0,c=(c<<22|c>>>10)+d|0,u+=(c&d|~c&v)+l[4]-176418897|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[5]+1200080426|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[6]-1473231341|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[7]-45705983|0,c=(c<<22|c>>>10)+d|0,u+=(c&d|~c&v)+l[8]+1770035416|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[9]-1958414417|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[10]-42063|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[11]-1990404162|0,c=(c<<22|c>>>10)+d|0,u+=(c&d|~c&v)+l[12]+1804603682|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[13]-40341101|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[14]-1502002290|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[15]+1236535329|0,c=(c<<22|c>>>10)+d|0,u+=(c&v|d&~v)+l[1]-165796510|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[6]-1069501632|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[11]+643717713|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[0]-373897302|0,c=(c<<20|c>>>12)+d|0,u+=(c&v|d&~v)+l[5]-701558691|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[10]+38016083|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[15]-660478335|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[4]-405537848|0,c=(c<<20|c>>>12)+d|0,u+=(c&v|d&~v)+l[9]+568446438|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[14]-1019803690|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[3]-187363961|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[8]+1163531501|0,c=(c<<20|c>>>12)+d|0,u+=(c&v|d&~v)+l[13]-1444681467|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[2]-51403784|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[7]+1735328473|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[12]-1926607734|0,c=(c<<20|c>>>12)+d|0,u+=(c^d^v)+l[5]-378558|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[8]-2022574463|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[11]+1839030562|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[14]-35309556|0,c=(c<<23|c>>>9)+d|0,u+=(c^d^v)+l[1]-1530992060|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[4]+1272893353|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[7]-155497632|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[10]-1094730640|0,c=(c<<23|c>>>9)+d|0,u+=(c^d^v)+l[13]+681279174|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[0]-358537222|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[3]-722521979|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[6]+76029189|0,c=(c<<23|c>>>9)+d|0,u+=(c^d^v)+l[9]-640364487|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[12]-421815835|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[15]+530742520|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[2]-995338651|0,c=(c<<23|c>>>9)+d|0,u+=(d^(c|~v))+l[0]-198630844|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[7]+1126891415|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[14]-1416354905|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[5]-57434055|0,c=(c<<21|c>>>11)+d|0,u+=(d^(c|~v))+l[12]+1700485571|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[3]-1894986606|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[10]-1051523|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[1]-2054922799|0,c=(c<<21|c>>>11)+d|0,u+=(d^(c|~v))+l[8]+1873313359|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[15]-30611744|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[6]-1560198380|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[13]+1309151649|0,c=(c<<21|c>>>11)+d|0,u+=(d^(c|~v))+l[4]-145523070|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[11]-1120210379|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[2]+718787259|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[9]-343485551|0,c=(c<<21|c>>>11)+d|0,p[0]=u+p[0]|0,p[1]=c+p[1]|0,p[2]=d+p[2]|0,p[3]=v+p[3]|0}function s(p){var l=[],u;for(u=0;u<64;u+=4)l[u>>2]=p.charCodeAt(u)+(p.charCodeAt(u+1)<<8)+(p.charCodeAt(u+2)<<16)+(p.charCodeAt(u+3)<<24);return l}function o(p){var l=[],u;for(u=0;u<64;u+=4)l[u>>2]=p[u]+(p[u+1]<<8)+(p[u+2]<<16)+(p[u+3]<<24);return l}function f(p){var l=p.length,u=[1732584193,-271733879,-1732584194,271733878],c,d,v,D,I,k;for(c=64;c<=l;c+=64)i(u,s(p.substring(c-64,c)));for(p=p.substring(c-64),d=p.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<d;c+=1)v[c>>2]|=p.charCodeAt(c)<<(c%4<<3);if(v[c>>2]|=128<<(c%4<<3),c>55)for(i(u,v),c=0;c<16;c+=1)v[c]=0;return D=l*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),I=parseInt(D[2],16),k=parseInt(D[1],16)||0,v[14]=I,v[15]=k,i(u,v),u}function g(p){var l=p.length,u=[1732584193,-271733879,-1732584194,271733878],c,d,v,D,I,k;for(c=64;c<=l;c+=64)i(u,o(p.subarray(c-64,c)));for(p=c-64<l?p.subarray(c-64):new Uint8Array(0),d=p.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<d;c+=1)v[c>>2]|=p[c]<<(c%4<<3);if(v[c>>2]|=128<<(c%4<<3),c>55)for(i(u,v),c=0;c<16;c+=1)v[c]=0;return D=l*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),I=parseInt(D[2],16),k=parseInt(D[1],16)||0,v[14]=I,v[15]=k,i(u,v),u}function w(p){var l="",u;for(u=0;u<4;u+=1)l+=r[p>>u*8+4&15]+r[p>>u*8&15];return l}function A(p){var l;for(l=0;l<p.length;l+=1)p[l]=w(p[l]);return p.join("")}A(f("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function p(l,u){return l=l|0||0,l<0?Math.max(l+u,0):Math.min(l,u)}ArrayBuffer.prototype.slice=function(l,u){var c=this.byteLength,d=p(l,c),v=c,D,I,k,M;return u!==n&&(v=p(u,c)),d>v?new ArrayBuffer(0):(D=v-d,I=new ArrayBuffer(D),k=new Uint8Array(I),M=new Uint8Array(this,d,D),k.set(M),I)}}();function h(p){return/[\u0080-\uFFFF]/.test(p)&&(p=unescape(encodeURIComponent(p))),p}function y(p,l){var u=p.length,c=new ArrayBuffer(u),d=new Uint8Array(c),v;for(v=0;v<u;v+=1)d[v]=p.charCodeAt(v);return l?d:c}function E(p){return String.fromCharCode.apply(null,new Uint8Array(p))}function S(p,l,u){var c=new Uint8Array(p.byteLength+l.byteLength);return c.set(new Uint8Array(p)),c.set(new Uint8Array(l),p.byteLength),c}function O(p){var l=[],u=p.length,c;for(c=0;c<u-1;c+=2)l.push(parseInt(p.substr(c,2),16));return String.fromCharCode.apply(String,l)}function b(){this.reset()}return b.prototype.append=function(p){return this.appendBinary(h(p)),this},b.prototype.appendBinary=function(p){this._buff+=p,this._length+=p.length;var l=this._buff.length,u;for(u=64;u<=l;u+=64)i(this._hash,s(this._buff.substring(u-64,u)));return this._buff=this._buff.substring(u-64),this},b.prototype.end=function(p){var l=this._buff,u=l.length,c,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v;for(c=0;c<u;c+=1)d[c>>2]|=l.charCodeAt(c)<<(c%4<<3);return this._finish(d,u),v=A(this._hash),p&&(v=O(v)),this.reset(),v},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(p){return this._buff=p.buff,this._length=p.length,this._hash=p.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(p,l){var u=l,c,d,v;if(p[u>>2]|=128<<(u%4<<3),u>55)for(i(this._hash,p),u=0;u<16;u+=1)p[u]=0;c=this._length*8,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),v=parseInt(c[1],16)||0,p[14]=d,p[15]=v,i(this._hash,p)},b.hash=function(p,l){return b.hashBinary(h(p),l)},b.hashBinary=function(p,l){var u=f(p),c=A(u);return l?O(c):c},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(p){var l=S(this._buff.buffer,p),u=l.length,c;for(this._length+=p.byteLength,c=64;c<=u;c+=64)i(this._hash,o(l.subarray(c-64,c)));return this._buff=c-64<u?new Uint8Array(l.buffer.slice(c-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(p){var l=this._buff,u=l.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d,v;for(d=0;d<u;d+=1)c[d>>2]|=l[d]<<(d%4<<3);return this._finish(c,u),v=A(this._hash),p&&(v=O(v)),this.reset(),v},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var p=b.prototype.getState.call(this);return p.buff=E(p.buff),p},b.ArrayBuffer.prototype.setState=function(p){return p.buff=y(p.buff,!0),b.prototype.setState.call(this,p)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(p,l){var u=g(new Uint8Array(p)),c=A(u);return l?O(c):c},b})})($l);var ug=$l.exports;const Vs=Gn(ug);var pi,cg=new Uint8Array(16);function lg(){if(!pi&&(pi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!pi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return pi(cg)}const fg=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function dg(t){return typeof t=="string"&&fg.test(t)}var et=[];for(var ks=0;ks<256;++ks)et.push((ks+256).toString(16).substr(1));function hg(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(et[t[e+0]]+et[t[e+1]]+et[t[e+2]]+et[t[e+3]]+"-"+et[t[e+4]]+et[t[e+5]]+"-"+et[t[e+6]]+et[t[e+7]]+"-"+et[t[e+8]]+et[t[e+9]]+"-"+et[t[e+10]]+et[t[e+11]]+et[t[e+12]]+et[t[e+13]]+et[t[e+14]]+et[t[e+15]]).toLowerCase();if(!dg(n))throw TypeError("Stringified UUID is invalid");return n}function Ga(t,e,n){t=t||{};var r=t.random||(t.rng||lg)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return hg(r)}var Bi={};Bi.stringify=function(e){var n=[];n.push({obj:e});for(var r="",i,s,o,f,g,w,A,h,y,E,S;i=n.pop();)if(s=i.obj,o=i.prefix||"",f=i.val||"",r+=o,f)r+=f;else if(typeof s!="object")r+=typeof s>"u"?null:JSON.stringify(s);else if(s===null)r+="null";else if(Array.isArray(s)){for(n.push({val:"]"}),g=s.length-1;g>=0;g--)w=g===0?"":",",n.push({obj:s[g],prefix:w});n.push({val:"["})}else{A=[];for(h in s)s.hasOwnProperty(h)&&A.push(h);for(n.push({val:"}"}),g=A.length-1;g>=0;g--)y=A[g],E=s[y],S=g>0?",":"",S+=JSON.stringify(y)+":",n.push({obj:E,prefix:S});n.push({val:"{"})}return r};function ar(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,s=r.index;if(Array.isArray(i))i.push(t);else if(s===e.length-2){var o=e.pop();i[o]=t}else e.push(t)}Bi.parse=function(t){for(var e=[],n=[],r=0,i,s,o,f,g,w,A,h,y;;){if(i=t[r++],i==="}"||i==="]"||typeof i>"u"){if(e.length===1)return e.pop();ar(e.pop(),e,n);continue}switch(i){case" ":case"	":case`
`:case":":case",":break;case"n":r+=3,ar(null,e,n);break;case"t":r+=3,ar(!0,e,n);break;case"f":r+=4,ar(!1,e,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(s="",r--;;)if(o=t[r++],/[\d\.\-e\+]/.test(o))s+=o;else{r--;break}ar(parseFloat(s),e,n);break;case'"':for(f="",g=void 0,w=0;A=t[r++],A!=='"'||g==="\\"&&w%2===1;)f+=A,g=A,g==="\\"?w++:w=0;ar(JSON.parse('"'+f+'"'),e,n);break;case"[":h={element:[],index:e.length},e.push(h.element),n.push(h);break;case"{":y={element:{},index:e.length},e.push(y.element),n.push(y);break;default:throw new Error("unexpectedly reached end of input: "+i)}}};var Wa={exports:{}},fr=typeof Reflect=="object"?Reflect:null,oc=fr&&typeof fr.apply=="function"?fr.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Ai;fr&&typeof fr.ownKeys=="function"?Ai=fr.ownKeys:Object.getOwnPropertySymbols?Ai=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ai=function(e){return Object.getOwnPropertyNames(e)};function vg(t){console&&console.warn&&console.warn(t)}var El=Number.isNaN||function(e){return e!==e};function Pe(){Pe.init.call(this)}Wa.exports=Pe;Wa.exports.once=_g;Pe.EventEmitter=Pe;Pe.prototype._events=void 0;Pe.prototype._eventsCount=0;Pe.prototype._maxListeners=void 0;var uc=10;function Ni(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Pe,"defaultMaxListeners",{enumerable:!0,get:function(){return uc},set:function(t){if(typeof t!="number"||t<0||El(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");uc=t}});Pe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Pe.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||El(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Sl(t){return t._maxListeners===void 0?Pe.defaultMaxListeners:t._maxListeners}Pe.prototype.getMaxListeners=function(){return Sl(this)};Pe.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var f=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var g=s[e];if(g===void 0)return!1;if(typeof g=="function")oc(g,this,n);else for(var w=g.length,A=kl(g,w),r=0;r<w;++r)oc(A[r],this,n);return!0};function Cl(t,e,n,r){var i,s,o;if(Ni(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Sl(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=o.length,vg(f)}return t}Pe.prototype.addListener=function(e,n){return Cl(this,e,n,!1)};Pe.prototype.on=Pe.prototype.addListener;Pe.prototype.prependListener=function(e,n){return Cl(this,e,n,!0)};function gg(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function xl(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=gg.bind(r);return i.listener=n,r.wrapFn=i,i}Pe.prototype.once=function(e,n){return Ni(n),this.on(e,xl(this,e,n)),this};Pe.prototype.prependOnceListener=function(e,n){return Ni(n),this.prependListener(e,xl(this,e,n)),this};Pe.prototype.removeListener=function(e,n){var r,i,s,o,f;if(Ni(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){f=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():pg(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||n)}return this};Pe.prototype.off=Pe.prototype.removeListener;Pe.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function Ol(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?mg(i):kl(i,i.length)}Pe.prototype.listeners=function(e){return Ol(this,e,!0)};Pe.prototype.rawListeners=function(e){return Ol(this,e,!1)};Pe.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Tl.call(t,e)};Pe.prototype.listenerCount=Tl;function Tl(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Pe.prototype.eventNames=function(){return this._eventsCount>0?Ai(this._events):[]};function kl(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function pg(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function mg(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function _g(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}Dl(t,e,s,{once:!0}),e!=="error"&&yg(t,i,{once:!0})})}function yg(t,e,n){typeof t.on=="function"&&Dl(t,"error",e,n)}function Dl(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var wg=Wa.exports;const nn=Gn(wg);function Fi(t){return"$"+t}function ql(t){return t.substring(1)}function sn(){this._store={}}sn.prototype.get=function(t){var e=Fi(t);return this._store[e]};sn.prototype.set=function(t,e){var n=Fi(t);return this._store[n]=e,!0};sn.prototype.has=function(t){var e=Fi(t);return e in this._store};sn.prototype.keys=function(){return Object.keys(this._store).map(t=>ql(t))};sn.prototype.delete=function(t){var e=Fi(t),n=e in this._store;return delete this._store[e],n};sn.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var i=e[n],s=this._store[i];i=ql(i),t(s,i)}};Object.defineProperty(sn.prototype,"size",{get:function(){return Object.keys(this._store).length}});function Wr(t){if(this._store=new sn,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}Wr.prototype.add=function(t){return this._store.set(t,!0)};Wr.prototype.has=function(t){return this._store.has(t)};Wr.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})};Object.defineProperty(Wr.prototype,"size",{get:function(){return this._store.size}});function bg(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}var wr,ft;bg()?(wr=Set,ft=Map):(wr=Wr,ft=sn);function Ag(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer||typeof Blob<"u"&&t instanceof Blob}function $g(t){if(typeof t.slice=="function")return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}function Eg(t){if(t instanceof ArrayBuffer)return $g(t);var e=t.size,n=t.type;return typeof t.slice=="function"?t.slice(0,e,n):t.webkitSlice(0,e,n)}var Ll=Function.prototype.toString,Sg=Ll.call(Object);function Cg(t){var e=Object.getPrototypeOf(t);if(e===null)return!0;var n=e.constructor;return typeof n=="function"&&n instanceof n&&Ll.call(n)==Sg}function Ye(t){var e,n,r;if(!t||typeof t!="object")return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=Ye(t[n]);return e}if(t instanceof Date&&isFinite(t))return t.toISOString();if(Ag(t))return Eg(t);if(!Cg(t))return t;e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Ye(t[n]);typeof i<"u"&&(e[n]=i)}return e}function Pl(t){var e=!1;return function(...n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}}function Il(t){return function(...e){e=Ye(e);var n=this,r=typeof e[e.length-1]=="function"?e.pop():!1,i=new Promise(function(s,o){var f;try{var g=Pl(function(w,A){w?o(w):s(A)});e.push(g),f=t.apply(n,e),f&&typeof f.then=="function"&&s(f)}catch(w){o(w)}});return r&&i.then(function(s){r(null,s)},r),i}}function xg(t,e,n){if(t.constructor.listeners("debug").length){for(var r=["api",t.name,e],i=0;i<n.length-1;i++)r.push(n[i]);t.constructor.emit("debug",r);var s=n[n.length-1];n[n.length-1]=function(o,f){var g=["api",t.name,e];g=g.concat(o?["error",o]:["success",f]),t.constructor.emit("debug",g),s(o,f)}}}function Ke(t,e){return Il(function(...n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return xg(r,t,n),this.taskqueue.isReady?e.apply(this,n):new Promise(function(i,s){r.taskqueue.addTask(function(o){o?s(o):i(r[t].apply(r,n))})})})}function Jr(t,e){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r];s in t&&(n[s]=t[s])}return n}var Og=6;function cc(t){return t}function Tg(t){return[{ok:t}]}function jl(t,e,n){var r=e.docs,i=new ft;r.forEach(function(O){i.has(O.id)?i.get(O.id).push(O):i.set(O.id,[O])});var s=i.size,o=0,f=new Array(s);function g(){var O=[];f.forEach(function(b){b.docs.forEach(function(p){O.push({id:b.id,docs:[p]})})}),n(null,{results:O})}function w(){++o===s&&g()}function A(O,b,p){f[O]={id:b,docs:p},w()}var h=[];i.forEach(function(O,b){h.push(b)});var y=0;function E(){if(!(y>=h.length)){var O=Math.min(y+Og,h.length),b=h.slice(y,O);S(b,y),y+=b.length}}function S(O,b){O.forEach(function(p,l){var u=b+l,c=i.get(p),d=Jr(c[0],["atts_since","attachments"]);d.open_revs=c.map(function(D){return D.rev}),d.open_revs=d.open_revs.filter(cc);var v=cc;d.open_revs.length===0&&(delete d.open_revs,v=Tg),["revs","attachments","binary","ajax","latest"].forEach(function(D){D in e&&(d[D]=e[D])}),t.get(p,d,function(D,I){var k;D?k=[{error:D}]:k=v(I),A(u,p,k),E()})})}E()}var ea;try{localStorage.setItem("_pouch_check_localstorage",1),ea=!!localStorage.getItem("_pouch_check_localstorage")}catch{ea=!1}function Ci(){return ea}let kg=class extends nn{constructor(){super(),this._listeners={},Ci()&&addEventListener("storage",e=>{this.emit(e.key)})}addListener(e,n,r,i){if(this._listeners[n])return;var s=!1,o=this;function f(){if(!o._listeners[n])return;if(s){s="waiting";return}s=!0;var g=Jr(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function w(){s=!1}r.changes(g).on("change",function(A){A.seq>i.since&&!i.cancelled&&(i.since=A.seq,i.onChange(A))}).on("complete",function(){s==="waiting"&&Gt(f),s=!1}).on("error",w)}this._listeners[n]=f,this.on(e,f)}removeListener(e,n){n in this._listeners&&(super.removeListener(e,this._listeners[n]),delete this._listeners[n])}notifyLocalWindows(e){Ci()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")}notify(e){this.emit(e),this.notifyLocalWindows(e)}};function Ct(t){if(typeof console<"u"&&typeof console[t]=="function"){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function Dg(t,e){var n=6e5;t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e=e+1,e>n&&(t=n>>1,e=n);var r=Math.random(),i=e-t;return~~(i*r+t)}function qg(t){var e=0;return t||(e=2e3),Dg(t,e)}function ta(t,e){Ct("info","The above "+t+" is totally normal. "+e)}var na;typeof Object.assign=="function"?na=Object.assign:na=function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var Rn=na;let Ne=class extends Error{constructor(e,n,r){super(),this.status=e,this.name=n,this.message=r,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}};new Ne(401,"unauthorized","Name or password is incorrect.");var Lg=new Ne(400,"bad_request","Missing JSON list of 'docs'"),At=new Ne(404,"not_found","missing"),br=new Ne(409,"conflict","Document update conflict"),Rl=new Ne(400,"bad_request","_id field must contain a string"),Pg=new Ne(412,"missing_id","_id is required for puts"),Ig=new Ne(400,"bad_request","Only reserved document ids may start with underscore.");new Ne(412,"precondition_failed","Database not open");var Ja=new Ne(500,"unknown_error","Database encountered an unknown error"),Bl=new Ne(500,"badarg","Some query argument is invalid");new Ne(400,"invalid_request","Request was invalid");var jg=new Ne(400,"query_parse_error","Some query parameter is invalid"),lc=new Ne(500,"doc_validation","Bad special document member"),Mi=new Ne(400,"bad_request","Something wrong with the request"),Ds=new Ne(400,"bad_request","Document must be a JSON object");new Ne(404,"not_found","Database not found");var Qa=new Ne(500,"indexed_db_went_bad","unknown");new Ne(500,"web_sql_went_bad","unknown");new Ne(500,"levelDB_went_went_bad","unknown");new Ne(403,"forbidden","Forbidden by design doc validate_doc_update function");var Nl=new Ne(400,"bad_request","Invalid rev format");new Ne(412,"file_exists","The database could not be created, the file already exists.");var Rg=new Ne(412,"missing_stub","A pre-existing attachment stub wasn't found");new Ne(413,"invalid_url","Provided URL is invalid");function be(t,e){function n(r){for(var i=Object.getOwnPropertyNames(t),s=0,o=i.length;s<o;s++)typeof t[i[s]]!="function"&&(this[i[s]]=t[i[s]]);this.stack===void 0&&(this.stack=new Error().stack),r!==void 0&&(this.reason=r)}return n.prototype=Ne.prototype,new n(e)}function Ar(t){if(typeof t!="object"){var e=t;t=Ja,t.data=e}return"error"in t&&t.error==="conflict"&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),"stack"in t||(t.stack=new Error().stack),t}function Bg(t,e,n){try{return!t(e,n)}catch(i){var r="Filter function threw: "+i.toString();return be(Mi,r)}}function Xa(t){var e={},n=t.filter&&typeof t.filter=="function";return e.query=t.query_params,function(i){i.doc||(i.doc={});var s=n&&Bg(t.filter,i.doc,e);if(typeof s=="object")return s;if(s)return!1;if(!t.include_docs)delete i.doc;else if(!t.attachments)for(var o in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,o)&&(i.doc._attachments[o].stub=!0);return!0}}function xi(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function Fl(t){var e;if(t?typeof t!="string"?e=be(Rl):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=be(Ig)):e=be(Pg),e)throw e}function zt(t){return typeof t._remote=="boolean"?t._remote:typeof t.type=="function"?(Ct("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),t.type()==="http"):!1}function Ng(t,e){return"listenerCount"in t?t.listenerCount(e):nn.listenerCount(t,e)}function ra(t){if(!t)return null;var e=t.split("/");return e.length===2?e:e.length===1?[t,t]:null}function fc(t){var e=ra(t);return e?e.join("/"):null}var dc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],hc="queryKey",Fg=/(?:^|&)([^&=]*)=?([^&]*)/g,Mg=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function Ml(t){for(var e=Mg.exec(t),n={},r=14;r--;){var i=dc[r],s=e[r]||"",o=["user","password"].indexOf(i)!==-1;n[i]=o?decodeURIComponent(s):s}return n[hc]={},n[dc[12]].replace(Fg,function(f,g,w){g&&(n[hc][g]=w)}),n}function Ya(t,e){var n=[],r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n.push(i),r.push(e[i]));return n.push(t),Function.apply(null,n).apply(null,r)}function Oi(t,e,n){return t.get(e).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,s=n(r);return s?(s._id=e,s._rev=i,Ug(t,s,n)):{updated:!1,rev:i}})}function Ug(t,e,n){return t.put(e).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return Oi(t,e._id,n)})}var Za=function(t){return atob(t)},Qr=function(t){return btoa(t)};function Va(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(s){if(s.name!=="TypeError")throw s;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}function Kg(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function eo(t,e){return Va([Kg(t)],{type:e})}function to(t,e){return eo(Za(t),e)}function zg(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}function Ul(t,e){var n=new FileReader,r=typeof n.readAsBinaryString=="function";n.onloadend=function(i){var s=i.target.result||"";if(r)return e(s);e(zg(s))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Kl(t,e){Ul(t,function(n){e(n)})}function no(t,e){Kl(t,function(n){e(Qr(n))})}function Hg(t,e){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);e(i)},n.readAsArrayBuffer(t)}var Gg=self.setImmediate||self.setTimeout,Wg=32768;function Jg(t){return Qr(t)}function Qg(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}function Xg(t,e,n,r,i){(n>0||r<e.size)&&(e=Qg(e,n,r)),Hg(e,function(s){t.append(s),i()})}function Yg(t,e,n,r,i){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),i()}function ro(t,e){var n=typeof t=="string",r=n?t.length:t.size,i=Math.min(Wg,r),s=Math.ceil(r/i),o=0,f=n?new Vs:new Vs.ArrayBuffer,g=n?Yg:Xg;function w(){Gg(h)}function A(){var y=f.end(!0),E=Jg(y);e(E),f.destroy()}function h(){var y=o*i,E=y+i;o++,o<s?g(f,t,y,E,w):g(f,t,y,E,A)}h()}function zl(t){return Vs.hash(t)}function Hl(t,e){if(!e)return Ga().replace(/-/g,"").toLowerCase();var n=Rn({},t);return delete n._rev_tree,zl(JSON.stringify(n))}var Ui=Ga;function Bn(t){for(var e,n,r,i=t.rev_tree.slice(),s;s=i.pop();){var o=s.ids,f=o[2],g=s.pos;if(f.length){for(var w=0,A=f.length;w<A;w++)i.push({pos:g+1,ids:f[w]});continue}var h=!!o[1].deleted,y=o[0];(!e||(r!==h?r:n!==g?n<g:e<y))&&(e=y,n=g,r=h)}return n+"-"+e}function Nn(t,e){for(var n=t.slice(),r;r=n.pop();)for(var i=r.pos,s=r.ids,o=s[2],f=e(o.length===0,i,s[0],r.ctx,s[1]),g=0,w=o.length;g<w;g++)n.push({pos:i+1,ids:o[g],ctx:f})}function Zg(t,e){return t.pos-e.pos}function io(t){var e=[];Nn(t,function(i,s,o,f,g){i&&e.push({rev:s+"-"+o,pos:s,opts:g})}),e.sort(Zg).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function so(t){for(var e=Bn(t),n=io(t.rev_tree),r=[],i=0,s=n.length;i<s;i++){var o=n[i];o.rev!==e&&!o.opts.deleted&&r.push(o.rev)}return r}function Vg(t){var e=[];return Nn(t.rev_tree,function(n,r,i,s,o){o.status==="available"&&!n&&(e.push(r+"-"+i),o.status="missing")}),e}function ep(t,e){let n=[];const r=t.slice();let i;for(;i=r.pop();){const{pos:s,ids:o}=i,f=`${s}-${o[0]}`,g=o[2];if(n.push(f),f===e){if(g.length!==0)throw new Error("The requested revision is not a leaf");return n.reverse()}(g.length===0||g.length>1)&&(n=[]);for(let w=0,A=g.length;w<A;w++)r.push({pos:s+1,ids:g[w]})}if(n.length===0)throw new Error("The requested revision does not exist");return n.reverse()}function Gl(t){for(var e=[],n=t.slice(),r;r=n.pop();){var i=r.pos,s=r.ids,o=s[0],f=s[1],g=s[2],w=g.length===0,A=r.history?r.history.slice():[];A.push({id:o,opts:f}),w&&e.push({pos:i+1-A.length,ids:A});for(var h=0,y=g.length;h<y;h++)n.push({pos:i+1,ids:g[h],history:A})}return e.reverse()}function tp(t,e){return t.pos-e.pos}function np(t,e,n){for(var r=0,i=t.length,s;r<i;)s=r+i>>>1,n(t[s],e)<0?r=s+1:i=s;return r}function rp(t,e,n){var r=np(t,e,n);t.splice(r,0,e)}function vc(t,e){for(var n,r,i=e,s=t.length;i<s;i++){var o=t[i],f=[o.id,o.opts,[]];r?(r[2].push(f),r=f):n=r=f}return n}function ip(t,e){return t[0]<e[0]?-1:1}function gc(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),s=i.tree1,o=i.tree2;(s[1].status||o[1].status)&&(s[1].status=s[1].status==="available"||o[1].status==="available"?"available":"missing");for(var f=0;f<o[2].length;f++){if(!s[2][0]){r="new_leaf",s[2][0]=o[2][f];continue}for(var g=!1,w=0;w<s[2].length;w++)s[2][w][0]===o[2][f][0]&&(n.push({tree1:s[2][w],tree2:o[2][f]}),g=!0);g||(r="new_branch",rp(s[2],o[2][f],ip))}}return{conflicts:r,tree:t}}function Wl(t,e,n){var r=[],i=!1,s=!1,o;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var f=0,g=t.length;f<g;f++){var w=t[f];if(w.pos===e.pos&&w.ids[0]===e.ids[0])o=gc(w.ids,e.ids),r.push({pos:w.pos,ids:o.tree}),i=i||o.conflicts,s=!0;else if(n!==!0){var A=w.pos<e.pos?w:e,h=w.pos<e.pos?e:w,y=h.pos-A.pos,E=[],S=[];for(S.push({ids:A.ids,diff:y,parent:null,parentIdx:null});S.length>0;){var O=S.pop();if(O.diff===0){O.ids[0]===h.ids[0]&&E.push(O);continue}for(var b=O.ids[2],p=0,l=b.length;p<l;p++)S.push({ids:b[p],diff:O.diff-1,parent:O.ids,parentIdx:p})}var u=E[0];u?(o=gc(u.ids,h.ids),u.parent[2][u.parentIdx]=o.tree,r.push({pos:A.pos,ids:A.ids}),i=i||o.conflicts,s=!0):r.push(w)}else r.push(w)}return s||r.push(e),r.sort(tp),{tree:r,conflicts:i||"internal_node"}}function sp(t,e){for(var n=Gl(t),r,i,s=0,o=n.length;s<o;s++){var f=n[s],g=f.ids,w;if(g.length>e){r||(r={});var A=g.length-e;w={pos:f.pos+A,ids:vc(g,A)};for(var h=0;h<A;h++){var y=f.pos+h+"-"+g[h].id;r[y]=!0}}else w={pos:f.pos,ids:vc(g,0)};i?i=Wl(i,w,!0).tree:i=[w]}return r&&Nn(i,function(E,S,O){delete r[S+"-"+O]}),{tree:i,revs:r?Object.keys(r):[]}}function Jl(t,e,n){var r=Wl(t,e),i=sp(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function ap(t,e){for(var n=t.slice(),r=e.split("-"),i=parseInt(r[0],10),s=r[1],o;o=n.pop();){if(o.pos===i&&o.ids[0]===s)return!0;for(var f=o.ids[2],g=0,w=f.length;g<w;g++)n.push({pos:o.pos+1,ids:f[g]})}return!1}function op(t){return t.ids}function Vt(t,e){e||(e=Bn(t));for(var n=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(op),i;i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function In(t){return/^_local/.test(t)}function up(t,e){for(var n=e.rev_tree.slice(),r;r=n.pop();){var i=r.pos,s=r.ids,o=s[0],f=s[1],g=s[2],w=g.length===0,A=r.history?r.history.slice():[];if(A.push({id:o,pos:i,opts:f}),w)for(var h=0,y=A.length;h<y;h++){var E=A[h],S=E.pos+"-"+E.id;if(S===t)return i+"-"+o}for(var O=0,b=g.length;O<b;O++)n.push({pos:i+1,ids:g[O],history:A})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function cp(t,e,n,r){try{t.emit("change",e,n,r)}catch(i){Ct("error",'Error in .on("change", function):',i)}}function lp(t,e,n){var r=[{rev:t._rev}];n.style==="all_docs"&&(r=io(e.rev_tree).map(function(s){return{rev:s.rev}}));var i={id:e.id,changes:r,doc:t};return Vt(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=so(e),i.doc._conflicts.length||delete i.doc._conflicts),i}let fp=class extends nn{constructor(e,n,r){super(),this.db=e,n=n?Ye(n):{};var i=n.complete=Pl((f,g)=>{f?Ng(this,"error")>0&&this.emit("error",f):this.emit("complete",g),this.removeAllListeners(),e.removeListener("destroyed",s)});r&&(this.on("complete",function(f){r(null,f)}),this.on("error",r));const s=()=>{this.cancel()};e.once("destroyed",s),n.onChange=(f,g,w)=>{this.isCancelled||cp(this,f,g,w)};var o=new Promise(function(f,g){n.complete=function(w,A){w?g(w):f(A)}});this.once("cancel",function(){e.removeListener("destroyed",s),n.complete(null,{status:"cancelled"})}),this.then=o.then.bind(o),this.catch=o.catch.bind(o),this.then(function(f){i(null,f)},i),e.taskqueue.isReady?this.validateChanges(n):e.taskqueue.addTask(f=>{f?n.complete(f):this.isCancelled?this.emit("cancel"):this.validateChanges(n)})}cancel(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")}validateChanges(e){var n=e.complete;we._changesFilterPlugin?we._changesFilterPlugin.validate(e,r=>{if(r)return n(r);this.doChanges(e)}):this.doChanges(e)}doChanges(e){var n=e.complete;if(e=Ye(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=lp,e.since==="latest"&&(e.since="now"),e.since||(e.since=0),e.since==="now"){this.db.info().then(i=>{if(this.isCancelled){n(null,{status:"cancelled"});return}e.since=i.update_seq,this.doChanges(e)},n);return}if(we._changesFilterPlugin){if(we._changesFilterPlugin.normalize(e),we._changesFilterPlugin.shouldFilter(this,e))return we._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(i){i in e&&Ct("warn",'The "'+i+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=e.limit===0?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&typeof r.cancel=="function"){const i=this.cancel;this.cancel=(...s)=>{r.cancel(),i.apply(this,s)}}}};function pc(t,e){return t<e?-1:t>e?1:0}function qs(t,e){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=e,t(n)):t(null,r.length?r[0]:r)}}function dp(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var s=r[i];n._attachments[s]=Jr(n._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}function hp(t,e){var n=pc(t._id,e._id);if(n!==0)return n;var r=t._revisions?t._revisions.start:0,i=e._revisions?e._revisions.start:0;return pc(r,i)}function vp(t){var e={},n=[];return Nn(t,function(r,i,s,o){var f=i+"-"+s;return r&&(e[f]=0),o!==void 0&&n.push({from:o,to:f}),f}),n.reverse(),n.forEach(function(r){e[r.from]===void 0?e[r.from]=1+e[r.to]:e[r.from]=Math.min(e[r.from],1+e[r.to])}),e}function gp(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}function Ql(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),t._compact(n,function(s,o){s?r(s):r(null,o),Gt(function(){t._compactionQueue.shift(),t._compactionQueue.length&&Ql(t)})})})}function pp(t,e,n){return t.get("_local/purges").then(function(r){const i=r.purgeSeq+1;return r.purges.push({docId:e,rev:n,purgeSeq:i}),r.purges.length>self.purged_infos_limit&&r.purges.splice(0,r.purges.length-self.purged_infos_limit),r.purgeSeq=i,r}).catch(function(r){if(r.status!==404)throw r;return{_id:"_local/purges",purges:[{docId:e,rev:n,purgeSeq:0}],purgeSeq:0}}).then(function(r){return t.put(r)})}function mp(t){return t.charAt(0)==="_"?t+" is not a valid attachment name, attachment names cannot start with '_'":!1}let Xl=class extends nn{_setup(){this.post=Ke("post",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof e!="object"||Array.isArray(e))return r(be(Ds));this.bulkDocs({docs:[e]},n,qs(r,e._id))}).bind(this),this.put=Ke("put",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof e!="object"||Array.isArray(e))return r(be(Ds));if(Fl(e._id),In(e._id)&&typeof this._putLocal=="function")return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);const i=o=>{typeof this._put=="function"&&n.new_edits!==!1?this._put(e,n,o):this.bulkDocs({docs:[e]},n,qs(o,e._id))};n.force&&e._rev?(s(),i(function(o){var f=o?null:{ok:!0,id:e._id,rev:e._rev};r(o,f)})):i(r);function s(){var o=e._rev.split("-"),f=o[1],g=parseInt(o[0],10),w=g+1,A=Hl();e._revisions={start:w,ids:[A,f]},e._rev=w+"-"+A,n.new_edits=!1}}).bind(this),this.putAttachment=Ke("putAttachment",function(e,n,r,i,s){var o=this;typeof s=="function"&&(s=i,i=r,r=null),typeof s>"u"&&(s=i,i=r,r=null),s||Ct("warn","Attachment",n,"on document",e,"is missing content_type");function f(g){var w="_rev"in g?parseInt(g._rev,10):0;return g._attachments=g._attachments||{},g._attachments[n]={content_type:s,data:i,revpos:++w},o.put(g)}return o.get(e).then(function(g){if(g._rev!==r)throw be(br);return f(g)},function(g){if(g.reason===At.message)return f({_id:e});throw g})}).bind(this),this.removeAttachment=Ke("removeAttachment",function(e,n,r,i){this.get(e,(s,o)=>{if(s){i(s);return}if(o._rev!==r){i(be(br));return}if(!o._attachments)return i();delete o._attachments[n],Object.keys(o._attachments).length===0&&delete o._attachments,this.put(o,i)})}).bind(this),this.remove=Ke("remove",function(e,n,r,i){var s;typeof n=="string"?(s={_id:e,_rev:n},typeof r=="function"&&(i=r,r={})):(s=e,typeof n=="function"?(i=n,r={}):(i=r,r=n)),r=r||{},r.was_delete=!0;var o={_id:s._id,_rev:s._rev||r.rev};if(o._deleted=!0,In(o._id)&&typeof this._removeLocal=="function")return this._removeLocal(s,i);this.bulkDocs({docs:[o]},r,qs(i,o._id))}).bind(this),this.revsDiff=Ke("revsDiff",function(e,n,r){typeof n=="function"&&(r=n,n={});var i=Object.keys(e);if(!i.length)return r(null,{});var s=0,o=new ft;function f(w,A){o.has(w)||o.set(w,{missing:[]}),o.get(w).missing.push(A)}function g(w,A){var h=e[w].slice(0);Nn(A,function(y,E,S,O,b){var p=E+"-"+S,l=h.indexOf(p);l!==-1&&(h.splice(l,1),b.status!=="available"&&f(w,p))}),h.forEach(function(y){f(w,y)})}i.map(function(w){this._getRevisionTree(w,function(A,h){if(A&&A.status===404&&A.message==="missing")o.set(w,{missing:e[w]});else{if(A)return r(A);g(w,h)}if(++s===i.length){var y={};return o.forEach(function(E,S){y[S]=E}),r(null,y)}})},this)}).bind(this),this.bulkGet=Ke("bulkGet",function(e,n){jl(this,e,n)}).bind(this),this.compactDocument=Ke("compactDocument",function(e,n,r){this._getRevisionTree(e,(i,s)=>{if(i)return r(i);var o=vp(s),f=[],g=[];Object.keys(o).forEach(function(w){o[w]>n&&f.push(w)}),Nn(s,function(w,A,h,y,E){var S=A+"-"+h;E.status==="available"&&f.indexOf(S)!==-1&&g.push(S)}),this._doCompaction(e,g,r)})}).bind(this),this.compact=Ke("compact",function(e,n){typeof e=="function"&&(n=e,e={}),e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:n}),this._compactionQueue.length===1&&Ql(this)}).bind(this),this.get=Ke("get",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof e!="string")return r(be(Rl));if(In(e)&&typeof this._getLocal=="function")return this._getLocal(e,r);var i=[];const s=()=>{var g=[],w=i.length;if(!w)return r(null,g);i.forEach(A=>{this.get(e,{rev:A,revs:n.revs,latest:n.latest,attachments:n.attachments,binary:n.binary},function(h,y){if(h)g.push({missing:A});else{for(var E,S=0,O=g.length;S<O;S++)if(g[S].ok&&g[S].ok._rev===y._rev){E=!0;break}E||g.push({ok:y})}w--,w||r(null,g)})})};if(n.open_revs){if(n.open_revs==="all")this._getRevisionTree(e,function(g,w){if(g)return r(g);i=io(w).map(function(A){return A.rev}),s()});else if(Array.isArray(n.open_revs)){i=n.open_revs;for(var o=0;o<i.length;o++){var f=i[o];if(!(typeof f=="string"&&/^\d+-/.test(f)))return r(be(Nl))}s()}else return r(be(Ja,"function_clause"));return}return this._get(e,n,(g,w)=>{if(g)return g.docId=e,r(g);var A=w.doc,h=w.metadata,y=w.ctx;if(n.conflicts){var E=so(h);E.length&&(A._conflicts=E)}if(Vt(h,A._rev)&&(A._deleted=!0),n.revs||n.revs_info){for(var S=A._rev.split("-"),O=parseInt(S[0],10),b=S[1],p=Gl(h.rev_tree),l=null,u=0;u<p.length;u++){var c=p[u],d=c.ids.map(function(X){return X.id}).indexOf(b),v=d===O-1;(v||!l&&d!==-1)&&(l=c)}if(!l)return g=new Error("invalid rev tree"),g.docId=e,r(g);var D=l.ids.map(function(X){return X.id}).indexOf(A._rev.split("-")[1])+1,I=l.ids.length-D;if(l.ids.splice(D,I),l.ids.reverse(),n.revs&&(A._revisions={start:l.pos+l.ids.length-1,ids:l.ids.map(function(X){return X.id})}),n.revs_info){var k=l.pos+l.ids.length;A._revs_info=l.ids.map(function(X){return k--,{rev:k+"-"+X.id,status:X.opts.status}})}}if(n.attachments&&A._attachments){var M=A._attachments,U=Object.keys(M).length;if(U===0)return r(null,A);Object.keys(M).forEach(X=>{this._getAttachment(A._id,X,M[X],{rev:A._rev,binary:n.binary,ctx:y},function(H,Z){var Q=A._attachments[X];Q.data=Z,delete Q.stub,delete Q.length,--U||r(null,A)})})}else{if(A._attachments)for(var ee in A._attachments)Object.prototype.hasOwnProperty.call(A._attachments,ee)&&(A._attachments[ee].stub=!0);r(null,A)}})}).bind(this),this.getAttachment=Ke("getAttachment",function(e,n,r,i){r instanceof Function&&(i=r,r={}),this._get(e,r,(s,o)=>{if(s)return i(s);if(o.doc._attachments&&o.doc._attachments[n])r.ctx=o.ctx,r.binary=!0,this._getAttachment(e,n,o.doc._attachments[n],r,i);else return i(be(At))})}).bind(this),this.allDocs=Ke("allDocs",function(e,n){if(typeof e=="function"&&(n=e,e={}),e.skip=typeof e.skip<"u"?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return n(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(i){return i in e})[0];if(r){n(be(jg,"Query parameter `"+r+"` is not compatible with multi-get"));return}if(!zt(this)&&(gp(e),e.keys.length===0))return this._allDocs({limit:0},n)}return this._allDocs(e,n)}).bind(this),this.close=Ke("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}).bind(this),this.info=Ke("info",function(e){this._info((n,r)=>{if(n)return e(n);r.db_name=r.db_name||this.name,r.auto_compaction=!!(this.auto_compaction&&!zt(this)),r.adapter=this.adapter,e(null,r)})}).bind(this),this.id=Ke("id",function(e){return this._id(e)}).bind(this),this.bulkDocs=Ke("bulkDocs",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),n=n||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(be(Lg));for(var i=0;i<e.docs.length;++i)if(typeof e.docs[i]!="object"||Array.isArray(e.docs[i]))return r(be(Ds));var s;if(e.docs.forEach(function(g){g._attachments&&Object.keys(g._attachments).forEach(function(w){s=s||mp(w),g._attachments[w].content_type||Ct("warn","Attachment",w,"on document",g._id,"is missing content_type")})}),s)return r(be(Mi,s));"new_edits"in n||("new_edits"in e?n.new_edits=e.new_edits:n.new_edits=!0);var o=this;!n.new_edits&&!zt(o)&&e.docs.sort(hp),dp(e.docs);var f=e.docs.map(function(g){return g._id});this._bulkDocs(e,n,function(g,w){if(g)return r(g);if(n.new_edits||(w=w.filter(function(y){return y.error})),!zt(o))for(var A=0,h=w.length;A<h;A++)w[A].id=w[A].id||f[A];r(null,w)})}).bind(this),this.registerDependentDatabase=Ke("registerDependentDatabase",function(e,n){var r=Ye(this.__opts);this.__opts.view_adapter&&(r.adapter=this.__opts.view_adapter);var i=new this.constructor(e,r);function s(o){return o.dependentDbs=o.dependentDbs||{},o.dependentDbs[e]?!1:(o.dependentDbs[e]=!0,o)}Oi(this,"_local/_pouch_dependentDbs",s).then(function(){n(null,{db:i})}).catch(n)}).bind(this),this.destroy=Ke("destroy",function(e,n){typeof e=="function"&&(n=e,e={});var r="use_prefix"in this?this.use_prefix:!0;const i=()=>{this._destroy(e,(s,o)=>{if(s)return n(s);this._destroyed=!0,this.emit("destroyed"),n(null,o||{ok:!0})})};if(zt(this))return i();this.get("_local/_pouch_dependentDbs",(s,o)=>{if(s)return s.status!==404?n(s):i();var f=o.dependentDbs,g=this.constructor,w=Object.keys(f).map(A=>{var h=r?A.replace(new RegExp("^"+g.prefix),""):A;return new g(h,this.__opts).destroy()});Promise.all(w).then(i,n)})}).bind(this)}_compact(e,n){var r={return_docs:!1,last_seq:e.last_seq||0},i=[],s,o=0;const f=A=>{this.activeTasks.update(s,{completed_items:++o}),i.push(this.compactDocument(A.id,0))},g=A=>{this.activeTasks.remove(s,A),n(A)},w=A=>{var h=A.last_seq;Promise.all(i).then(()=>Oi(this,"_local/compaction",y=>!y.last_seq||y.last_seq<h?(y.last_seq=h,y):!1)).then(()=>{this.activeTasks.remove(s),n(null,{ok:!0})}).catch(g)};this.info().then(A=>{s=this.activeTasks.add({name:"database_compaction",total_items:A.update_seq-r.last_seq}),this.changes(r).on("change",f).on("complete",w).on("error",g)})}changes(e,n){return typeof e=="function"&&(n=e,e={}),e=e||{},e.return_docs="return_docs"in e?e.return_docs:!e.live,new fp(this,e,n)}type(){return typeof this._type=="function"?this._type():this.adapter}};Xl.prototype.purge=Ke("_purge",function(t,e,n){if(typeof this._purge>"u")return n(be(Ja,"Purge is not implemented in the "+this.adapter+" adapter."));var r=this;r._getRevisionTree(t,(i,s)=>{if(i)return n(i);if(!s)return n(be(At));let o;try{o=ep(s,e)}catch(f){return n(f.message||f)}r._purge(t,o,(f,g)=>{if(f)return n(f);pp(r,t,e).then(function(){return n(null,g)})})})});let _p=class{constructor(){this.isReady=!1,this.failed=!1,this.queue=[]}execute(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()}fail(e){this.failed=e,this.execute()}ready(e){this.isReady=!0,this.db=e,this.execute()}addTask(e){this.queue.push(e),this.failed&&this.execute()}};function yp(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=we.adapters,i=we.preferredAdapters,s=we.prefix,o=e.adapter;if(!o)for(var f=0;f<i.length;++f){if(o=i[f],o==="idb"&&"websql"in r&&Ci()&&localStorage["_pouch__websqldb_"+s+t]){Ct("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}var g=r[o],w=g&&"use_prefix"in g?g.use_prefix:!0;return{name:w?s+t:t,adapter:o}}function wp(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t}})}function Yl(t,e){let n=function(...r){if(!(this instanceof n))return new n(...r);e.apply(this,r)};return wp(n,t),n}function bp(t){function e(r){t.removeListener("closed",n),r||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}let mc=class extends Xl{constructor(e,n){super(),this._setup(e,n)}_setup(e,n){if(super._setup(),n=n||{},e&&typeof e=="object"&&(n=e,e=n.name,delete n.name),n.deterministic_revs===void 0&&(n.deterministic_revs=!0),this.__opts=n=Ye(n),this.auto_compaction=n.auto_compaction,this.purged_infos_limit=n.purged_infos_limit||1e3,this.prefix=we.prefix,typeof e!="string")throw new Error("Missing/invalid DB name");var r=(n.prefix||"")+e,i=yp(r,n);if(n.name=i.name,n.adapter=n.adapter||i.adapter,this.name=e,this._adapter=n.adapter,we.emit("debug",["adapter","Picked adapter: ",n.adapter]),!we.adapters[n.adapter]||!we.adapters[n.adapter].valid())throw new Error("Invalid Adapter: "+n.adapter);if(n.view_adapter&&(!we.adapters[n.view_adapter]||!we.adapters[n.view_adapter].valid()))throw new Error("Invalid View Adapter: "+n.view_adapter);this.taskqueue=new _p,this.adapter=n.adapter,we.adapters[n.adapter].call(this,n,s=>{if(s)return this.taskqueue.fail(s);bp(this),this.emit("created",this),we.emit("created",this.name),this.taskqueue.ready(this)})}};const we=Yl(mc,function(t,e){mc.prototype._setup.call(this,t,e)});var Ap=typeof AbortController<"u"?AbortController:function(){return{abort:function(){}}},Zl=fetch,dr=Headers;let $p=class{constructor(){this.tasks={}}list(){return Object.values(this.tasks)}add(e){const n=Ga();return this.tasks[n]={id:n,name:e.name,total_items:e.total_items,created_at:new Date().toJSON()},n}get(e){return this.tasks[e]}remove(e,n){return delete this.tasks[e],this.tasks}update(e,n){const r=this.tasks[e];if(typeof r<"u"){const i={id:r.id,name:r.name,created_at:r.created_at,total_items:n.total_items||r.total_items,completed_items:n.completed_items||r.completed_items,updated_at:new Date().toJSON()};this.tasks[e]=i}return this.tasks}};we.adapters={};we.preferredAdapters=[];we.prefix="_pouch_";var _c=new nn;function Ep(t){Object.keys(nn.prototype).forEach(function(n){typeof nn.prototype[n]=="function"&&(t[n]=_c[n].bind(_c))});var e=t._destructionListeners=new ft;t.on("ref",function(r){e.has(r.name)||e.set(r.name,[]),e.get(r.name).push(r)}),t.on("unref",function(r){if(e.has(r.name)){var i=e.get(r.name),s=i.indexOf(r);s<0||(i.splice(s,1),i.length>1?e.set(r.name,i):e.delete(r.name))}}),t.on("destroyed",function(r){if(e.has(r)){var i=e.get(r);e.delete(r),i.forEach(function(s){s.emit("destroyed",!0)})}})}Ep(we);we.adapter=function(t,e,n){e.valid()&&(we.adapters[t]=e,n&&we.preferredAdapters.push(t))};we.plugin=function(t){if(typeof t=="function")t(we);else{if(typeof t!="object"||Object.keys(t).length===0)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){we.prototype[e]=t[e]})}return this.__defaults&&(we.__defaults=Rn({},this.__defaults)),we};we.defaults=function(t){let e=Yl(we,function(n,r){r=r||{},n&&typeof n=="object"&&(r=n,n=r.name,delete r.name),r=Rn({},e.__defaults,r),we.call(this,n,r)});return e.preferredAdapters=we.preferredAdapters.slice(),Object.keys(we).forEach(function(n){n in e||(e[n]=we[n])}),e.__defaults=Rn({},this.__defaults,t),e};we.fetch=function(t,e){return Zl(t,e)};we.prototype.activeTasks=we.activeTasks=new $p;var Sp="8.0.1";function ao(t,e){for(var n=t,r=0,i=e.length;r<i;r++){var s=e[r];if(n=n[s],!n)break}return n}function Cp(t,e){return t<e?-1:t>e?1:0}function oo(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var s=t[r];r>0&&t[r-1]==="\\"&&(s==="$"||s===".")?n=n.substring(0,n.length-1)+s:s==="."?(e.push(n),n=""):n+=s}return e.push(n),e}var xp=["$or","$nor","$not"];function Vl(t){return xp.indexOf(t)>-1}function ef(t){return Object.keys(t)[0]}function Op(t){return t[ef(t)]}function Hr(t){var e={},n={$or:!0,$nor:!0};return t.forEach(function(r){Object.keys(r).forEach(function(i){var s=r[i];if(typeof s!="object"&&(s={$eq:s}),Vl(i))if(s instanceof Array){if(n[i]){n[i]=!1,e[i]=s;return}var o=[];e[i].forEach(function(g){Object.keys(s).forEach(function(w){var A=s[w],h=Math.max(Object.keys(g).length,Object.keys(A).length),y=Hr([g,A]);Object.keys(y).length<=h||o.push(y)})}),e[i]=o}else e[i]=Hr([s]);else{var f=e[i]=e[i]||{};Object.keys(s).forEach(function(g){var w=s[g];if(g==="$gt"||g==="$gte")return Tp(g,w,f);if(g==="$lt"||g==="$lte")return kp(g,w,f);if(g==="$ne")return Dp(w,f);if(g==="$eq")return qp(w,f);if(g==="$regex")return Lp(w,f);f[g]=w})}})}),e}function Tp(t,e,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?t==="$gte"?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):typeof n.$gt<"u"?t==="$gte"?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}function kp(t,e,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?t==="$lte"?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):typeof n.$lt<"u"?t==="$lte"?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}function Dp(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}function qp(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}function Lp(t,e){"$regex"in e?e.$regex.push(t):e.$regex=[t]}function tf(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=Hr(t[n].$and));var r=t[e];typeof r=="object"&&tf(r)}return t}function nf(t,e){for(var n in t){n==="$and"&&(e=!0);var r=t[n];typeof r=="object"&&(e=nf(r,e))}return e}function Pp(t){var e=Ye(t);nf(e,!1)&&(e=tf(e),"$and"in e&&(e=Hr(e.$and))),["$or","$nor"].forEach(function(o){o in e&&e[o].forEach(function(f){for(var g=Object.keys(f),w=0;w<g.length;w++){var A=g[w],h=f[A];(typeof h!="object"||h===null)&&(f[A]={$eq:h})}})}),"$not"in e&&(e.$not=Hr([e.$not]));for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],s=e[i];(typeof s!="object"||s===null)&&(s={$eq:s}),e[i]=s}return ia(e),e}function ia(t){Object.keys(t).forEach(function(e){var n=t[e];Array.isArray(n)?n.forEach(function(r){r&&typeof r=="object"&&ia(r)}):e==="$ne"?t.$ne=[n]:e==="$regex"?t.$regex=[n]:n&&typeof n=="object"&&ia(n)})}function Ip(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}function jp(t,e,n){var r=Ip(t,e,n);return r+t}var rf=-324,sa=3,aa="";function He(t,e){if(t===e)return 0;t=Fn(t),e=Fn(e);var n=oa(t),r=oa(e);if(n-r!==0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return Up(t,e)}return Array.isArray(t)?Mp(t,e):Kp(t,e)}function Fn(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=Fn(e[r])}else{if(t instanceof Date)return t.toJSON();if(t!==null){t={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s<"u"&&(t[i]=Fn(s))}}}}return t}function Rp(t){if(t!==null)switch(typeof t){case"boolean":return t?1:0;case"number":return zp(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,s="";if(e)for(;++r<i;)s+=Dt(n[r]);else for(;++r<i;){var o=n[r];s+=Dt(o)+Dt(t[o])}return s}return""}function Dt(t){var e="\0";return t=Fn(t),oa(t)+aa+Rp(t)+e}function Bp(t,e){var n=e,r,i=t[e]==="1";if(i)r=0,e++;else{var s=t[e]==="0";e++;var o="",f=t.substring(e,e+sa),g=parseInt(f,10)+rf;for(s&&(g=-g),e+=sa;;){var w=t[e];if(w==="\0")break;o+=w,e++}o=o.split("."),o.length===1?r=parseInt(o,10):r=parseFloat(o[0]+"."+o[1]),s&&(r=r-10),g!==0&&(r=parseFloat(r+"e"+g))}return{num:r,length:e-n}}function Np(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,s=r.index;if(Array.isArray(i))i.push(n);else if(s===t.length-2){var o=t.pop();i[o]=n}else t.push(n)}}function Fp(t){for(var e=[],n=[],r=0;;){var i=t[r++];if(i==="\0"){if(e.length===1)return e.pop();Np(e,n);continue}switch(i){case"1":e.push(null);break;case"2":e.push(t[r]==="1"),r++;break;case"3":var s=Bp(t,r);e.push(s.num),r+=s.length;break;case"4":for(var o="";;){var f=t[r];if(f==="\0")break;o+=f,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(o);break;case"5":var g={element:[],index:e.length};e.push(g.element),n.push(g);break;case"6":var w={element:{},index:e.length};e.push(w.element),n.push(w);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function Mp(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=He(t[r],e[r]);if(i!==0)return i}return t.length===e.length?0:t.length>e.length?1:-1}function Up(t,e){return t===e?0:t>e?1:-1}function Kp(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),s=0;s<i;s++){var o=He(n[s],r[s]);if(o!==0||(o=He(t[n[s]],e[r[s]]),o!==0))return o}return n.length===r.length?0:n.length>r.length?1:-1}function oa(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);if(~n)return t===null?1:Array.isArray(t)?5:n<3?n+2:n+3;if(Array.isArray(t))return 5}function zp(t){if(t===0)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,i=r?"0":"2",s=(r?-n:n)-rf,o=jp(s.toString(),"0",sa);i+=aa+o;var f=Math.abs(parseFloat(e[0]));r&&(f=10-f);var g=f.toFixed(20);return g=g.replace(/\.?0+$/,""),i+=aa+g,i}function Hp(t){function e(n){return t.map(function(r){var i=ef(r),s=oo(i),o=ao(n,s);return o})}return function(n,r){var i=e(n.doc),s=e(r.doc),o=He(i,s);return o!==0?o:Cp(n.doc._id,r.doc._id)}}function Gp(t,e,n){if(t=t.filter(function(o){return hr(o.doc,e.selector,n)}),e.sort){var r=Hp(e.sort);t=t.sort(r),typeof e.sort[0]!="string"&&Op(e.sort[0])==="desc"&&(t=t.reverse())}if("limit"in e||"skip"in e){var i=e.skip||0,s=("limit"in e?e.limit:t.length)+i;t=t.slice(i,s)}return t}function hr(t,e,n){return n.every(function(r){var i=e[r],s=oo(r),o=ao(t,s);return Vl(r)?Wp(r,i,t):Ti(i,t,s,o)})}function Ti(t,e,n,r){return t?typeof t=="object"?Object.keys(t).every(function(i){var s=t[i];if(i.indexOf("$")===0)return yc(i,e,s,n,r);var o=oo(i);if(r===void 0&&typeof s!="object"&&o.length>0)return!1;var f=ao(r,o);return typeof s=="object"?Ti(s,e,n,f):yc("$eq",e,s,o,f)}):t===r:!0}function Wp(t,e,n){return t==="$or"?e.some(function(r){return hr(n,r,Object.keys(r))}):t==="$not"?!hr(n,e,Object.keys(e)):!e.find(function(r){return hr(n,r,Object.keys(r))})}function yc(t,e,n,r,i){if(!bc[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return bc[t](e,n,r,i)}function Lr(t){return typeof t<"u"&&t!==null}function En(t){return typeof t<"u"}function Jp(t,e){if(typeof t!="number"||parseInt(t,10)!==t)return!1;var n=e[0],r=e[1];return t%n===r}function wc(t,e){return e.some(function(n){return t instanceof Array?t.some(function(r){return He(n,r)===0}):He(n,t)===0})}function Qp(t,e){return e.every(function(n){return t.some(function(r){return He(n,r)===0})})}function Xp(t,e){return t.length===e}function Yp(t,e){var n=new RegExp(e);return n.test(t)}function Zp(t,e){switch(e){case"null":return t===null;case"boolean":return typeof t=="boolean";case"number":return typeof t=="number";case"string":return typeof t=="string";case"array":return t instanceof Array;case"object":return{}.toString.call(t)==="[object Object]"}}var bc={$elemMatch:function(t,e,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return hr(i,e,Object.keys(e))}):r.some(function(i){return Ti(e,t,n,i)})},$allMatch:function(t,e,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return hr(i,e,Object.keys(e))}):r.every(function(i){return Ti(e,t,n,i)})},$eq:function(t,e,n,r){return En(r)&&He(r,e)===0},$gte:function(t,e,n,r){return En(r)&&He(r,e)>=0},$gt:function(t,e,n,r){return En(r)&&He(r,e)>0},$lte:function(t,e,n,r){return En(r)&&He(r,e)<=0},$lt:function(t,e,n,r){return En(r)&&He(r,e)<0},$exists:function(t,e,n,r){return e?En(r):!En(r)},$mod:function(t,e,n,r){return Lr(r)&&Jp(r,e)},$ne:function(t,e,n,r){return e.every(function(i){return He(r,i)!==0})},$in:function(t,e,n,r){return Lr(r)&&wc(r,e)},$nin:function(t,e,n,r){return Lr(r)&&!wc(r,e)},$size:function(t,e,n,r){return Lr(r)&&Array.isArray(r)&&Xp(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&Qp(r,e)},$regex:function(t,e,n,r){return Lr(r)&&typeof r=="string"&&e.every(function(i){return Yp(r,i)})},$type:function(t,e,n,r){return Zp(r,e)}};function Vp(t,e){if(typeof e!="object")throw new Error("Selector error: expected a JSON object");e=Pp(e);var n={doc:t},r=Gp([n],{selector:e},Object.keys(e));return r&&r.length===1}function em(t){return Ya(`"use strict";
return `+t+";",{})}function tm(t){var e=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join(`
`);return Ya(e,{})}function nm(t,e){if(t.selector&&t.filter&&t.filter!=="_selector"){var n=typeof t.filter=="string"?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function rm(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&typeof t.filter=="string"&&(t.filter==="_view"?t.view=fc(t.view):t.filter=fc(t.filter))}function im(t,e){return e.filter&&typeof e.filter=="string"&&!e.doc_ids&&!zt(t.db)}function sm(t,e){var n=e.complete;if(e.filter==="_view"){if(!e.view||typeof e.view!="string"){var r=be(Mi,"`view` filter parameter not found or invalid.");return n(r)}var i=ra(e.view);t.db.get("_design/"+i[0],function(o,f){if(t.isCancelled)return n(null,{status:"cancelled"});if(o)return n(Ar(o));var g=f&&f.views&&f.views[i[1]]&&f.views[i[1]].map;if(!g)return n(be(At,f.views?"missing json key: "+i[1]:"missing json key: views"));e.filter=tm(g),t.doChanges(e)})}else if(e.selector)e.filter=function(o){return Vp(o,e.selector)},t.doChanges(e);else{var s=ra(e.filter);t.db.get("_design/"+s[0],function(o,f){if(t.isCancelled)return n(null,{status:"cancelled"});if(o)return n(Ar(o));var g=f&&f.filters&&f.filters[s[1]];if(!g)return n(be(At,f&&f.filters?"missing json key: "+s[1]:"missing json key: filters"));e.filter=em(g),t.doChanges(e)})}}function am(t){t._changesFilterPlugin={validate:nm,normalize:rm,shouldFilter:im,filter:sm}}we.plugin(am);we.version=Sp;function sf(t){return t.reduce(function(e,n){return e[n]=!0,e},{})}var om=sf(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),um=sf(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function Ac(t){if(!/^\d+-/.test(t))return be(Nl);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function cm(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],s=1,o=r.length;s<o;s++)i=[r[s],{status:"missing"},[i]];return[{pos:n,ids:i}]}function af(t,e,n){n||(n={deterministic_revs:!0});var r,i,s,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=Ui()),i=Hl(t,n.deterministic_revs),t._rev){if(s=Ac(t._rev),s.error)return s;t._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[i,o,[]]]]}],r=s.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],r=1;else if(t._revisions&&(t._rev_tree=cm(t._revisions,o),r=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if(s=Ac(t._rev),s.error)return s;r=s.prefix,i=s.id,t._rev_tree=[{pos:r,ids:[i,o,[]]}]}Fl(t._id),t._rev=r+"-"+i;var f={metadata:{},data:{}};for(var g in t)if(Object.prototype.hasOwnProperty.call(t,g)){var w=g[0]==="_";if(w&&!om[g]){var A=be(lc,g);throw A.message=lc.message+": "+g,A}else w&&!um[g]?f.metadata[g.slice(1)]=t[g]:f.data[g]=t[g]}return f}function lm(t){try{return Za(t)}catch{var e=be(Bl,"Attachment is not a valid base64 string");return{error:e}}}function fm(t,e,n){var r=lm(t.data);if(r.error)return n(r.error);t.length=r.length,e==="blob"?t.data=eo(r,t.content_type):e==="base64"?t.data=Qr(r):t.data=r,ro(r,function(i){t.digest="md5-"+i,n()})}function dm(t,e,n){ro(t.data,function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,e==="binary"?Kl(t.data,function(i){t.data=i,n()}):e==="base64"?no(t.data,function(i){t.data=i,n()}):n()})}function hm(t,e,n){if(t.stub)return n();typeof t.data=="string"?fm(t,e,n):dm(t,e,n)}function vm(t,e,n){if(!t.length)return n();var r=0,i;t.forEach(function(o){var f=o.data&&o.data._attachments?Object.keys(o.data._attachments):[],g=0;if(!f.length)return s();function w(h){i=h,g++,g===f.length&&s()}for(var A in o.data._attachments)Object.prototype.hasOwnProperty.call(o.data._attachments,A)&&hm(o.data._attachments[A],e,w)});function s(){r++,t.length===r&&(i?n(i):n())}}function gm(t,e,n,r,i,s,o,f){if(ap(e.rev_tree,n.metadata.rev)&&!f)return r[i]=n,s();var g=e.winningRev||Bn(e),w="deleted"in e?e.deleted:Vt(e,g),A="deleted"in n.metadata?n.metadata.deleted:Vt(n.metadata),h=/^1-/.test(n.metadata.rev);if(w&&!A&&f&&h){var y=n.data;y._rev=g,y._id=n.metadata.id,n=af(y,f)}var E=Jl(e.rev_tree,n.metadata.rev_tree[0],t),S=f&&(w&&A&&E.conflicts!=="new_leaf"||!w&&E.conflicts!=="new_leaf"||w&&!A&&E.conflicts==="new_branch");if(S){var O=be(br);return r[i]=O,s()}var b=n.metadata.rev;n.metadata.rev_tree=E.tree,n.stemmedRevs=E.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var p=Bn(n.metadata),l=Vt(n.metadata,p),u=w===l?0:w<l?-1:1,c;b===p?c=l:c=Vt(n.metadata,b),o(n,p,l,c,!0,u,i,s)}function pm(t){return t.metadata.rev_tree[0].ids[1].status==="missing"}function mm(t,e,n,r,i,s,o,f,g){t=t||1e3;function w(O,b,p){var l=Bn(O.metadata),u=Vt(O.metadata,l);if("was_delete"in f&&u)return s[b]=be(At,"deleted"),p();var c=A&&pm(O);if(c){var d=be(br);return s[b]=d,p()}var v=u?0:1;o(O,l,u,u,!1,v,b,p)}var A=f.new_edits,h=new ft,y=0,E=e.length;function S(){++y===E&&g&&g()}e.forEach(function(O,b){if(O._id&&In(O._id)){var p=O._deleted?"_removeLocal":"_putLocal";n[p](O,{ctx:i},function(u,c){s[b]=u||c,S()});return}var l=O.metadata.id;h.has(l)?(E--,h.get(l).push([O,b])):h.set(l,[[O,b]])}),h.forEach(function(O,b){var p=0;function l(){++p<O.length?u():S()}function u(){var c=O[p],d=c[0],v=c[1];if(r.has(b))gm(t,r.get(b),d,s,v,l,o,A);else{var D=Jl([],d.metadata.rev_tree[0],t);d.metadata.rev_tree=D.tree,d.stemmedRevs=D.stemmedRevs||[],w(d,v,l)}}u()})}var _m=5,We="document-store",nt="by-sequence",$t="attach-store",kn="attach-seq-store",ut="meta-store",Bt="local-store",ua="detect-blob-support";function ym(t){try{return JSON.parse(t)}catch{return Bi.parse(t)}}function wm(t){try{return JSON.stringify(t)}catch{return Bi.stringify(t)}}function Ut(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(be(Qa,n,e.type))}}function ca(t,e,n){return{data:wm(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function Dn(t){if(!t)return null;var e=ym(t.data);return e.winningRev=t.winningRev,e.deleted=t.deletedOrLocal==="1",e.seq=t.seq,e}function ki(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function of(t,e,n,r){n?r(t?typeof t!="string"?t:to(t,e):Va([""],{type:e})):t?typeof t!="string"?Ul(t,function(i){r(Qr(i))}):r(t):r("")}function uf(t,e,n,r){var i=Object.keys(t._attachments||{});if(!i.length)return r&&r();var s=0;function o(){++s===i.length&&r&&r()}function f(g,w){var A=g._attachments[w],h=A.digest,y=n.objectStore($t).get(h);y.onsuccess=function(E){A.body=E.target.result.body,o()}}i.forEach(function(g){e.attachments&&e.include_docs?f(t,g):(t._attachments[g].stub=!0,o())})}function la(t,e){return Promise.all(t.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var s=n.doc._attachments[i];if("body"in s){var o=s.body,f=s.content_type;return new Promise(function(g){of(o,f,e,function(w){n.doc._attachments[i]=Rn(Jr(s,["digest","content_type"]),{data:w}),g()})})}}))}}))}function cf(t,e,n){var r=[],i=n.objectStore(nt),s=n.objectStore($t),o=n.objectStore(kn),f=t.length;function g(){f--,f||w()}function w(){r.length&&r.forEach(function(A){var h=o.index("digestSeq").count(IDBKeyRange.bound(A+"::",A+"::ï¿¿",!1,!1));h.onsuccess=function(y){var E=y.target.result;E||s.delete(A)}})}t.forEach(function(A){var h=i.index("_doc_id_rev"),y=e+"::"+A;h.getKey(y).onsuccess=function(E){var S=E.target.result;if(typeof S!="number")return g();i.delete(S);var O=o.index("seq").openCursor(IDBKeyRange.only(S));O.onsuccess=function(b){var p=b.target.result;if(p){var l=p.value.digestSeq.split("::")[0];r.push(l),o.delete(p.primaryKey),p.continue()}else g()}}})}function qt(t,e,n){try{return{txn:t.transaction(e,n)}}catch(r){return{error:r}}}var Mr=new kg;function bm(t,e,n,r,i,s){for(var o=e.docs,f,g,w,A,h,y,E,S,O=0,b=o.length;O<b;O++){var p=o[O];p._id&&In(p._id)||(p=o[O]=af(p,n.new_edits,t),p.error&&!E&&(E=p))}if(E)return s(E);var l=!1,u=0,c=new Array(o.length),d=new ft,v=!1,D=r._meta.blobSupport?"blob":"base64";vm(o,D,function(q){if(q)return s(q);I()});function I(){var q=[We,nt,$t,Bt,kn,ut],j=qt(i,q,"readwrite");if(j.error)return s(j.error);f=j.txn,f.onabort=Ut(s),f.ontimeout=Ut(s),f.oncomplete=X,g=f.objectStore(We),w=f.objectStore(nt),A=f.objectStore($t),h=f.objectStore(kn),y=f.objectStore(ut),y.get(ut).onsuccess=function(K){S=K.target.result,U()},Z(function(K){if(K)return v=!0,s(K);ee()})}function k(){l=!0,U()}function M(){mm(t.revs_limit,o,r,d,f,c,Q,n,k)}function U(){!S||!l||(S.docCount+=u,y.put(S))}function ee(){if(!o.length)return;var q=0;function j(){++q===o.length&&M()}function K(N){var G=Dn(N.target.result);G&&d.set(G.id,G),j()}for(var J=0,F=o.length;J<F;J++){var T=o[J];if(T._id&&In(T._id)){j();continue}var L=g.get(T.metadata.id);L.onsuccess=K}}function X(){v||(Mr.notify(r._meta.name),s(null,c))}function H(q,j){var K=A.get(q);K.onsuccess=function(J){if(J.target.result)j();else{var F=be(Rg,"unknown stub attachment with digest "+q);F.status=412,j(F)}}}function Z(q){var j=[];if(o.forEach(function(T){T.data&&T.data._attachments&&Object.keys(T.data._attachments).forEach(function(L){var N=T.data._attachments[L];N.stub&&j.push(N.digest)})}),!j.length)return q();var K=0,J;function F(){++K===j.length&&q(J)}j.forEach(function(T){H(T,function(L){L&&!J&&(J=L),F()})})}function Q(q,j,K,J,F,T,L,N){q.metadata.winningRev=j,q.metadata.deleted=K;var G=q.data;G._id=q.metadata.id,G._rev=q.metadata.rev,J&&(G._deleted=!0);var W=G._attachments&&Object.keys(G._attachments).length;if(W)return $(q,j,K,F,L,N);u+=T,U(),te(q,j,K,F,L,N)}function te(q,j,K,J,F,T){var L=q.data,N=q.metadata;L._doc_id_rev=N.id+"::"+N.rev,delete L._id,delete L._rev;function G(de){var Oe=q.stemmedRevs||[];J&&r.auto_compaction&&(Oe=Oe.concat(Vg(q.metadata))),Oe&&Oe.length&&cf(Oe,q.metadata.id,f),N.seq=de.target.result;var je=ca(N,j,K),re=g.put(je);re.onsuccess=se}function W(de){de.preventDefault(),de.stopPropagation();var Oe=w.index("_doc_id_rev"),je=Oe.getKey(L._doc_id_rev);je.onsuccess=function(re){var ue=w.put(L,re.target.result);ue.onsuccess=G}}function se(){c[F]={ok:!0,id:N.id,rev:N.rev},d.set(q.metadata.id,q.metadata),C(q,N.seq,T)}var ce=w.put(L);ce.onsuccess=G,ce.onerror=W}function $(q,j,K,J,F,T){var L=q.data,N=0,G=Object.keys(L._attachments);function W(){N===G.length&&te(q,j,K,J,F,T)}function se(){N++,W()}G.forEach(function(ce){var de=q.data._attachments[ce];if(de.stub)N++,W();else{var Oe=de.data;delete de.data,de.revpos=parseInt(j,10);var je=de.digest;P(je,Oe,se)}})}function C(q,j,K){var J=0,F=Object.keys(q.data._attachments||{});if(!F.length)return K();function T(){++J===F.length&&K()}function L(G){var W=q.data._attachments[G].digest,se=h.put({seq:j,digestSeq:W+"::"+j});se.onsuccess=T,se.onerror=function(ce){ce.preventDefault(),ce.stopPropagation(),T()}}for(var N=0;N<F.length;N++)L(F[N])}function P(q,j,K){var J=A.count(q);J.onsuccess=function(F){var T=F.target.result;if(T)return K();var L={digest:q,body:j},N=A.put(L);N.onsuccess=K}}}function lf(t,e,n,r,i){r===-1&&(r=1e3);var s=typeof t.getAll=="function"&&typeof t.getAllKeys=="function"&&r>1&&!n,o,f,g;function w(E){f=E.target.result,o&&i(o,f,g)}function A(E){o=E.target.result,f&&i(o,f,g)}function h(){if(!o.length)return i();var E=o[o.length-1],S;if(e&&e.upper)try{S=IDBKeyRange.bound(E,e.upper,!0,e.upperOpen)}catch(O){if(O.name==="DataError"&&O.code===0)return i()}else S=IDBKeyRange.lowerBound(E,!0);e=S,o=null,f=null,t.getAll(e,r).onsuccess=w,t.getAllKeys(e,r).onsuccess=A}function y(E){var S=E.target.result;if(!S)return i();i([S.key],[S.value],S)}s?(g={continue:h},t.getAll(e,r).onsuccess=w,t.getAllKeys(e,r).onsuccess=A):n?t.openCursor(e,"prev").onsuccess=y:t.openCursor(e).onsuccess=y}function Am(t,e,n){if(typeof t.getAll=="function"){t.getAll(e).onsuccess=n;return}var r=[];function i(s){var o=s.target.result;o?(r.push(o.value),o.continue()):n({target:{result:r}})}t.openCursor(e).onsuccess=i}function $m(t,e,n){var r=new Array(t.length),i=0;t.forEach(function(s,o){e.get(s).onsuccess=function(f){f.target.result?r[o]=f.target.result:r[o]={key:s,error:"not_found"},i++,i===t.length&&n(t,r,{})}})}function Em(t,e,n,r,i){try{if(t&&e)return i?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return i?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return i?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(s){return{error:s}}return null}function Sm(t,e,n){var r="startkey"in t?t.startkey:!1,i="endkey"in t?t.endkey:!1,s="key"in t?t.key:!1,o="keys"in t?t.keys:!1,f=t.skip||0,g=typeof t.limit=="number"?t.limit:-1,w=t.inclusive_end!==!1,A,h;if(!o&&(A=Em(r,i,w,s,t.descending),h=A&&A.error,h&&!(h.name==="DataError"&&h.code===0)))return n(be(Qa,h.name,h.message));var y=[We,nt,ut];t.attachments&&y.push($t);var E=qt(e,y,"readonly");if(E.error)return n(E.error);var S=E.txn;S.oncomplete=X,S.onabort=Ut(n);var O=S.objectStore(We),b=S.objectStore(nt),p=S.objectStore(ut),l=b.index("_doc_id_rev"),u=[],c,d;p.get(ut).onsuccess=function(H){c=H.target.result.docCount},t.update_seq&&v(b,function(H){H.target.result&&H.target.result.length>0&&(d=H.target.result[0])});function v(H,Z){function Q(te){var $=te.target.result,C=void 0;return $&&$.key&&(C=$.key),Z({target:{result:[C]}})}H.openCursor(null,"prev").onsuccess=Q}function D(H,Z,Q){var te=H.id+"::"+Q;l.get(te).onsuccess=function(C){if(Z.doc=ki(C.target.result)||{},t.conflicts){var P=so(H);P.length&&(Z.doc._conflicts=P)}uf(Z.doc,t,S)}}function I(H,Z){var Q={id:Z.id,key:Z.id,value:{rev:H}},te=Z.deleted;te?o&&(u.push(Q),Q.value.deleted=!0,Q.doc=null):f--<=0&&(u.push(Q),t.include_docs&&D(Z,Q,H))}function k(H){for(var Z=0,Q=H.length;Z<Q&&u.length!==g;Z++){var te=H[Z];if(te.error&&o){u.push(te);continue}var $=Dn(te),C=$.winningRev;I(C,$)}}function M(H,Z,Q){Q&&(k(Z),u.length<g&&Q.continue())}function U(H){var Z=H.target.result;t.descending&&(Z=Z.reverse()),k(Z)}function ee(){var H={total_rows:c,offset:t.skip,rows:u};t.update_seq&&d!==void 0&&(H.update_seq=d),n(null,H)}function X(){t.attachments?la(u,t.binary).then(ee):ee()}if(!(h||g===0)){if(o)return $m(t.keys,O,M);if(g===-1)return Am(O,A,U);lf(O,A,t.descending,g+f,M)}}function Cm(t){return new Promise(function(e){var n=Va([""]),r=t.objectStore(ua).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);e(s||!i||parseInt(i[1],10)>=43)},r.onerror=t.onabort=function(i){i.preventDefault(),i.stopPropagation(),e(!1)}}).catch(function(){return!1})}function xm(t,e){var n=t.objectStore(We).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(r){e(r.target.result)}}var fa=!1,da=[];function Om(t,e,n,r){try{t(e,n)}catch(i){r.emit("error",i)}}function $c(){fa||!da.length||(fa=!0,da.shift()())}function Tm(t,e,n){da.push(function(){t(function(s,o){Om(e,s,o,n),fa=!1,Gt(function(){$c()})})}),$c()}function km(t,e,n,r){if(t=Ye(t),t.continuous){var i=n+":"+Ui();return Mr.addListener(n,i,e,t),Mr.notify(n),{cancel:function(){Mr.removeListener(n,i)}}}var s=t.doc_ids&&new wr(t.doc_ids);t.since=t.since||0;var o=t.since,f="limit"in t?t.limit:-1;f===0&&(f=1);var g=[],w=0,A=Xa(t),h=new ft,y,E,S,O;function b(I,k,M){if(!M||!I.length)return;var U=new Array(I.length),ee=new Array(I.length);function X(Q,te){var $=t.processChange(te,Q,t);o=$.seq=Q.seq;var C=A($);return typeof C=="object"?Promise.reject(C):C?(w++,t.return_docs&&g.push($),t.attachments&&t.include_docs?new Promise(function(P){uf(te,t,y,function(){la([$],t.binary).then(function(){P($)})})}):Promise.resolve($)):Promise.resolve()}function H(){for(var Q=[],te=0,$=U.length;te<$&&w!==f;te++){var C=U[te];if(C){var P=ee[te];Q.push(X(P,C))}}Promise.all(Q).then(function(q){for(var j=0,K=q.length;j<K;j++)q[j]&&t.onChange(q[j])}).catch(t.complete),w!==f&&M.continue()}var Z=0;k.forEach(function(Q,te){var $=ki(Q),C=I[te];l($,C,function(P,q){ee[te]=P,U[te]=q,++Z===I.length&&H()})})}function p(I,k,M,U){if(M.seq!==k)return U();if(M.winningRev===I._rev)return U(M,I);var ee=I._id+"::"+M.winningRev,X=O.get(ee);X.onsuccess=function(H){U(M,ki(H.target.result))}}function l(I,k,M){if(s&&!s.has(I._id))return M();var U=h.get(I._id);if(U)return p(I,k,U,M);S.get(I._id).onsuccess=function(ee){U=Dn(ee.target.result),h.set(I._id,U),p(I,k,U,M)}}function u(){t.complete(null,{results:g,last_seq:o})}function c(){!t.continuous&&t.attachments?la(g).then(u):u()}var d=[We,nt];t.attachments&&d.push($t);var v=qt(r,d,"readonly");if(v.error)return t.complete(v.error);y=v.txn,y.onabort=Ut(t.complete),y.oncomplete=c,E=y.objectStore(nt),S=y.objectStore(We),O=E.index("_doc_id_rev");var D=t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null;lf(E,D,t.descending,f,b)}var or=new ft,Ls,Ps=new ft;function ff(t,e){var n=this;Tm(function(r){Dm(n,t,r)},e,n.constructor)}function Dm(t,e,n){var r=e.name,i=null,s=null;t._meta=null;function o(b){return function(p,l){p&&p instanceof Error&&!p.reason&&s&&(p.reason=s),b(p,l)}}function f(b){var p=b.createObjectStore(We,{keyPath:"id"});b.createObjectStore(nt,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),b.createObjectStore($t,{keyPath:"digest"}),b.createObjectStore(ut,{keyPath:"id",autoIncrement:!1}),b.createObjectStore(ua),p.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),b.createObjectStore(Bt,{keyPath:"_id"});var l=b.createObjectStore(kn,{autoIncrement:!0});l.createIndex("seq","seq"),l.createIndex("digestSeq","digestSeq",{unique:!0})}function g(b,p){var l=b.objectStore(We);l.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),l.openCursor().onsuccess=function(u){var c=u.target.result;if(c){var d=c.value,v=Vt(d);d.deletedOrLocal=v?"1":"0",l.put(d),c.continue()}else p()}}function w(b){b.createObjectStore(Bt,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function A(b,p){var l=b.objectStore(Bt),u=b.objectStore(We),c=b.objectStore(nt),d=u.openCursor();d.onsuccess=function(v){var D=v.target.result;if(D){var I=D.value,k=I.id,M=In(k),U=Bn(I);if(M){var ee=k+"::"+U,X=k+"::",H=k+"::~",Z=c.index("_doc_id_rev"),Q=IDBKeyRange.bound(X,H,!1,!1),te=Z.openCursor(Q);te.onsuccess=function($){if(te=$.target.result,!te)u.delete(D.primaryKey),D.continue();else{var C=te.value;C._doc_id_rev===ee&&l.put(C),c.delete(te.primaryKey),te.continue()}}}else D.continue()}else p&&p()}}function h(b){var p=b.createObjectStore(kn,{autoIncrement:!0});p.createIndex("seq","seq"),p.createIndex("digestSeq","digestSeq",{unique:!0})}function y(b,p){var l=b.objectStore(nt),u=b.objectStore($t),c=b.objectStore(kn),d=u.count();d.onsuccess=function(v){var D=v.target.result;if(!D)return p();l.openCursor().onsuccess=function(I){var k=I.target.result;if(!k)return p();for(var M=k.value,U=k.primaryKey,ee=Object.keys(M._attachments||{}),X={},H=0;H<ee.length;H++){var Z=M._attachments[ee[H]];X[Z.digest]=!0}var Q=Object.keys(X);for(H=0;H<Q.length;H++){var te=Q[H];c.put({seq:U,digestSeq:te+"::"+U})}k.continue()}}}function E(b){function p(d){return d.data?Dn(d):(d.deleted=d.deletedOrLocal==="1",d)}var l=b.objectStore(nt),u=b.objectStore(We),c=u.openCursor();c.onsuccess=function(d){var v=d.target.result;if(!v)return;var D=p(v.value);D.winningRev=D.winningRev||Bn(D);function I(){var M=D.id+"::",U=D.id+"::ï¿¿",ee=l.index("_doc_id_rev").openCursor(IDBKeyRange.bound(M,U)),X=0;ee.onsuccess=function(H){var Z=H.target.result;if(!Z)return D.seq=X,k();var Q=Z.primaryKey;Q>X&&(X=Q),Z.continue()}}function k(){var M=ca(D,D.winningRev,D.deleted),U=u.put(M);U.onsuccess=function(){v.continue()}}if(D.seq)return k();I()}}t._remote=!1,t.type=function(){return"idb"},t._id=Il(function(b){b(null,t._meta.instanceId)}),t._bulkDocs=function(p,l,u){bm(e,p,l,t,i,o(u))},t._get=function(p,l,u){var c,d,v,D=l.ctx;if(!D){var I=qt(i,[We,nt,$t],"readonly");if(I.error)return u(I.error);D=I.txn}function k(){u(v,{doc:c,metadata:d,ctx:D})}D.objectStore(We).get(p).onsuccess=function(M){if(d=Dn(M.target.result),!d)return v=be(At,"missing"),k();var U;if(l.rev)U=l.latest?up(l.rev,d):l.rev;else{U=d.winningRev;var ee=Vt(d);if(ee)return v=be(At,"deleted"),k()}var X=D.objectStore(nt),H=d.id+"::"+U;X.index("_doc_id_rev").get(H).onsuccess=function(Z){if(c=Z.target.result,c&&(c=ki(c)),!c)return v=be(At,"missing"),k();k()}}},t._getAttachment=function(b,p,l,u,c){var d;if(u.ctx)d=u.ctx;else{var v=qt(i,[We,nt,$t],"readonly");if(v.error)return c(v.error);d=v.txn}var D=l.digest,I=l.content_type;d.objectStore($t).get(D).onsuccess=function(k){var M=k.target.result.body;of(M,I,u.binary,function(U){c(null,U)})}},t._info=function(p){var l,u,c=qt(i,[ut,nt],"readonly");if(c.error)return p(c.error);var d=c.txn;d.objectStore(ut).get(ut).onsuccess=function(v){u=v.target.result.docCount},d.objectStore(nt).openCursor(null,"prev").onsuccess=function(v){var D=v.target.result;l=D?D.key:0},d.oncomplete=function(){p(null,{doc_count:u,update_seq:l,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(p,l){Sm(p,i,o(l))},t._changes=function(p){return km(p,t,r,i)},t._close=function(b){i.close(),or.delete(r),b()},t._getRevisionTree=function(b,p){var l=qt(i,[We],"readonly");if(l.error)return p(l.error);var u=l.txn,c=u.objectStore(We).get(b);c.onsuccess=function(d){var v=Dn(d.target.result);v?p(null,v.rev_tree):p(be(At))}},t._doCompaction=function(b,p,l){var u=[We,nt,$t,kn],c=qt(i,u,"readwrite");if(c.error)return l(c.error);var d=c.txn,v=d.objectStore(We);v.get(b).onsuccess=function(D){var I=Dn(D.target.result);Nn(I.rev_tree,function(U,ee,X,H,Z){var Q=ee+"-"+X;p.indexOf(Q)!==-1&&(Z.status="missing")}),cf(p,b,d);var k=I.winningRev,M=I.deleted;d.objectStore(We).put(ca(I,k,M))},d.onabort=Ut(l),d.oncomplete=function(){l()}},t._getLocal=function(b,p){var l=qt(i,[Bt],"readonly");if(l.error)return p(l.error);var u=l.txn,c=u.objectStore(Bt).get(b);c.onerror=Ut(p),c.onsuccess=function(d){var v=d.target.result;v?(delete v._doc_id_rev,p(null,v)):p(be(At))}},t._putLocal=function(b,p,l){typeof p=="function"&&(l=p,p={}),delete b._revisions;var u=b._rev,c=b._id;u?b._rev="0-"+(parseInt(u.split("-")[1],10)+1):b._rev="0-1";var d=p.ctx,v;if(!d){var D=qt(i,[Bt],"readwrite");if(D.error)return l(D.error);d=D.txn,d.onerror=Ut(l),d.oncomplete=function(){v&&l(null,v)}}var I=d.objectStore(Bt),k;u?(k=I.get(c),k.onsuccess=function(M){var U=M.target.result;if(!U||U._rev!==u)l(be(br));else{var ee=I.put(b);ee.onsuccess=function(){v={ok:!0,id:b._id,rev:b._rev},p.ctx&&l(null,v)}}}):(k=I.add(b),k.onerror=function(M){l(be(br)),M.preventDefault(),M.stopPropagation()},k.onsuccess=function(){v={ok:!0,id:b._id,rev:b._rev},p.ctx&&l(null,v)})},t._removeLocal=function(b,p,l){typeof p=="function"&&(l=p,p={});var u=p.ctx;if(!u){var c=qt(i,[Bt],"readwrite");if(c.error)return l(c.error);u=c.txn,u.oncomplete=function(){d&&l(null,d)}}var d,v=b._id,D=u.objectStore(Bt),I=D.get(v);I.onerror=Ut(l),I.onsuccess=function(k){var M=k.target.result;!M||M._rev!==b._rev?l(be(At)):(D.delete(v),d={ok:!0,id:v,rev:"0-0"},p.ctx&&l(null,d))}},t._destroy=function(b,p){Mr.removeAllListeners(r);var l=Ps.get(r);l&&l.result&&(l.result.close(),or.delete(r));var u=indexedDB.deleteDatabase(r);u.onsuccess=function(){Ps.delete(r),Ci()&&r in localStorage&&delete localStorage[r],p(null,{ok:!0})},u.onerror=Ut(p)};var S=or.get(r);if(S)return i=S.idb,t._meta=S.global,Gt(function(){n(null,t)});var O=indexedDB.open(r,_m);Ps.set(r,O),O.onupgradeneeded=function(b){var p=b.target.result;if(b.oldVersion<1)return f(p);var l=b.currentTarget.transaction;b.oldVersion<3&&w(p),b.oldVersion<4&&h(p);var u=[g,A,y,E],c=b.oldVersion;function d(){var v=u[c-1];c++,v&&v(l,d)}d()},O.onsuccess=function(b){i=b.target.result,i.onversionchange=function(){i.close(),or.delete(r)},i.onabort=function(k){Ct("error","Database has a global failure",k.target.error),s=k.target.error,i.close(),or.delete(r)};var p=i.transaction([ut,ua,We],"readwrite"),l=!1,u,c,d,v;function D(){typeof d>"u"||!l||(t._meta={name:r,instanceId:v,blobSupport:d},or.set(r,{idb:i,global:t._meta}),n(null,t))}function I(){if(!(typeof c>"u"||typeof u>"u")){var k=r+"_id";k in u?v=u[k]:u[k]=v=Ui(),u.docCount=c,p.objectStore(ut).put(u)}}p.objectStore(ut).get(ut).onsuccess=function(k){u=k.target.result||{id:ut},I()},xm(p,function(k){c=k,I()}),Ls||(Ls=Cm(p)),Ls.then(function(k){d=k,D()}),p.oncomplete=function(){l=!0,D()},p.onabort=Ut(n)},O.onerror=function(b){var p=b.target.error&&b.target.error.message;p?p.indexOf("stored database is a higher version")!==-1&&(p=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):p="Failed to open indexedDB, are you in private browsing mode?",Ct("error",p),n(be(Qa,p))}}ff.valid=function(){try{return typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}};function qm(t){t.adapter("idb",ff,!0)}function Lm(t,e){return new Promise(function(n,r){var i=0,s=0,o=0,f=t.length,g;function w(){i++,t[s++]().then(h,y)}function A(){++o===f?g?r(g):n():E()}function h(){i--,A()}function y(S){i--,g=g||S,A()}function E(){for(;i<e&&s<f;)w()}E()})}const Pm=25,Im=50,mi=5e3,jm=1e4;let Is={};function js(t){let e=t.doc||t.ok,n=e&&e._attachments;n&&Object.keys(n).forEach(function(r){let i=n[r];i.data=to(i.data,i.content_type)})}function Sn(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function Ec(t){return!t._attachments||!Object.keys(t._attachments)?Promise.resolve():Promise.all(Object.keys(t._attachments).map(function(e){let n=t._attachments[e];if(n.data&&typeof n.data!="string")return new Promise(function(r){no(n.data,r)}).then(function(r){n.data=r})}))}function Rm(t){if(!t.prefix)return!1;let e=Ml(t.prefix).protocol;return e==="http"||e==="https"}function Bm(t,e){if(Rm(e)){let i=e.name.substr(e.prefix.length);t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(i)}let n=Ml(t);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});let r=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=r.pop(),n.db.indexOf("%")===-1&&(n.db=encodeURIComponent(n.db)),n.path=r.join("/"),n}function Qe(t,e){return $i(t,t.db+"/"+e)}function $i(t,e){let n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function _i(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function Nm(t){let e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=e.indexOf("msie")!==-1,r=e.indexOf("trident")!==-1,i=e.indexOf("edge")!==-1,s=!("method"in t)||t.method==="GET";return(n||r||i)&&s}function ha(t,e){let n=this,r=Bm(t.name,t),i=Qe(r,"");t=Ye(t);const s=async function(h,y){if(y=y||{},y.headers=y.headers||new dr,y.credentials="include",t.auth||r.auth){let O=t.auth||r.auth,b=O.username+":"+O.password,p=Qr(unescape(encodeURIComponent(b)));y.headers.set("Authorization","Basic "+p)}let E=t.headers||{};return Object.keys(E).forEach(function(O){y.headers.append(O,E[O])}),Nm(y)&&(h+=(h.indexOf("?")===-1?"?":"&")+"_nonce="+Date.now()),await(t.fetch||Zl)(h,y)};function o(h,y){return Ke(h,function(...E){w().then(function(){return y.apply(this,E)}).catch(function(S){E.pop()(S)})}).bind(n)}async function f(h,y){let E={};y=y||{},y.headers=y.headers||new dr,y.headers.get("Content-Type")||y.headers.set("Content-Type","application/json"),y.headers.get("Accept")||y.headers.set("Accept","application/json");const S=await s(h,y);E.ok=S.ok,E.status=S.status;const O=await S.json();if(E.data=O,!E.ok)throw E.data.status=E.status,Ar(E.data);return Array.isArray(E.data)&&(E.data=E.data.map(function(b){return b.error||b.missing?Ar(b):b})),E}let g;async function w(){return t.skip_setup?Promise.resolve():g||(g=f(i).catch(function(h){return h&&h.status&&h.status===404?(ta(404,"PouchDB is just detecting if the remote exists."),f(i,{method:"PUT"})):Promise.reject(h)}).catch(function(h){return h&&h.status&&h.status===412?!0:Promise.reject(h)}),g.catch(function(){g=null}),g)}Gt(function(){e(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=o("id",async function(h){let y;try{y=await(await s($i(r,""))).json()}catch{y={}}let E=y&&y.uuid?y.uuid+r.db:Qe(r,"");h(null,E)}),n.compact=o("compact",async function(h,y){typeof h=="function"&&(y=h,h={}),h=Ye(h),await f(Qe(r,"_compact"),{method:"POST"});function E(){n.info(function(S,O){O&&!O.compact_running?y(null,{ok:!0}):setTimeout(E,h.interval||200)})}E()}),n.bulkGet=Ke("bulkGet",function(h,y){let E=this;async function S(l){let u={};h.revs&&(u.revs=!0),h.attachments&&(u.attachments=!0),h.latest&&(u.latest=!0);try{const c=await f(Qe(r,"_bulk_get"+_i(u)),{method:"POST",body:JSON.stringify({docs:h.docs})});h.attachments&&h.binary&&c.data.results.forEach(function(d){d.docs.forEach(js)}),l(null,c.data)}catch(c){l(c)}}function O(){let l=Im,u=Math.ceil(h.docs.length/l),c=0,d=new Array(u);function v(D){return function(I,k){d[D]=k.results,++c===u&&y(null,{results:xi(d)})}}for(let D=0;D<u;D++){let I=Jr(h,["revs","attachments","binary","latest"]);I.docs=h.docs.slice(D*l,Math.min(h.docs.length,(D+1)*l)),jl(E,I,v(D))}}let b=$i(r,""),p=Is[b];typeof p!="boolean"?S(function(l,u){l?(Is[b]=!1,ta(l.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),O()):(Is[b]=!0,y(null,u))}):p?S(y):O()}),n._info=async function(h){try{await w();const E=await(await s(Qe(r,""))).json();E.host=Qe(r,""),h(null,E)}catch(y){h(y)}},n.fetch=async function(h,y){await w();const E=h.substring(0,1)==="/"?$i(r,h.substring(1)):Qe(r,h);return s(E,y)},n.get=o("get",async function(h,y,E){typeof y=="function"&&(E=y,y={}),y=Ye(y);let S={};y.revs&&(S.revs=!0),y.revs_info&&(S.revs_info=!0),y.latest&&(S.latest=!0),y.open_revs&&(y.open_revs!=="all"&&(y.open_revs=JSON.stringify(y.open_revs)),S.open_revs=y.open_revs),y.rev&&(S.rev=y.rev),y.conflicts&&(S.conflicts=y.conflicts),y.update_seq&&(S.update_seq=y.update_seq),h=Sn(h);function O(l){let u=l._attachments,c=u&&Object.keys(u);if(!u||!c.length)return;async function d(D){const I=u[D],k=Sn(l._id)+"/"+A(D)+"?rev="+l._rev,M=await s(Qe(r,k));let U;"buffer"in M?U=await M.buffer():U=await M.blob();let ee;if(y.binary){let X=Object.getOwnPropertyDescriptor(U.__proto__,"type");(!X||X.set)&&(U.type=I.content_type),ee=U}else ee=await new Promise(function(X){no(U,X)});delete I.stub,delete I.length,I.data=ee}let v=c.map(function(D){return function(){return d(D)}});return Lm(v,5)}function b(l){return Array.isArray(l)?Promise.all(l.map(function(u){if(u.ok)return O(u.ok)})):O(l)}const p=Qe(r,h+_i(S));try{const l=await f(p);y.attachments&&await b(l.data),E(null,l.data)}catch(l){l.docId=h,E(l)}}),n.remove=o("remove",async function(h,y,E,S){let O;typeof y=="string"?(O={_id:h,_rev:y},typeof E=="function"&&(S=E,E={})):(O=h,typeof y=="function"?(S=y,E={}):(S=E,E=y));const b=O._rev||E.rev,p=Qe(r,Sn(O._id))+"?rev="+b;try{const l=await f(p,{method:"DELETE"});S(null,l.data)}catch(l){S(l)}});function A(h){return h.split("/").map(encodeURIComponent).join("/")}n.getAttachment=o("getAttachment",async function(h,y,E,S){typeof E=="function"&&(S=E,E={});const O=E.rev?"?rev="+E.rev:"",b=Qe(r,Sn(h))+"/"+A(y)+O;let p;try{const u=await s(b,{method:"GET"});if(!u.ok)throw u;p=u.headers.get("content-type");let c;if(typeof process<"u"&&!process.browser&&typeof u.buffer=="function"?c=await u.buffer():c=await u.blob(),typeof process<"u"&&!process.browser){var l=Object.getOwnPropertyDescriptor(c.__proto__,"type");(!l||l.set)&&(c.type=p)}S(null,c)}catch(u){S(u)}}),n.removeAttachment=o("removeAttachment",async function(h,y,E,S){const O=Qe(r,Sn(h)+"/"+A(y))+"?rev="+E;try{const b=await f(O,{method:"DELETE"});S(null,b.data)}catch(b){S(b)}}),n.putAttachment=o("putAttachment",async function(h,y,E,S,O,b){typeof O=="function"&&(b=O,O=S,S=E,E=null);const p=Sn(h)+"/"+A(y);let l=Qe(r,p);if(E&&(l+="?rev="+E),typeof S=="string"){let u;try{u=Za(S)}catch{return b(be(Bl,"Attachment is not a valid base64 string"))}S=u?eo(u,O):""}try{const u=await f(l,{headers:new dr({"Content-Type":O}),method:"PUT",body:S});b(null,u.data)}catch(u){b(u)}}),n._bulkDocs=async function(h,y,E){h.new_edits=y.new_edits;try{await w(),await Promise.all(h.docs.map(Ec));const S=await f(Qe(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(h)});E(null,S.data)}catch(S){E(S)}},n._put=async function(h,y,E){try{await w(),await Ec(h);const S=await f(Qe(r,Sn(h._id)),{method:"PUT",body:JSON.stringify(h)});E(null,S.data)}catch(S){S.docId=h&&h._id,E(S)}},n.allDocs=o("allDocs",async function(h,y){typeof h=="function"&&(y=h,h={}),h=Ye(h);let E={},S,O="GET";h.conflicts&&(E.conflicts=!0),h.update_seq&&(E.update_seq=!0),h.descending&&(E.descending=!0),h.include_docs&&(E.include_docs=!0),h.attachments&&(E.attachments=!0),h.key&&(E.key=JSON.stringify(h.key)),h.start_key&&(h.startkey=h.start_key),h.startkey&&(E.startkey=JSON.stringify(h.startkey)),h.end_key&&(h.endkey=h.end_key),h.endkey&&(E.endkey=JSON.stringify(h.endkey)),typeof h.inclusive_end<"u"&&(E.inclusive_end=!!h.inclusive_end),typeof h.limit<"u"&&(E.limit=h.limit),typeof h.skip<"u"&&(E.skip=h.skip);let b=_i(E);typeof h.keys<"u"&&(O="POST",S={keys:h.keys});try{const p=await f(Qe(r,"_all_docs"+b),{method:O,body:JSON.stringify(S)});h.include_docs&&h.attachments&&h.binary&&p.data.rows.forEach(js),y(null,p.data)}catch(p){y(p)}}),n._changes=function(h){let y="batch_size"in h?h.batch_size:Pm;h=Ye(h),h.continuous&&!("heartbeat"in h)&&(h.heartbeat=jm);let E="timeout"in h?h.timeout:30*1e3;"timeout"in h&&h.timeout&&E-h.timeout<mi&&(E=h.timeout+mi),"heartbeat"in h&&h.heartbeat&&E-h.heartbeat<mi&&(E=h.heartbeat+mi);let S={};"timeout"in h&&h.timeout&&(S.timeout=h.timeout);let O=typeof h.limit<"u"?h.limit:!1,b=O;if(h.style&&(S.style=h.style),(h.include_docs||h.filter&&typeof h.filter=="function")&&(S.include_docs=!0),h.attachments&&(S.attachments=!0),h.continuous&&(S.feed="longpoll"),h.seq_interval&&(S.seq_interval=h.seq_interval),h.conflicts&&(S.conflicts=!0),h.descending&&(S.descending=!0),h.update_seq&&(S.update_seq=!0),"heartbeat"in h&&h.heartbeat&&(S.heartbeat=h.heartbeat),h.filter&&typeof h.filter=="string"&&(S.filter=h.filter),h.view&&typeof h.view=="string"&&(S.filter="_view",S.view=h.view),h.query_params&&typeof h.query_params=="object")for(let I in h.query_params)Object.prototype.hasOwnProperty.call(h.query_params,I)&&(S[I]=h.query_params[I]);let p="GET",l;h.doc_ids?(S.filter="_doc_ids",p="POST",l={doc_ids:h.doc_ids}):h.selector&&(S.filter="_selector",p="POST",l={selector:h.selector});let u=new Ap,c;const d=async function(I,k){if(h.aborted)return;S.since=I,typeof S.since=="object"&&(S.since=JSON.stringify(S.since)),h.descending?O&&(S.limit=b):S.limit=!O||b>y?y:b;let M=Qe(r,"_changes"+_i(S)),U={signal:u.signal,method:p,body:JSON.stringify(l)};if(c=I,!h.aborted)try{await w();const ee=await f(M,U);k(null,ee.data)}catch(ee){k(ee)}};let v={results:[]};const D=function(I,k){if(h.aborted)return;let M=0;if(k&&k.results){M=k.results.length,v.last_seq=k.last_seq;let ee=null,X=null;typeof k.pending=="number"&&(ee=k.pending),(typeof v.last_seq=="string"||typeof v.last_seq=="number")&&(X=v.last_seq),h.query_params,k.results=k.results.filter(function(H){b--;let Z=Xa(h)(H);return Z&&(h.include_docs&&h.attachments&&h.binary&&js(H),h.return_docs&&v.results.push(H),h.onChange(H,ee,X)),Z})}else if(I){h.aborted=!0,h.complete(I);return}k&&k.last_seq&&(c=k.last_seq);let U=O&&b<=0||k&&M<y||h.descending;h.continuous&&!(O&&b<=0)||!U?Gt(function(){d(c,D)}):h.complete(null,v)};return d(h.since||0,D),{cancel:function(){h.aborted=!0,u.abort()}}},n.revsDiff=o("revsDiff",async function(h,y,E){typeof y=="function"&&(E=y,y={});try{const S=await f(Qe(r,"_revs_diff"),{method:"POST",body:JSON.stringify(h)});E(null,S.data)}catch(S){E(S)}}),n._close=function(h){h()},n._destroy=async function(h,y){try{const E=await f(Qe(r,""),{method:"DELETE"});y(null,E)}catch(E){E.status===404?y(null,{ok:!0}):y(E)}}}ha.valid=function(){return!0};function Fm(t){t.adapter("http",ha,!1),t.adapter("https",ha,!1)}let Pr=class df extends Error{constructor(e){super(),this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,df)}catch{}}},hf=class vf extends Error{constructor(e){super(),this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,vf)}catch{}}},gf=class pf extends Error{constructor(e){super(),this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,pf)}catch{}}};function mf(t,e){return e&&t.then(function(n){Gt(function(){e(null,n)})},function(n){Gt(function(){e(n)})}),t}function Mm(t){return function(...e){var n=e.pop(),r=t.apply(this,e);return typeof n=="function"&&mf(r,n),r}}function Um(t,e){return t.then(function(n){return e().then(function(){return n})},function(n){return e().then(function(){throw n})})}function Rs(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function Sc(t){var e=new wr(t),n=new Array(e.size),r=-1;return e.forEach(function(i){n[++r]=i}),n}function Bs(t){var e=new Array(t.size),n=-1;return t.forEach(function(r,i){e[++n]=i}),e}function Cc(t){var e="builtin "+t+" function requires map values to be numbers or number arrays";return new gf(e)}function va(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if(typeof i!="number")if(Array.isArray(i)){e=typeof e=="number"?[e]:e;for(var s=0,o=i.length;s<o;s++){var f=i[s];if(typeof f!="number")throw Cc("_sum");typeof e[s]>"u"?e.push(f):e[s]+=f}}else throw Cc("_sum");else typeof e=="number"?e+=i:e[0]+=i}return e}var Km=Ct.bind(null,"log"),zm=Array.isArray,Hm=JSON.parse;function _f(t,e){return Ya("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:va,log:Km,isArray:zm,toJSON:Hm})}let ga=class{constructor(){this.promise=new Promise(function(e){e()})}add(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise}finish(){return this.promise}};function xc(t){if(!t)return"undefined";switch(typeof t){case"function":return t.toString();case"string":return t.toString();default:return JSON.stringify(t)}}function Gm(t,e){return xc(t)+xc(e)+"undefined"}async function Oc(t,e,n,r,i,s){const o=Gm(n,r);let f;if(!i&&(f=t._cachedViews=t._cachedViews||{},f[o]))return f[o];const g=t.info().then(async function(w){const A=w.db_name+"-mrview-"+(i?"temp":zl(o));function h(b){b.views=b.views||{};let p=e;p.indexOf("/")===-1&&(p=e+"/"+e);const l=b.views[p]=b.views[p]||{};if(!l[A])return l[A]=!0,b}await Oi(t,"_local/"+s,h);const E=(await t.registerDependentDatabase(A)).db;E.auto_compaction=!0;const S={name:A,db:E,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:r};let O;try{O=await S.db.get("_local/lastSeq")}catch(b){if(b.status!==404)throw b}return S.seq=O?O.seq:0,f&&S.db.once("destroyed",function(){delete f[o]}),S});return f&&(f[o]=g),g}var Tc={},kc=new ga,Wm=50;function Ns(t){return t.indexOf("/")===-1?[t,t]:t.split("/")}function Jm(t){return t.length===1&&/^1-/.test(t[0].rev)}function Dc(t,e,n){try{t.emit("error",e)}catch{Ct("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),Ct("error",e,n)}}function Qm(t,e,n,r){function i($,C,P){try{C(P)}catch(q){Dc($,q,{fun:C,doc:P})}}function s($,C,P,q,j){try{return{output:C(P,q,j)}}catch(K){return Dc($,K,{fun:C,keys:P,values:q,rereduce:j}),{error:K}}}function o($,C){const P=He($.key,C.key);return P!==0?P:He($.value,C.value)}function f($,C,P){return P=P||0,typeof C=="number"?$.slice(P,C+P):P>0?$.slice(P):$}function g($){const C=$.value;return C&&typeof C=="object"&&C._id||$.id}function w($){$.rows.forEach(function(C){const P=C.doc&&C.doc._attachments;P&&Object.keys(P).forEach(function(q){const j=P[q];P[q].data=to(j.data,j.content_type)})})}function A($){return function(C){return $.include_docs&&$.attachments&&$.binary&&w(C),C}}function h($,C,P,q){let j=C[$];typeof j<"u"&&(q&&(j=encodeURIComponent(JSON.stringify(j))),P.push($+"="+j))}function y($){if(typeof $<"u"){const C=Number($);return!isNaN(C)&&C===parseInt($,10)?C:$}}function E($){return $.group_level=y($.group_level),$.limit=y($.limit),$.skip=y($.skip),$}function S($){if($){if(typeof $!="number")return new Pr(`Invalid value for integer: "${$}"`);if($<0)return new Pr(`Invalid value for positive integer: "${$}"`)}}function O($,C){const P=$.descending?"endkey":"startkey",q=$.descending?"startkey":"endkey";if(typeof $[P]<"u"&&typeof $[q]<"u"&&He($[P],$[q])>0)throw new Pr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(C.reduce&&$.reduce!==!1){if($.include_docs)throw new Pr("{include_docs:true} is invalid for reduce");if($.keys&&$.keys.length>1&&!$.group&&!$.group_level)throw new Pr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(j){const K=S($[j]);if(K)throw K})}async function b($,C,P){let q=[],j,K="GET",J;if(h("reduce",P,q),h("include_docs",P,q),h("attachments",P,q),h("limit",P,q),h("descending",P,q),h("group",P,q),h("group_level",P,q),h("skip",P,q),h("stale",P,q),h("conflicts",P,q),h("startkey",P,q,!0),h("start_key",P,q,!0),h("endkey",P,q,!0),h("end_key",P,q,!0),h("inclusive_end",P,q),h("key",P,q,!0),h("update_seq",P,q),q=q.join("&"),q=q===""?"":"?"+q,typeof P.keys<"u"){const N=`keys=${encodeURIComponent(JSON.stringify(P.keys))}`;N.length+q.length+1<=2e3?q+=(q[0]==="?"?"&":"?")+N:(K="POST",typeof C=="string"?j={keys:P.keys}:C.keys=P.keys)}if(typeof C=="string"){const L=Ns(C),N=await $.fetch("_design/"+L[0]+"/_view/"+L[1]+q,{headers:new dr({"Content-Type":"application/json"}),method:K,body:JSON.stringify(j)});J=N.ok;const G=await N.json();if(!J)throw G.status=N.status,Ar(G);return G.rows.forEach(function(W){if(W.value&&W.value.error&&W.value.error==="builtin_reduce_error")throw new Error(W.reason)}),new Promise(function(W){W(G)}).then(A(P))}j=j||{},Object.keys(C).forEach(function(L){Array.isArray(C[L])?j[L]=C[L]:j[L]=C[L].toString()});const F=await $.fetch("_temp_view"+q,{headers:new dr({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(j)});J=F.ok;const T=await F.json();if(!J)throw T.status=F.status,Ar(T);return new Promise(function(L){L(T)}).then(A(P))}function p($,C,P){return new Promise(function(q,j){$._query(C,P,function(K,J){if(K)return j(K);q(J)})})}function l($){return new Promise(function(C,P){$._viewCleanup(function(q,j){if(q)return P(q);C(j)})})}function u($){return function(C){if(C.status===404)return $;throw C}}async function c($,C,P){const q="_local/doc_"+$,j={_id:q,keys:[]},K=P.get($),J=K[0],F=K[1];function T(){return Jm(F)?Promise.resolve(j):C.db.get(q).catch(u(j))}function L(se){return se.keys.length?C.db.allDocs({keys:se.keys,include_docs:!0}):Promise.resolve({rows:[]})}function N(se,ce){const de=[],Oe=new wr;for(let re=0,ue=ce.rows.length;re<ue;re++){const ge=ce.rows[re].doc;if(ge&&(de.push(ge),Oe.add(ge._id),ge._deleted=!J.has(ge._id),!ge._deleted)){const me=J.get(ge._id);"value"in me&&(ge.value=me.value)}}const je=Bs(J);return je.forEach(function(re){if(!Oe.has(re)){const ue={_id:re},fe=J.get(re);"value"in fe&&(ue.value=fe.value),de.push(ue)}}),se.keys=Sc(je.concat(se.keys)),de.push(se),de}const G=await T(),W=await L(G);return N(G,W)}function d($){return $.sourceDB.get("_local/purges").then(function(C){const P=C.purgeSeq;return $.db.get("_local/purgeSeq").then(function(q){return q._rev}).catch(function(q){if(q.status!==404)throw q}).then(function(q){return $.db.put({_id:"_local/purgeSeq",_rev:q,purgeSeq:P})})}).catch(function(C){if(C.status!==404)throw C})}function v($,C,P){var q="_local/lastSeq";return $.db.get(q).catch(u({_id:q,seq:0})).then(function(j){var K=Bs(C);return Promise.all(K.map(function(J){return c(J,$,C)})).then(function(J){var F=xi(J);return j.seq=P,F.push(j),$.db.bulkDocs({docs:F})}).then(()=>d($))})}function D($){const C=typeof $=="string"?$:$.name;let P=Tc[C];return P||(P=Tc[C]=new ga),P}async function I($,C){return Rs(D($),function(){return k($,C)})()}async function k($,C){let P,q,j;function K(re,ue){const fe={id:q._id,key:Fn(re)};typeof ue<"u"&&ue!==null&&(fe.value=Fn(ue)),P.push(fe)}const J=e($.mapFun,K);let F=$.seq||0;function T(){return $.sourceDB.info().then(function(re){j=$.sourceDB.activeTasks.add({name:"view_indexing",total_items:re.update_seq-F})})}function L(re,ue){return function(){return v($,re,ue)}}let N=0;const G={view:$.name,indexed_docs:N};$.sourceDB.emit("indexing",G);const W=new ga;async function se(){const re=await $.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:F,limit:C.changes_batch_size}),ue=await ce();return de(re,ue)}function ce(){return $.db.get("_local/purgeSeq").then(function(re){return re.purgeSeq}).catch(function(re){if(re&&re.status!==404)throw re;return-1}).then(function(re){return $.sourceDB.get("_local/purges").then(function(ue){const fe=ue.purges.filter(function(me,he){return he>re}).map(me=>me.docId),ge=fe.filter(function(me,he){return fe.indexOf(me)===he});return Promise.all(ge.map(function(me){return $.sourceDB.get(me).then(function(he){return{docId:me,doc:he}}).catch(function(he){if(he.status!==404)throw he;return{docId:me}})}))}).catch(function(ue){if(ue&&ue.status!==404)throw ue;return[]})})}function de(re,ue){var fe=re.results;if(!fe.length&&!ue.length)return;for(let he of ue)if(fe.findIndex(function(st){return st.id===he.docId})<0){const st={_id:he.docId,doc:{_id:he.docId,_deleted:1},changes:[]};he.doc&&(st.doc=he.doc,st.changes.push({rev:he.doc._rev})),fe.push(st)}var ge=Oe(fe);W.add(L(ge,F)),N=N+fe.length;const me={view:$.name,last_seq:re.last_seq,results_count:fe.length,indexed_docs:N};if($.sourceDB.emit("indexing",me),$.sourceDB.activeTasks.update(j,{completed_items:N}),!(fe.length<C.changes_batch_size))return se()}function Oe(re){const ue=new ft;for(let fe=0,ge=re.length;fe<ge;fe++){const me=re[fe];if(me.doc._id[0]!=="_"){P=[],q=me.doc,q._deleted||i($.sourceDB,J,q),P.sort(o);const he=je(P);ue.set(me.doc._id,[he,me.changes])}F=me.seq}return ue}function je(re){const ue=new ft;let fe;for(let ge=0,me=re.length;ge<me;ge++){const he=re[ge],Ot=[he.key,he.id];ge>0&&He(he.key,fe)===0&&Ot.push(ge),ue.set(Dt(Ot),he),fe=he.key}return ue}try{await T(),await se(),await W.finish(),$.seq=F,$.sourceDB.activeTasks.remove(j)}catch(re){$.sourceDB.activeTasks.remove(j,re)}}function M($,C,P){P.group_level===0&&delete P.group_level;const q=P.group||P.group_level,j=n($.reduceFun),K=[],J=isNaN(P.group_level)?Number.POSITIVE_INFINITY:P.group_level;C.forEach(function(F){const T=K[K.length-1];let L=q?F.key:null;if(q&&Array.isArray(L)&&(L=L.slice(0,J)),T&&He(T.groupKey,L)===0){T.keys.push([F.key,F.id]),T.values.push(F.value);return}K.push({keys:[[F.key,F.id]],values:[F.value],groupKey:L})}),C=[];for(let F=0,T=K.length;F<T;F++){const L=K[F],N=s($.sourceDB,j,L.keys,L.values,!1);if(N.error&&N.error instanceof gf)throw N.error;C.push({value:N.error?null:N.output,key:L.groupKey})}return{rows:f(C,P.limit,P.skip)}}function U($,C){return Rs(D($),function(){return ee($,C)})()}async function ee($,C){let P;const q=$.reduceFun&&C.reduce!==!1,j=C.skip||0;typeof C.keys<"u"&&!C.keys.length&&(C.limit=0,delete C.keys);async function K(F){F.include_docs=!0;const T=await $.db.allDocs(F);return P=T.total_rows,T.rows.map(function(L){if("value"in L.doc&&typeof L.doc.value=="object"&&L.doc.value!==null){const G=Object.keys(L.doc.value).sort(),W=["id","key","value"];if(!(G<W||G>W))return L.doc.value}const N=Fp(L.doc._id);return{key:N[0],id:N[1],value:"value"in L.doc?L.doc.value:null}})}async function J(F){let T;if(q?T=M($,F,C):typeof C.keys>"u"?T={total_rows:P,offset:j,rows:F}:T={total_rows:P,offset:j,rows:f(F,C.limit,C.skip)},C.update_seq&&(T.update_seq=$.seq),C.include_docs){const N=Sc(F.map(g)),G=await $.sourceDB.allDocs({keys:N,include_docs:!0,conflicts:C.conflicts,attachments:C.attachments,binary:C.binary});var L=new ft;return G.rows.forEach(function(W){L.set(W.id,W.doc)}),F.forEach(function(W){var se=g(W),ce=L.get(se);ce&&(W.doc=ce)}),T}else return T}if(typeof C.keys<"u"){const T=C.keys.map(function(G){const W={startkey:Dt([G]),endkey:Dt([G,{}])};return C.update_seq&&(W.update_seq=!0),K(W)}),L=await Promise.all(T),N=xi(L);return J(N)}else{const F={descending:C.descending};C.update_seq&&(F.update_seq=!0);let T,L;if("start_key"in C&&(T=C.start_key),"startkey"in C&&(T=C.startkey),"end_key"in C&&(L=C.end_key),"endkey"in C&&(L=C.endkey),typeof T<"u"&&(F.startkey=C.descending?Dt([T,{}]):Dt([T])),typeof L<"u"){let G=C.inclusive_end!==!1;C.descending&&(G=!G),F.endkey=Dt(G?[L,{}]:[L])}if(typeof C.key<"u"){const G=Dt([C.key]),W=Dt([C.key,{}]);F.descending?(F.endkey=G,F.startkey=W):(F.startkey=G,F.endkey=W)}q||(typeof C.limit=="number"&&(F.limit=C.limit),F.skip=j);const N=await K(F);return J(N)}}async function X($){return(await $.fetch("_view_cleanup",{headers:new dr({"Content-Type":"application/json"}),method:"POST"})).json()}async function H($){try{const C=await $.get("_local/"+t),P=new ft;Object.keys(C.views).forEach(function(T){const L=Ns(T),N="_design/"+L[0],G=L[1];let W=P.get(N);W||(W=new wr,P.set(N,W)),W.add(G)});const q={keys:Bs(P),include_docs:!0},j=await $.allDocs(q),K={};j.rows.forEach(function(T){const L=T.key.substring(8);P.get(T.key).forEach(function(N){let G=L+"/"+N;C.views[G]||(G=N);const W=Object.keys(C.views[G]),se=T.doc&&T.doc.views&&T.doc.views[N];W.forEach(function(ce){K[ce]=K[ce]||se})})});const F=Object.keys(K).filter(function(T){return!K[T]}).map(function(T){return Rs(D(T),function(){return new $.constructor(T,$.__opts).destroy()})()});return Promise.all(F).then(function(){return{ok:!0}})}catch(C){if(C.status===404)return{ok:!0};throw C}}async function Z($,C,P){if(typeof $._query=="function")return p($,C,P);if(zt($))return b($,C,P);const q={changes_batch_size:$.__opts.view_update_changes_batch_size||Wm};if(typeof C!="string")return O(P,C),kc.add(async function(){const j=await Oc($,"temp_view/temp_view",C.map,C.reduce,!0,t);return Um(I(j,q).then(function(){return U(j,P)}),function(){return j.db.destroy()})}),kc.finish();{const j=C,K=Ns(j),J=K[0],F=K[1],T=await $.get("_design/"+J);if(C=T.views&&T.views[F],!C)throw new hf(`ddoc ${T._id} has no view named ${F}`);r(T,F),O(P,C);const L=await Oc($,j,C.map,C.reduce,!1,t);return P.stale==="ok"||P.stale==="update_after"?(P.stale==="update_after"&&Gt(function(){I(L,q)}),U(L,P)):(await I(L,q),U(L,P))}}function Q($,C,P){const q=this;typeof C=="function"&&(P=C,C={}),C=C?E(C):{},typeof $=="function"&&($={map:$});const j=Promise.resolve().then(function(){return Z(q,$,C)});return mf(j,P),j}const te=Mm(function(){const $=this;return typeof $._viewCleanup=="function"?l($):zt($)?X($):H($)});return{query:Q,viewCleanup:te}}var Fs={_sum:function(t,e){return va(e)},_count:function(t,e){return e.length},_stats:function(t,e){function n(r){for(var i=0,s=0,o=r.length;s<o;s++){var f=r[s];i+=f*f}return i}return{sum:va(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:n(e)}}};function Xm(t){if(/^_sum/.test(t))return Fs._sum;if(/^_count/.test(t))return Fs._count;if(/^_stats/.test(t))return Fs._stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}function Ym(t,e){if(typeof t=="function"&&t.length===2){var n=t;return function(r){return n(r,e)}}else return _f(t.toString(),e)}function Zm(t){var e=t.toString(),n=Xm(e);return n||_f(e)}function Vm(t,e){var n=t.views&&t.views[e];if(typeof n.map!="string")throw new hf("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}var e_="mrviews",yf=Qm(e_,Ym,Zm,Vm);function t_(t,e,n){return yf.query.call(this,t,e,n)}function n_(t){return yf.viewCleanup.call(this,t)}var r_={query:t_,viewCleanup:n_};function i_(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}function qc(t,e){var n=Object.keys(e._attachments);return Promise.all(n.map(function(r){return t.getAttachment(e._id,r,{rev:e._rev})}))}function s_(t,e,n){var r=zt(e)&&!zt(t),i=Object.keys(n._attachments);return r?t.get(n._id).then(function(s){return Promise.all(i.map(function(o){return i_(s,n,o)?e.getAttachment(n._id,o):t.getAttachment(s._id,o)}))}).catch(function(s){if(s.status!==404)throw s;return qc(e,n)}):qc(e,n)}function a_(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n].missing;r.forEach(function(i){e.push({id:n,rev:i})})}),{docs:e,revs:!0,latest:!0}}function o_(t,e,n,r){n=Ye(n);var i=[],s=!0;function o(){var g=a_(n);if(g.docs.length)return t.bulkGet(g).then(function(w){if(r.cancelled)throw new Error("cancelled");return Promise.all(w.results.map(function(A){return Promise.all(A.docs.map(function(h){var y=h.ok;return h.error&&(s=!1),!y||!y._attachments?y:s_(e,t,y).then(function(E){var S=Object.keys(y._attachments);return E.forEach(function(O,b){var p=y._attachments[S[b]];delete p.stub,delete p.length,p.data=O}),y})}))})).then(function(A){i=i.concat(xi(A).filter(Boolean))})})}function f(){return{ok:s,docs:i}}return Promise.resolve().then(o).then(f)}var Lc=1,Pc="pouchdb",u_=5,Nt=0;function pa(t,e,n,r,i){return t.get(e).catch(function(s){if(s.status===404)return(t.adapter==="http"||t.adapter==="https")&&ta(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:Pc,version:Lc};throw s}).then(function(s){if(!i.cancelled&&s.last_seq!==n)return s.history=(s.history||[]).filter(function(o){return o.session_id!==r}),s.history.unshift({last_seq:n,session_id:r}),s.history=s.history.slice(0,u_),s.version=Lc,s.replicator=Pc,s.session_id=r,s.last_seq=n,t.put(s).catch(function(o){if(o.status===409)return pa(t,e,n,r,i);throw o})})}let Ic=class{constructor(e,n,r,i,s){this.src=e,this.target=n,this.id=r,this.returnValue=i,this.opts=s||{}}writeCheckpoint(e,n){var r=this;return this.updateTarget(e,n).then(function(){return r.updateSource(e,n)})}updateTarget(e,n){return this.opts.writeTargetCheckpoint?pa(this.target,this.id,e,n,this.returnValue):Promise.resolve(!0)}updateSource(e,n){if(this.opts.writeSourceCheckpoint){var r=this;return pa(this.src,this.id,e,n,this.returnValue).catch(function(i){if(Rc(i))return r.opts.writeSourceCheckpoint=!1,!0;throw i})}else return Promise.resolve(!0)}getCheckpoint(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(n){return n.last_seq||Nt}).catch(function(n){if(n.status!==404)throw n;return Nt}):e.target.get(e.id).then(function(n){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?n.last_seq||Nt:e.src.get(e.id).then(function(r){if(n.version!==r.version)return Nt;var i;return n.version?i=n.version.toString():i="undefined",i in jc?jc[i](n,r):Nt},function(r){if(r.status===404&&n.last_seq)return e.src.put({_id:e.id,last_seq:Nt}).then(function(){return Nt},function(i){return Rc(i)?(e.opts.writeSourceCheckpoint=!1,n.last_seq):Nt});throw r})}).catch(function(n){if(n.status!==404)throw n;return Nt})}};var jc={undefined:function(t,e){return He(t.last_seq,e.last_seq)===0?e.last_seq:0},1:function(t,e){return c_(e,t).last_seq}};function c_(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:wf(t.history,e.history)}function wf(t,e){var n=t[0],r=t.slice(1),i=e[0],s=e.slice(1);if(!n||e.length===0)return{last_seq:Nt,history:[]};var o=n.session_id;if(ma(o,e))return{last_seq:n.last_seq,history:t};var f=i.session_id;return ma(f,r)?{last_seq:i.last_seq,history:s}:wf(r,s)}function ma(t,e){var n=e[0],r=e.slice(1);return!t||e.length===0?!1:t===n.session_id?!0:ma(t,r)}function Rc(t){return typeof t.status=="number"&&Math.floor(t.status/100)===4}function bf(t,e,n,r,i){return this instanceof Ic?bf:new Ic(t,e,n,r,i)}var Bc=0;function l_(t,e,n,r){if(t.retry===!1){e.emit("error",n),e.removeAllListeners();return}if(typeof t.back_off_function!="function"&&(t.back_off_function=qg),e.emit("requestError",n),e.state==="active"||e.state==="pending"){e.emit("paused",n),e.state="stopped";var i=function(){t.current_back_off=Bc},s=function(){e.removeListener("active",i)};e.once("paused",s),e.once("active",i)}t.current_back_off=t.current_back_off||Bc,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}function f_(t){return Object.keys(t).sort(He).reduce(function(e,n){return e[n]=t[n],e},{})}function d_(t,e,n){var r=n.doc_ids?n.doc_ids.sort(He):"",i=n.filter?n.filter.toString():"",s="",o="",f="";return n.selector&&(f=JSON.stringify(n.selector)),n.filter&&n.query_params&&(s=JSON.stringify(f_(n.query_params))),n.filter&&n.filter==="_view"&&(o=n.view.toString()),Promise.all([t.id(),e.id()]).then(function(g){var w=g[0]+g[1]+i+o+s+r+f;return new Promise(function(A){ro(w,A)})}).then(function(g){return g=g.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+g})}function Af(t,e,n,r,i){var s=[],o,f={seq:0,changes:[],docs:[]},g=!1,w=!1,A=!1,h=0,y=0,E=n.continuous||n.live||!1,S=n.batch_size||100,O=n.batches_limit||10,b=n.style||"all_docs",p=!1,l=n.doc_ids,u=n.selector,c,d,v=[],D=Ui(),I;i=i||{ok:!0,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};r.ready(t,e);function M(){return d?Promise.resolve():d_(t,e,n).then(function(T){c=T;var L={};n.checkpoint===!1?L={writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:n.checkpoint==="source"?L={writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:n.checkpoint==="target"?L={writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:L={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},d=new bf(t,e,c,r,L)})}function U(){if(v=[],o.docs.length!==0){var T=o.docs,L={timeout:n.timeout};return e.bulkDocs({docs:T,new_edits:!1},L).then(function(N){if(r.cancelled)throw $(),new Error("cancelled");var G=Object.create(null);N.forEach(function(se){se.error&&(G[se.id]=se)});var W=Object.keys(G).length;i.doc_write_failures+=W,i.docs_written+=T.length-W,T.forEach(function(se){var ce=G[se._id];if(ce){i.errors.push(ce);var de=(ce.name||"").toLowerCase();if(de==="unauthorized"||de==="forbidden")r.emit("denied",Ye(ce));else throw ce}else v.push(se)})},function(N){throw i.doc_write_failures+=T.length,N})}}function ee(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=y=o.seq;var T=Ye(i);return v.length&&(T.docs=v,typeof o.pending=="number"&&(T.pending=o.pending,delete o.pending),r.emit("change",T)),g=!0,t.info().then(function(L){var N=t.activeTasks.get(I);if(!(!o||!N)){var G=N.completed_items||0,W=parseInt(L.update_seq,10)-parseInt(h,10);t.activeTasks.update(I,{completed_items:G+o.changes.length,total_items:W})}}),d.writeCheckpoint(o.seq,D).then(function(){if(r.emit("checkpoint",{checkpoint:o.seq}),g=!1,r.cancelled)throw $(),new Error("cancelled");o=void 0,j()}).catch(function(L){throw F(L),L})}function X(){var T={};return o.changes.forEach(function(L){r.emit("checkpoint",{revs_diff:L}),L.id!=="_user/"&&(T[L.id]=L.changes.map(function(N){return N.rev}))}),e.revsDiff(T).then(function(L){if(r.cancelled)throw $(),new Error("cancelled");o.diffs=L})}function H(){return o_(t,e,o.diffs,r).then(function(T){o.error=!T.ok,T.docs.forEach(function(L){delete o.diffs[L._id],i.docs_read++,o.docs.push(L)})})}function Z(){if(!(r.cancelled||o)){if(s.length===0){Q(!0);return}o=s.shift(),r.emit("checkpoint",{start_next_batch:o.seq}),X().then(H).then(U).then(ee).then(Z).catch(function(T){te("batch processing terminated with error",T)})}}function Q(T){if(f.changes.length===0){s.length===0&&!o&&((E&&k.live||w)&&(r.state="pending",r.emit("paused")),w&&$());return}(T||w||f.changes.length>=S)&&(s.push(f),f={seq:0,changes:[],docs:[]},(r.state==="pending"||r.state==="stopped")&&(r.state="active",r.emit("active")),Z())}function te(T,L){A||(L.message||(L.message=T),i.ok=!1,i.status="aborting",s=[],f={seq:0,changes:[],docs:[]},$(L))}function $(T){if(!A&&!(r.cancelled&&(i.status="cancelled",g)))if(i.status=i.status||"complete",i.end_time=new Date().toISOString(),i.last_seq=y,A=!0,t.activeTasks.remove(I,T),T){T=be(T),T.result=i;var L=(T.name||"").toLowerCase();L==="unauthorized"||L==="forbidden"?(r.emit("error",T),r.removeAllListeners()):l_(n,r,T,function(){Af(t,e,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function C(T,L,N){if(r.cancelled)return $();typeof L=="number"&&(f.pending=L);var G=Xa(n)(T);if(!G){var W=t.activeTasks.get(I);if(W){var se=W.completed_items||0;t.activeTasks.update(I,{completed_items:++se})}return}f.seq=T.seq||N,f.changes.push(T),r.emit("checkpoint",{pending_batch:f.seq}),Gt(function(){Q(s.length===0&&k.live)})}function P(T){if(p=!1,r.cancelled)return $();if(T.results.length>0)k.since=T.results[T.results.length-1].seq,j(),Q(!0);else{var L=function(){E?(k.live=!0,j()):w=!0,Q(!0)};!o&&T.results.length===0?(g=!0,d.writeCheckpoint(T.last_seq,D).then(function(){if(g=!1,i.last_seq=y=T.last_seq,r.cancelled)throw $(),new Error("cancelled");L()}).catch(F)):L()}}function q(T){if(p=!1,r.cancelled)return $();te("changes rejected",T)}function j(){if(!(!p&&!w&&s.length<O))return;p=!0;function T(){N.cancel()}function L(){r.removeListener("cancel",T)}r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",T);var N=t.changes(k).on("change",C);N.then(L,L),N.then(P).catch(q),n.retry&&(r._changes=N,r._abortChanges=T)}function K(T){return t.info().then(function(L){var N=typeof n.since>"u"?parseInt(L.update_seq,10)-parseInt(T,10):parseInt(L.update_seq,10);return I=t.activeTasks.add({name:`${E?"continuous ":""}replication from ${L.db_name}`,total_items:N}),T})}function J(){M().then(function(){if(r.cancelled){$();return}return d.getCheckpoint().then(K).then(function(T){y=T,h=T,k={since:y,limit:S,batch_size:S,style:b,doc_ids:l,selector:u,return_docs:!0},n.filter&&(typeof n.filter!="string"?k.include_docs=!0:k.filter=n.filter),"heartbeat"in n&&(k.heartbeat=n.heartbeat),"timeout"in n&&(k.timeout=n.timeout),n.query_params&&(k.query_params=n.query_params),n.view&&(k.view=n.view),j()})}).catch(function(T){te("getCheckpoint rejected with ",T)})}function F(T){g=!1,te("writeCheckpoint completed with error",T)}if(r.cancelled){$();return}r._addedListeners||(r.once("cancel",$),typeof n.complete=="function"&&(r.once("error",n.complete),r.once("complete",function(T){n.complete(null,T)})),r._addedListeners=!0),typeof n.since>"u"?J():M().then(function(){return g=!0,d.writeCheckpoint(n.since,D)}).then(function(){if(g=!1,r.cancelled){$();return}y=n.since,J()}).catch(F)}let h_=class extends nn{constructor(){super(),this.cancelled=!1,this.state="pending";const e=new Promise((n,r)=>{this.once("complete",n),this.once("error",r)});this.then=function(n,r){return e.then(n,r)},this.catch=function(n){return e.catch(n)},this.catch(function(){})}cancel(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")}ready(e,n){if(this._readyCalled)return;this._readyCalled=!0;const r=()=>{this.cancel()};e.once("destroyed",r),n.once("destroyed",r);function i(){e.removeListener("destroyed",r),n.removeListener("destroyed",r)}this.once("complete",i),this.once("error",i)}};function Di(t,e){var n=e.PouchConstructor;return typeof t=="string"?new n(t,e):t}function _a(t,e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw be(Mi,"`doc_ids` filter parameter is not a list.");n.complete=r,n=Ye(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var i=new h_(n),s=Di(t,n),o=Di(e,n);return Af(s,o,n,i),i}function v_(t,e,n,r){return typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n=Ye(n),n.PouchConstructor=n.PouchConstructor||this,t=Di(t,n),e=Di(e,n),new g_(t,e,n,r)}let g_=class extends nn{constructor(e,n,r,i){super(),this.canceled=!1;const s=r.push?Rn({},r,r.push):r,o=r.pull?Rn({},r,r.pull):r;this.push=_a(e,n,s),this.pull=_a(n,e,o),this.pushPaused=!0,this.pullPaused=!0;const f=u=>{this.emit("change",{direction:"pull",change:u})},g=u=>{this.emit("change",{direction:"push",change:u})},w=u=>{this.emit("denied",{direction:"push",doc:u})},A=u=>{this.emit("denied",{direction:"pull",doc:u})},h=()=>{this.pushPaused=!0,this.pullPaused&&this.emit("paused")},y=()=>{this.pullPaused=!0,this.pushPaused&&this.emit("paused")},E=()=>{this.pushPaused=!1,this.pullPaused&&this.emit("active",{direction:"push"})},S=()=>{this.pullPaused=!1,this.pushPaused&&this.emit("active",{direction:"pull"})};let O={};const b=u=>(c,d)=>{(c==="change"&&(d===f||d===g)||c==="denied"&&(d===A||d===w)||c==="paused"&&(d===y||d===h)||c==="active"&&(d===S||d===E))&&(c in O||(O[c]={}),O[c][u]=!0,Object.keys(O[c]).length===2&&this.removeAllListeners(c))};r.live&&(this.push.on("complete",this.pull.cancel.bind(this.pull)),this.pull.on("complete",this.push.cancel.bind(this.push)));function p(u,c,d){u.listeners(c).indexOf(d)==-1&&u.on(c,d)}this.on("newListener",function(u){u==="change"?(p(this.pull,"change",f),p(this.push,"change",g)):u==="denied"?(p(this.pull,"denied",A),p(this.push,"denied",w)):u==="active"?(p(this.pull,"active",S),p(this.push,"active",E)):u==="paused"&&(p(this.pull,"paused",y),p(this.push,"paused",h))}),this.on("removeListener",function(u){u==="change"?(this.pull.removeListener("change",f),this.push.removeListener("change",g)):u==="denied"?(this.pull.removeListener("denied",A),this.push.removeListener("denied",w)):u==="active"?(this.pull.removeListener("active",S),this.push.removeListener("active",E)):u==="paused"&&(this.pull.removeListener("paused",y),this.push.removeListener("paused",h))}),this.pull.on("removeListener",b("pull")),this.push.on("removeListener",b("push"));const l=Promise.all([this.push,this.pull]).then(u=>{const c={push:u[0],pull:u[1]};return this.emit("complete",c),i&&i(null,c),this.removeAllListeners(),c},u=>{if(this.cancel(),i?i(u):this.emit("error",u),this.removeAllListeners(),i)throw u});this.then=function(u,c){return l.then(u,c)},this.catch=function(u){return l.catch(u)}}cancel(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}};function p_(t){t.replicate=_a,t.sync=v_,Object.defineProperty(t.prototype,"replicate",{get:function(){var e=this;return typeof this.replicateMethods>"u"&&(this.replicateMethods={from:function(n,r,i){return e.constructor.replicate(n,e,r,i)},to:function(n,r,i){return e.constructor.replicate(e,n,r,i)}}),this.replicateMethods}}),t.prototype.sync=function(e,n,r){return this.constructor.sync(this,e,n,r)}}we.plugin(qm).plugin(Fm).plugin(r_).plugin(p_);class uo extends Error{constructor(e){super(e),this.name="DecryptionError",Object.setPrototypeOf(this,uo.prototype)}}class Ur{constructor(e,n,r="derive"){bt(this,"keyPromise",null);bt(this,"passphrase");bt(this,"crypto");bt(this,"passphraseMode");this.passphrase=e,this.crypto=n||(typeof window<"u"?window.crypto:globalThis.crypto),this.passphraseMode=r}async getKey(){return this.keyPromise?this.keyPromise:(this.keyPromise=(async()=>{const n=new TextEncoder().encode(this.passphrase);let r;if(this.passphraseMode==="derive"){const s=await this.crypto.subtle.importKey("raw",n,"PBKDF2",!1,["deriveBits"]);r=await this.crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},s,256)}else r=await this.crypto.subtle.digest("SHA-256",n);return await this.crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt","decrypt"])})(),this.keyPromise)}static fromHexString(e){return new Uint8Array(e.match(/.{1,2}/g).map(n=>parseInt(n,16)))}static toHexString(e){return e.reduce((n,r)=>n+r.toString(16).padStart(2,"0"),"")}async encrypt(e){const n=new TextEncoder,r=await this.getKey(),i=n.encode(e),s=this.crypto.getRandomValues(new Uint8Array(12)),o=await this.crypto.subtle.encrypt({name:"AES-GCM",iv:s},r,i);return`${Ur.toHexString(s)}|${Ur.toHexString(new Uint8Array(o))}`}async decrypt(e){try{const n=await this.getKey(),[r,i]=e.split("|").map(o=>Ur.fromHexString(o)),s=await this.crypto.subtle.decrypt({name:"AES-GCM",iv:r},n,i);return new TextDecoder().decode(s)}catch(n){throw new uo(`Could not decrypt: ${n instanceof Error?n.message:String(n)}`)}}}class m_{constructor(e,n,r,i){bt(this,"db");bt(this,"encryptionHelper");bt(this,"listener");bt(this,"changesHandler",null);bt(this,"syncHandler",null);bt(this,"remoteUrl",null);bt(this,"processingChain",Promise.resolve());this.db=e,this.encryptionHelper=new Ur(n,void 0,(i==null?void 0:i.passphraseMode)||"derive"),this.listener=r||{onChange:()=>{},onDelete:()=>{}}}async loadAll(){try{const e=await this.db.allDocs({include_docs:!0,conflicts:!0}),n=new Map,r=[],i=[];for(const s of e.rows){if(!s.doc||s.id.startsWith("_design/"))continue;const o=s.doc;if(o.d)try{const f=await this.decryptDoc(o),g=this.parseFullId(o._id);if(g&&(n.has(g.table)||n.set(g.table,[]),n.get(g.table).push(f)),o._conflicts&&o._conflicts.length>0){const w=await this.buildConflictInfo(o._id,o._rev,o._conflicts,f);i.push(w)}}catch(f){r.push({docId:o._id,error:f instanceof Error?f:new Error(String(f)),rawDoc:o})}}if(n.size>0){const s=Array.from(n.entries()).map(([o,f])=>({table:o,docs:f}));this.listener.onChange(s)}r.length>0&&this.listener.onError&&this.listener.onError(r),i.length>0&&this.listener.onConflict&&this.listener.onConflict(i)}catch(e){console.error("[EncryptedPouch] loadAll failed:",e)}this.setupSubscription()}async put(e,n){var o;n._id||(n._id=((o=crypto.randomUUID)==null?void 0:o.call(crypto))||`${Date.now()}-${Math.random().toString(36).slice(2)}`);const r=`${e}_${n._id}`,i=await this.encryptDoc(n,r);"_rev"in n&&n._rev&&(i._rev=n._rev);const s=await this.db.put(i);return{...n,_id:n._id,_rev:s.rev}}async get(e,n){try{const r=`${e}_${n}`,i=await this.db.get(r,{conflicts:!0}),s=await this.decryptDoc(i);if(i._conflicts&&i._conflicts.length>0&&this.listener.onConflict){const o=await this.buildConflictInfo(i._id,i._rev,i._conflicts,s);this.listener.onConflict([o])}return s}catch{return null}}async delete(e,n){const r=`${e}_${n}`;try{const i=await this.db.get(r);await this.db.remove(i)}catch(i){console.warn(`[EncryptedPouch] Could not delete ${r}:`,i)}}async deleteAllLocal(){this.disconnectRemote();const n=(await this.db.allDocs({include_docs:!1})).rows.filter(r=>!r.id.startsWith("_design/")).map(r=>({_id:r.id,_rev:r.value.rev,_deleted:!0}));n.length>0&&await this.db.bulkDocs(n)}async deleteAllAndSync(){if(!this.syncHandler)throw new Error("Sync is not connected. Call connectRemote() first or use deleteAllLocal() instead.");const n=(await this.db.allDocs({include_docs:!1})).rows.filter(r=>!r.id.startsWith("_design/")).map(r=>({_id:r.id,_rev:r.value.rev,_deleted:!0}));if(n.length!==0)return await this.db.bulkDocs(n),new Promise((r,i)=>{let s=0,o=!1;const f=setTimeout(()=>{o||(o=!0,i(new Error("Timeout waiting for deletions to sync to remote")))},3e4),g=A=>{var h,y;A.direction==="push"&&(s+=A.change.docs_written||0,s>=n.length&&!o&&(clearTimeout(f),o=!0,(h=this.syncHandler)==null||h.removeListener("change",g),(y=this.syncHandler)==null||y.removeListener("error",w),r()))},w=A=>{var h,y;o||(clearTimeout(f),o=!0,(h=this.syncHandler)==null||h.removeListener("change",g),(y=this.syncHandler)==null||y.removeListener("error",w),i(A))};this.syncHandler.on("change",g),this.syncHandler.on("error",w)})}async getAll(e){const n=await this.db.allDocs({include_docs:!0,conflicts:!0}),r=[],i=[];for(const s of n.rows){if(!s.doc||s.id.startsWith("_design/"))continue;const o=s.doc;if(o.d)try{const f=await this.decryptDoc(o),g=this.parseFullId(o._id);g&&(!e||g.table===e)&&r.push(f)}catch(f){i.push({docId:o._id,error:f instanceof Error?f:new Error(String(f)),rawDoc:o})}}return i.length>0&&this.listener.onError&&this.listener.onError(i),r}async connectRemote(e){this.disconnectRemote(),this.remoteUrl=e.url;const n={live:e.live??!0,retry:e.retry??!0};return this.syncHandler=this.db.sync(e.url,n),this.listener.onSync&&this.syncHandler.on("change",r=>{this.listener.onSync&&this.listener.onSync({direction:r.direction,change:r.change})}).on("error",r=>{console.error("[EncryptedPouch] sync error:",r)}),new Promise((r,i)=>{let s=!1;const o=setTimeout(()=>{s||(s=!0,r())},5e3);this.syncHandler.on("active",()=>{s||(clearTimeout(o),s=!0,r())}),this.syncHandler.on("error",f=>{s||(clearTimeout(o),s=!0,i(f))})})}disconnectRemote(){this.syncHandler&&(this.syncHandler.cancel(),this.syncHandler=null),this.remoteUrl=null}async syncNow(){if(!this.remoteUrl)throw new Error("No remote connection configured. Call connectRemote() first.");return new Promise((e,n)=>{this.db.sync(this.remoteUrl,{live:!1,retry:!1}).on("complete",i=>{this.listener.onSync&&(i.push&&i.push.docs_written!==void 0&&this.listener.onSync({direction:"push",change:{docs_read:i.push.docs_read,docs_written:i.push.docs_written,doc_write_failures:i.push.doc_write_failures,errors:i.push.errors}}),i.pull&&i.pull.docs_written!==void 0&&this.listener.onSync({direction:"pull",change:{docs_read:i.pull.docs_read,docs_written:i.pull.docs_written,doc_write_failures:i.pull.doc_write_failures,errors:i.pull.errors}})),e()}).on("error",i=>{console.error("[EncryptedPouch] syncNow error:",i),n(i)})})}async resolveConflict(e,n,r){const i=`${e}_${n}`,s=await this.db.get(i,{conflicts:!0});if(!s._conflicts||s._conflicts.length===0)throw new Error(`No conflicts found for ${i}`);await this.put(e,r);for(const o of s._conflicts)try{await this.db.remove(i,o)}catch(f){console.warn(`Failed to remove conflict ${i}@${o}:`,f)}}async getConflictInfo(e,n){try{const r=`${e}_${n}`,i=await this.db.get(r,{conflicts:!0});if(!i._conflicts||i._conflicts.length===0)return null;const s=await this.decryptDoc(i);return await this.buildConflictInfo(i._id,i._rev,i._conflicts,s)}catch{return null}}reconnect(){this.changesHandler&&(this.changesHandler.cancel(),this.changesHandler=null),this.setupSubscription()}setupSubscription(){this.changesHandler=this.db.changes({since:"now",live:!0,include_docs:!0,conflicts:!0}).on("change",e=>{this.processingChain=this.processingChain.then(()=>this.handleChange(e)).catch(n=>console.error("[EncryptedPouch] handleChange error:",n))}).on("error",e=>{console.error("[EncryptedPouch] changes feed error:",e)})}async handleChange(e){if(e.id.startsWith("_design/"))return;const n=e.doc;if(e.deleted||!(n!=null&&n.d)){const s=this.parseFullId(e.id);s&&this.listener.onDelete([{table:s.table,docs:[{_id:s.id}]}]);return}const r=[],i=[];try{const s=await this.decryptDoc(n);if(n._conflicts&&n._conflicts.length>0){const f=await this.buildConflictInfo(n._id,n._rev,n._conflicts,s);i.push(f)}const o=this.parseFullId(n._id);o&&this.listener.onChange([{table:o.table,docs:[s]}])}catch(s){r.push({docId:n._id,error:s instanceof Error?s:new Error(String(s)),rawDoc:n})}r.length>0&&this.listener.onError&&this.listener.onError(r),i.length>0&&this.listener.onConflict&&this.listener.onConflict(i)}async buildConflictInfo(e,n,r,i){const s=this.parseFullId(e);if(!s)throw new Error(`Invalid ID format: ${e}`);const o=[],f=[];for(const g of r)try{const w=await this.db.get(e,{rev:g}),A=await this.decryptDoc(w);o.push(A)}catch(w){f.push({docId:`${e}@${g}`,error:w instanceof Error?w:new Error(String(w)),rawDoc:{_id:e,_rev:g}})}return f.length>0&&this.listener.onError&&this.listener.onError(f),{docId:e,table:s.table,id:s.id,currentRev:n,conflictRevs:r,winner:i,losers:o}}async decryptDoc(e){const n=this.parseFullId(e._id);if(!n)throw new Error(`Invalid ID format: ${e._id}`);const r=JSON.parse(await this.encryptionHelper.decrypt(e.d));return{_id:n.id,_rev:e._rev,...r}}async encryptDoc(e,n){const r={},i={_id:n};for(const[s,o]of Object.entries(e))s==="_id"||s==="_rev"||(s.startsWith("_")?i[s]=o:r[s]=o);return i.d=await this.encryptionHelper.encrypt(JSON.stringify(r)),i}parseFullId(e){const n=e.indexOf("_");return n===-1?null:{table:e.slice(0,n),id:e.slice(n+1)}}}var co={};co.test=function(){return typeof globalThis.queueMicrotask=="function"};co.install=function(t){return function(){globalThis.queueMicrotask(t)}};var lo={},$f=globalThis.MutationObserver||globalThis.WebKitMutationObserver;lo.test=function(){return $f};lo.install=function(t){var e=0,n=new $f(t),r=globalThis.document.createTextNode("");return n.observe(r,{characterData:!0}),function(){r.data=e=++e%2}};var fo={};fo.test=function(){return globalThis.setImmediate?!1:typeof globalThis.MessageChannel<"u"};fo.install=function(t){var e=new globalThis.MessageChannel;return e.port1.onmessage=t,function(){e.port2.postMessage(0)}};var ho={};ho.test=function(){return"document"in globalThis&&"onreadystatechange"in globalThis.document.createElement("script")};ho.install=function(t){return function(){var e=globalThis.document.createElement("script");return e.onreadystatechange=function(){t(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},globalThis.document.documentElement.appendChild(e),t}};var vo={};vo.test=function(){return!0};vo.install=function(t){return function(){setTimeout(t,0)}};var Nr=[_l,co,lo,fo,ho,vo],vr,qn,Fr=-1,gn=[],ya=!1;function __(){!vr||!qn||(vr=!1,qn.length?gn=qn.concat(gn):Fr=-1,gn.length&&Ef())}function Ef(){if(!vr){ya=!1,vr=!0;for(var t=gn.length,e=setTimeout(__);t;){for(qn=gn,gn=[];qn&&++Fr<t;)qn[Fr].run();Fr=-1,t=gn.length}qn=null,Fr=-1,vr=!1,clearTimeout(e)}}var Sf,Ir=-1,y_=Nr.length;for(;++Ir<y_;)if(Nr[Ir]&&Nr[Ir].test&&Nr[Ir].test()){Sf=Nr[Ir].install(Ef);break}function Cf(t,e){this.fun=t,this.array=e}Cf.prototype.run=function(){var t=this.fun,e=this.array;switch(e.length){case 0:return t();case 1:return t(e[0]);case 2:return t(e[0],e[1]);case 3:return t(e[0],e[1],e[2]);default:return t.apply(null,e)}};var w_=b_;function b_(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];gn.push(new Cf(t,e)),!ya&&!vr&&(ya=!0,Sf())}const Wt=Gn(w_);var xf={exports:{}};(function(t,e){(function(n){t.exports=n()})(function(n){var r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function i(p,l){var u=p[0],c=p[1],d=p[2],v=p[3];u+=(c&d|~c&v)+l[0]-680876936|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[1]-389564586|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[2]+606105819|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[3]-1044525330|0,c=(c<<22|c>>>10)+d|0,u+=(c&d|~c&v)+l[4]-176418897|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[5]+1200080426|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[6]-1473231341|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[7]-45705983|0,c=(c<<22|c>>>10)+d|0,u+=(c&d|~c&v)+l[8]+1770035416|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[9]-1958414417|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[10]-42063|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[11]-1990404162|0,c=(c<<22|c>>>10)+d|0,u+=(c&d|~c&v)+l[12]+1804603682|0,u=(u<<7|u>>>25)+c|0,v+=(u&c|~u&d)+l[13]-40341101|0,v=(v<<12|v>>>20)+u|0,d+=(v&u|~v&c)+l[14]-1502002290|0,d=(d<<17|d>>>15)+v|0,c+=(d&v|~d&u)+l[15]+1236535329|0,c=(c<<22|c>>>10)+d|0,u+=(c&v|d&~v)+l[1]-165796510|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[6]-1069501632|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[11]+643717713|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[0]-373897302|0,c=(c<<20|c>>>12)+d|0,u+=(c&v|d&~v)+l[5]-701558691|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[10]+38016083|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[15]-660478335|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[4]-405537848|0,c=(c<<20|c>>>12)+d|0,u+=(c&v|d&~v)+l[9]+568446438|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[14]-1019803690|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[3]-187363961|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[8]+1163531501|0,c=(c<<20|c>>>12)+d|0,u+=(c&v|d&~v)+l[13]-1444681467|0,u=(u<<5|u>>>27)+c|0,v+=(u&d|c&~d)+l[2]-51403784|0,v=(v<<9|v>>>23)+u|0,d+=(v&c|u&~c)+l[7]+1735328473|0,d=(d<<14|d>>>18)+v|0,c+=(d&u|v&~u)+l[12]-1926607734|0,c=(c<<20|c>>>12)+d|0,u+=(c^d^v)+l[5]-378558|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[8]-2022574463|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[11]+1839030562|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[14]-35309556|0,c=(c<<23|c>>>9)+d|0,u+=(c^d^v)+l[1]-1530992060|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[4]+1272893353|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[7]-155497632|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[10]-1094730640|0,c=(c<<23|c>>>9)+d|0,u+=(c^d^v)+l[13]+681279174|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[0]-358537222|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[3]-722521979|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[6]+76029189|0,c=(c<<23|c>>>9)+d|0,u+=(c^d^v)+l[9]-640364487|0,u=(u<<4|u>>>28)+c|0,v+=(u^c^d)+l[12]-421815835|0,v=(v<<11|v>>>21)+u|0,d+=(v^u^c)+l[15]+530742520|0,d=(d<<16|d>>>16)+v|0,c+=(d^v^u)+l[2]-995338651|0,c=(c<<23|c>>>9)+d|0,u+=(d^(c|~v))+l[0]-198630844|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[7]+1126891415|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[14]-1416354905|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[5]-57434055|0,c=(c<<21|c>>>11)+d|0,u+=(d^(c|~v))+l[12]+1700485571|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[3]-1894986606|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[10]-1051523|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[1]-2054922799|0,c=(c<<21|c>>>11)+d|0,u+=(d^(c|~v))+l[8]+1873313359|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[15]-30611744|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[6]-1560198380|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[13]+1309151649|0,c=(c<<21|c>>>11)+d|0,u+=(d^(c|~v))+l[4]-145523070|0,u=(u<<6|u>>>26)+c|0,v+=(c^(u|~d))+l[11]-1120210379|0,v=(v<<10|v>>>22)+u|0,d+=(u^(v|~c))+l[2]+718787259|0,d=(d<<15|d>>>17)+v|0,c+=(v^(d|~u))+l[9]-343485551|0,c=(c<<21|c>>>11)+d|0,p[0]=u+p[0]|0,p[1]=c+p[1]|0,p[2]=d+p[2]|0,p[3]=v+p[3]|0}function s(p){var l=[],u;for(u=0;u<64;u+=4)l[u>>2]=p.charCodeAt(u)+(p.charCodeAt(u+1)<<8)+(p.charCodeAt(u+2)<<16)+(p.charCodeAt(u+3)<<24);return l}function o(p){var l=[],u;for(u=0;u<64;u+=4)l[u>>2]=p[u]+(p[u+1]<<8)+(p[u+2]<<16)+(p[u+3]<<24);return l}function f(p){var l=p.length,u=[1732584193,-271733879,-1732584194,271733878],c,d,v,D,I,k;for(c=64;c<=l;c+=64)i(u,s(p.substring(c-64,c)));for(p=p.substring(c-64),d=p.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<d;c+=1)v[c>>2]|=p.charCodeAt(c)<<(c%4<<3);if(v[c>>2]|=128<<(c%4<<3),c>55)for(i(u,v),c=0;c<16;c+=1)v[c]=0;return D=l*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),I=parseInt(D[2],16),k=parseInt(D[1],16)||0,v[14]=I,v[15]=k,i(u,v),u}function g(p){var l=p.length,u=[1732584193,-271733879,-1732584194,271733878],c,d,v,D,I,k;for(c=64;c<=l;c+=64)i(u,o(p.subarray(c-64,c)));for(p=c-64<l?p.subarray(c-64):new Uint8Array(0),d=p.length,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],c=0;c<d;c+=1)v[c>>2]|=p[c]<<(c%4<<3);if(v[c>>2]|=128<<(c%4<<3),c>55)for(i(u,v),c=0;c<16;c+=1)v[c]=0;return D=l*8,D=D.toString(16).match(/(.*?)(.{0,8})$/),I=parseInt(D[2],16),k=parseInt(D[1],16)||0,v[14]=I,v[15]=k,i(u,v),u}function w(p){var l="",u;for(u=0;u<4;u+=1)l+=r[p>>u*8+4&15]+r[p>>u*8&15];return l}function A(p){var l;for(l=0;l<p.length;l+=1)p[l]=w(p[l]);return p.join("")}A(f("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&function(){function p(l,u){return l=l|0||0,l<0?Math.max(l+u,0):Math.min(l,u)}ArrayBuffer.prototype.slice=function(l,u){var c=this.byteLength,d=p(l,c),v=c,D,I,k,M;return u!==n&&(v=p(u,c)),d>v?new ArrayBuffer(0):(D=v-d,I=new ArrayBuffer(D),k=new Uint8Array(I),M=new Uint8Array(this,d,D),k.set(M),I)}}();function h(p){return/[\u0080-\uFFFF]/.test(p)&&(p=unescape(encodeURIComponent(p))),p}function y(p,l){var u=p.length,c=new ArrayBuffer(u),d=new Uint8Array(c),v;for(v=0;v<u;v+=1)d[v]=p.charCodeAt(v);return l?d:c}function E(p){return String.fromCharCode.apply(null,new Uint8Array(p))}function S(p,l,u){var c=new Uint8Array(p.byteLength+l.byteLength);return c.set(new Uint8Array(p)),c.set(new Uint8Array(l),p.byteLength),c}function O(p){var l=[],u=p.length,c;for(c=0;c<u-1;c+=2)l.push(parseInt(p.substr(c,2),16));return String.fromCharCode.apply(String,l)}function b(){this.reset()}return b.prototype.append=function(p){return this.appendBinary(h(p)),this},b.prototype.appendBinary=function(p){this._buff+=p,this._length+=p.length;var l=this._buff.length,u;for(u=64;u<=l;u+=64)i(this._hash,s(this._buff.substring(u-64,u)));return this._buff=this._buff.substring(u-64),this},b.prototype.end=function(p){var l=this._buff,u=l.length,c,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v;for(c=0;c<u;c+=1)d[c>>2]|=l.charCodeAt(c)<<(c%4<<3);return this._finish(d,u),v=A(this._hash),p&&(v=O(v)),this.reset(),v},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(p){return this._buff=p.buff,this._length=p.length,this._hash=p.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(p,l){var u=l,c,d,v;if(p[u>>2]|=128<<(u%4<<3),u>55)for(i(this._hash,p),u=0;u<16;u+=1)p[u]=0;c=this._length*8,c=c.toString(16).match(/(.*?)(.{0,8})$/),d=parseInt(c[2],16),v=parseInt(c[1],16)||0,p[14]=d,p[15]=v,i(this._hash,p)},b.hash=function(p,l){return b.hashBinary(h(p),l)},b.hashBinary=function(p,l){var u=f(p),c=A(u);return l?O(c):c},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(p){var l=S(this._buff.buffer,p),u=l.length,c;for(this._length+=p.byteLength,c=64;c<=u;c+=64)i(this._hash,o(l.subarray(c-64,c)));return this._buff=c-64<u?new Uint8Array(l.buffer.slice(c-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(p){var l=this._buff,u=l.length,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d,v;for(d=0;d<u;d+=1)c[d>>2]|=l[d]<<(d%4<<3);return this._finish(c,u),v=A(this._hash),p&&(v=O(v)),this.reset(),v},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var p=b.prototype.getState.call(this);return p.buff=E(p.buff),p},b.ArrayBuffer.prototype.setState=function(p){return p.buff=y(p.buff,!0),b.prototype.setState.call(this,p)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(p,l){var u=g(new Uint8Array(p)),c=A(u);return l?O(c):c},b})})(xf);var A_=xf.exports;const wa=Gn(A_);var yi,$_=new Uint8Array(16);function E_(){if(!yi&&(yi=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!yi))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yi($_)}const S_=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function C_(t){return typeof t=="string"&&S_.test(t)}var tt=[];for(var Ms=0;Ms<256;++Ms)tt.push((Ms+256).toString(16).substr(1));function x_(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(tt[t[e+0]]+tt[t[e+1]]+tt[t[e+2]]+tt[t[e+3]]+"-"+tt[t[e+4]]+tt[t[e+5]]+"-"+tt[t[e+6]]+tt[t[e+7]]+"-"+tt[t[e+8]]+tt[t[e+9]]+"-"+tt[t[e+10]]+tt[t[e+11]]+tt[t[e+12]]+tt[t[e+13]]+tt[t[e+14]]+tt[t[e+15]]).toLowerCase();if(!C_(n))throw TypeError("Stringified UUID is invalid");return n}function go(t,e,n){t=t||{};var r=t.random||(t.rng||E_)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(var i=0;i<16;++i)e[n+i]=r[i];return e}return x_(r)}var Ki={};Ki.stringify=function(e){var n=[];n.push({obj:e});for(var r="",i,s,o,f,g,w,A,h,y,E,S;i=n.pop();)if(s=i.obj,o=i.prefix||"",f=i.val||"",r+=o,f)r+=f;else if(typeof s!="object")r+=typeof s>"u"?null:JSON.stringify(s);else if(s===null)r+="null";else if(Array.isArray(s)){for(n.push({val:"]"}),g=s.length-1;g>=0;g--)w=g===0?"":",",n.push({obj:s[g],prefix:w});n.push({val:"["})}else{A=[];for(h in s)s.hasOwnProperty(h)&&A.push(h);for(n.push({val:"}"}),g=A.length-1;g>=0;g--)y=A[g],E=s[y],S=g>0?",":"",S+=JSON.stringify(y)+":",n.push({obj:E,prefix:S});n.push({val:"{"})}return r};function ur(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,s=r.index;if(Array.isArray(i))i.push(t);else if(s===e.length-2){var o=e.pop();i[o]=t}else e.push(t)}Ki.parse=function(t){for(var e=[],n=[],r=0,i,s,o,f,g,w,A,h,y;;){if(i=t[r++],i==="}"||i==="]"||typeof i>"u"){if(e.length===1)return e.pop();ur(e.pop(),e,n);continue}switch(i){case" ":case"	":case`
`:case":":case",":break;case"n":r+=3,ur(null,e,n);break;case"t":r+=3,ur(!0,e,n);break;case"f":r+=4,ur(!1,e,n);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(s="",r--;;)if(o=t[r++],/[\d\.\-e\+]/.test(o))s+=o;else{r--;break}ur(parseFloat(s),e,n);break;case'"':for(f="",g=void 0,w=0;A=t[r++],A!=='"'||g==="\\"&&w%2===1;)f+=A,g=A,g==="\\"?w++:w=0;ur(JSON.parse('"'+f+'"'),e,n);break;case"[":h={element:[],index:e.length},e.push(h.element),n.push(h);break;case"{":y={element:{},index:e.length},e.push(y.element),n.push(y);break;default:throw new Error("unexpectedly reached end of input: "+i)}}};var po={exports:{}},gr=typeof Reflect=="object"?Reflect:null,Nc=gr&&typeof gr.apply=="function"?gr.apply:function(e,n,r){return Function.prototype.apply.call(e,n,r)},Ei;gr&&typeof gr.ownKeys=="function"?Ei=gr.ownKeys:Object.getOwnPropertySymbols?Ei=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Ei=function(e){return Object.getOwnPropertyNames(e)};function O_(t){console&&console.warn&&console.warn(t)}var Of=Number.isNaN||function(e){return e!==e};function Ie(){Ie.init.call(this)}po.exports=Ie;po.exports.once=q_;Ie.EventEmitter=Ie;Ie.prototype._events=void 0;Ie.prototype._eventsCount=0;Ie.prototype._maxListeners=void 0;var Fc=10;function zi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(Ie,"defaultMaxListeners",{enumerable:!0,get:function(){return Fc},set:function(t){if(typeof t!="number"||t<0||Of(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Fc=t}});Ie.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};Ie.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Of(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Tf(t){return t._maxListeners===void 0?Ie.defaultMaxListeners:t._maxListeners}Ie.prototype.getMaxListeners=function(){return Tf(this)};Ie.prototype.emit=function(e){for(var n=[],r=1;r<arguments.length;r++)n.push(arguments[r]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var f=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw f.context=o,f}var g=s[e];if(g===void 0)return!1;if(typeof g=="function")Nc(g,this,n);else for(var w=g.length,A=Pf(g,w),r=0;r<w;++r)Nc(A[r],this,n);return!0};function kf(t,e,n,r){var i,s,o;if(zi(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=r?[n,o]:[o,n]:r?o.unshift(n):o.push(n),i=Tf(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var f=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");f.name="MaxListenersExceededWarning",f.emitter=t,f.type=e,f.count=o.length,O_(f)}return t}Ie.prototype.addListener=function(e,n){return kf(this,e,n,!1)};Ie.prototype.on=Ie.prototype.addListener;Ie.prototype.prependListener=function(e,n){return kf(this,e,n,!0)};function T_(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Df(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},i=T_.bind(r);return i.listener=n,r.wrapFn=i,i}Ie.prototype.once=function(e,n){return zi(n),this.on(e,Df(this,e,n)),this};Ie.prototype.prependOnceListener=function(e,n){return zi(n),this.prependListener(e,Df(this,e,n)),this};Ie.prototype.removeListener=function(e,n){var r,i,s,o,f;if(zi(n),i=this._events,i===void 0)return this;if(r=i[e],r===void 0)return this;if(r===n||r.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,r.listener||n));else if(typeof r!="function"){for(s=-1,o=r.length-1;o>=0;o--)if(r[o]===n||r[o].listener===n){f=r[o].listener,s=o;break}if(s<0)return this;s===0?r.shift():k_(r,s),r.length===1&&(i[e]=r[0]),i.removeListener!==void 0&&this.emit("removeListener",e,f||n)}return this};Ie.prototype.off=Ie.prototype.removeListener;Ie.prototype.removeAllListeners=function(e){var n,r,i;if(r=this._events,r===void 0)return this;if(r.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):r[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete r[e]),this;if(arguments.length===0){var s=Object.keys(r),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=r[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(i=n.length-1;i>=0;i--)this.removeListener(e,n[i]);return this};function qf(t,e,n){var r=t._events;if(r===void 0)return[];var i=r[e];return i===void 0?[]:typeof i=="function"?n?[i.listener||i]:[i]:n?D_(i):Pf(i,i.length)}Ie.prototype.listeners=function(e){return qf(this,e,!0)};Ie.prototype.rawListeners=function(e){return qf(this,e,!1)};Ie.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):Lf.call(t,e)};Ie.prototype.listenerCount=Lf;function Lf(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}Ie.prototype.eventNames=function(){return this._eventsCount>0?Ei(this._events):[]};function Pf(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function k_(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function D_(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function q_(t,e){return new Promise(function(n,r){function i(o){t.removeListener(e,s),r(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),n([].slice.call(arguments))}If(t,e,s,{once:!0}),e!=="error"&&L_(t,i,{once:!0})})}function L_(t,e,n){typeof t.on=="function"&&If(t,"error",e,n)}function If(t,e,n,r){if(typeof t.on=="function")r.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){r.once&&t.removeEventListener(e,i),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var P_=po.exports;const rn=Gn(P_);function Hi(t){return"$"+t}function jf(t){return t.substring(1)}function an(){this._store={}}an.prototype.get=function(t){var e=Hi(t);return this._store[e]};an.prototype.set=function(t,e){var n=Hi(t);return this._store[n]=e,!0};an.prototype.has=function(t){var e=Hi(t);return e in this._store};an.prototype.keys=function(){return Object.keys(this._store).map(t=>jf(t))};an.prototype.delete=function(t){var e=Hi(t),n=e in this._store;return delete this._store[e],n};an.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var i=e[n],s=this._store[i];i=jf(i),t(s,i)}};Object.defineProperty(an.prototype,"size",{get:function(){return Object.keys(this._store).length}});function Xr(t){if(this._store=new an,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}Xr.prototype.add=function(t){return this._store.set(t,!0)};Xr.prototype.has=function(t){return this._store.has(t)};Xr.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})};Object.defineProperty(Xr.prototype,"size",{get:function(){return this._store.size}});function I_(){if(typeof Symbol>"u"||typeof Map>"u"||typeof Set>"u")return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}var $r,dt;I_()?($r=Set,dt=Map):($r=Xr,dt=an);function j_(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer||typeof Blob<"u"&&t instanceof Blob}function R_(t){if(typeof t.slice=="function")return t.slice(0);var e=new ArrayBuffer(t.byteLength),n=new Uint8Array(e),r=new Uint8Array(t);return n.set(r),e}function B_(t){if(t instanceof ArrayBuffer)return R_(t);var e=t.size,n=t.type;return typeof t.slice=="function"?t.slice(0,e,n):t.webkitSlice(0,e,n)}var Rf=Function.prototype.toString,N_=Rf.call(Object);function F_(t){var e=Object.getPrototypeOf(t);if(e===null)return!0;var n=e.constructor;return typeof n=="function"&&n instanceof n&&Rf.call(n)==N_}function Ze(t){var e,n,r;if(!t||typeof t!="object")return t;if(Array.isArray(t)){for(e=[],n=0,r=t.length;n<r;n++)e[n]=Ze(t[n]);return e}if(t instanceof Date&&isFinite(t))return t.toISOString();if(j_(t))return B_(t);if(!F_(t))return t;e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var i=Ze(t[n]);typeof i<"u"&&(e[n]=i)}return e}function Bf(t){var e=!1;return function(...n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)}}function Nf(t){return function(...e){e=Ze(e);var n=this,r=typeof e[e.length-1]=="function"?e.pop():!1,i=new Promise(function(s,o){var f;try{var g=Bf(function(w,A){w?o(w):s(A)});e.push(g),f=t.apply(n,e),f&&typeof f.then=="function"&&s(f)}catch(w){o(w)}});return r&&i.then(function(s){r(null,s)},r),i}}function M_(t,e,n){if(t.constructor.listeners("debug").length){for(var r=["api",t.name,e],i=0;i<n.length-1;i++)r.push(n[i]);t.constructor.emit("debug",r);var s=n[n.length-1];n[n.length-1]=function(o,f){var g=["api",t.name,e];g=g.concat(o?["error",o]:["success",f]),t.constructor.emit("debug",g),s(o,f)}}}function ze(t,e){return Nf(function(...n){if(this._closed)return Promise.reject(new Error("database is closed"));if(this._destroyed)return Promise.reject(new Error("database is destroyed"));var r=this;return M_(r,t,n),this.taskqueue.isReady?e.apply(this,n):new Promise(function(i,s){r.taskqueue.addTask(function(o){o?s(o):i(r[t].apply(r,n))})})})}function Yr(t,e){for(var n={},r=0,i=e.length;r<i;r++){var s=e[r];s in t&&(n[s]=t[s])}return n}var U_=6;function Mc(t){return t}function K_(t){return[{ok:t}]}function Ff(t,e,n){var r=e.docs,i=new dt;r.forEach(function(O){i.has(O.id)?i.get(O.id).push(O):i.set(O.id,[O])});var s=i.size,o=0,f=new Array(s);function g(){var O=[];f.forEach(function(b){b.docs.forEach(function(p){O.push({id:b.id,docs:[p]})})}),n(null,{results:O})}function w(){++o===s&&g()}function A(O,b,p){f[O]={id:b,docs:p},w()}var h=[];i.forEach(function(O,b){h.push(b)});var y=0;function E(){if(!(y>=h.length)){var O=Math.min(y+U_,h.length),b=h.slice(y,O);S(b,y),y+=b.length}}function S(O,b){O.forEach(function(p,l){var u=b+l,c=i.get(p),d=Yr(c[0],["atts_since","attachments"]);d.open_revs=c.map(function(D){return D.rev}),d.open_revs=d.open_revs.filter(Mc);var v=Mc;d.open_revs.length===0&&(delete d.open_revs,v=K_),["revs","attachments","binary","ajax","latest"].forEach(function(D){D in e&&(d[D]=e[D])}),t.get(p,d,function(D,I){var k;D?k=[{error:D}]:k=v(I),A(u,p,k),E()})})}E()}var ba;try{localStorage.setItem("_pouch_check_localstorage",1),ba=!!localStorage.getItem("_pouch_check_localstorage")}catch{ba=!1}function qi(){return ba}class z_ extends rn{constructor(){super(),this._listeners={},qi()&&addEventListener("storage",e=>{this.emit(e.key)})}addListener(e,n,r,i){if(this._listeners[n])return;var s=!1,o=this;function f(){if(!o._listeners[n])return;if(s){s="waiting";return}s=!0;var g=Yr(i,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary","return_docs"]);function w(){s=!1}r.changes(g).on("change",function(A){A.seq>i.since&&!i.cancelled&&(i.since=A.seq,i.onChange(A))}).on("complete",function(){s==="waiting"&&Wt(f),s=!1}).on("error",w)}this._listeners[n]=f,this.on(e,f)}removeListener(e,n){n in this._listeners&&(super.removeListener(e,this._listeners[n]),delete this._listeners[n])}notifyLocalWindows(e){qi()&&(localStorage[e]=localStorage[e]==="a"?"b":"a")}notify(e){this.emit(e),this.notifyLocalWindows(e)}}function xt(t){if(typeof console<"u"&&typeof console[t]=="function"){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function H_(t,e){var n=6e5;t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e=e+1,e>n&&(t=n>>1,e=n);var r=Math.random(),i=e-t;return~~(i*r+t)}function G_(t){var e=0;return t||(e=2e3),H_(t,e)}function Aa(t,e){xt("info","The above "+t+" is totally normal. "+e)}var $a;typeof Object.assign=="function"?$a=Object.assign:$a=function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(r!=null)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var Mn=$a;class Fe extends Error{constructor(e,n,r){super(),this.status=e,this.name=n,this.message=r,this.error=!0}toString(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})}}new Fe(401,"unauthorized","Name or password is incorrect.");var W_=new Fe(400,"bad_request","Missing JSON list of 'docs'"),Et=new Fe(404,"not_found","missing"),Er=new Fe(409,"conflict","Document update conflict"),Mf=new Fe(400,"bad_request","_id field must contain a string"),J_=new Fe(412,"missing_id","_id is required for puts"),Q_=new Fe(400,"bad_request","Only reserved document ids may start with underscore.");new Fe(412,"precondition_failed","Database not open");var mo=new Fe(500,"unknown_error","Database encountered an unknown error"),Uf=new Fe(500,"badarg","Some query argument is invalid");new Fe(400,"invalid_request","Request was invalid");var X_=new Fe(400,"query_parse_error","Some query parameter is invalid"),Uc=new Fe(500,"doc_validation","Bad special document member"),Gi=new Fe(400,"bad_request","Something wrong with the request"),Us=new Fe(400,"bad_request","Document must be a JSON object");new Fe(404,"not_found","Database not found");var _o=new Fe(500,"indexed_db_went_bad","unknown");new Fe(500,"web_sql_went_bad","unknown");new Fe(500,"levelDB_went_went_bad","unknown");new Fe(403,"forbidden","Forbidden by design doc validate_doc_update function");var Kf=new Fe(400,"bad_request","Invalid rev format");new Fe(412,"file_exists","The database could not be created, the file already exists.");var Y_=new Fe(412,"missing_stub","A pre-existing attachment stub wasn't found");new Fe(413,"invalid_url","Provided URL is invalid");function Ae(t,e){function n(r){for(var i=Object.getOwnPropertyNames(t),s=0,o=i.length;s<o;s++)typeof t[i[s]]!="function"&&(this[i[s]]=t[i[s]]);this.stack===void 0&&(this.stack=new Error().stack),r!==void 0&&(this.reason=r)}return n.prototype=Fe.prototype,new n(e)}function Sr(t){if(typeof t!="object"){var e=t;t=mo,t.data=e}return"error"in t&&t.error==="conflict"&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),"stack"in t||(t.stack=new Error().stack),t}function Z_(t,e,n){try{return!t(e,n)}catch(i){var r="Filter function threw: "+i.toString();return Ae(Gi,r)}}function yo(t){var e={},n=t.filter&&typeof t.filter=="function";return e.query=t.query_params,function(i){i.doc||(i.doc={});var s=n&&Z_(t.filter,i.doc,e);if(typeof s=="object")return s;if(s)return!1;if(!t.include_docs)delete i.doc;else if(!t.attachments)for(var o in i.doc._attachments)Object.prototype.hasOwnProperty.call(i.doc._attachments,o)&&(i.doc._attachments[o].stub=!0);return!0}}function Li(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function zf(t){var e;if(t?typeof t!="string"?e=Ae(Mf):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=Ae(Q_)):e=Ae(J_),e)throw e}function Ht(t){return typeof t._remote=="boolean"?t._remote:typeof t.type=="function"?(xt("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),t.type()==="http"):!1}function V_(t,e){return"listenerCount"in t?t.listenerCount(e):rn.listenerCount(t,e)}function Ea(t){if(!t)return null;var e=t.split("/");return e.length===2?e:e.length===1?[t,t]:null}function Kc(t){var e=Ea(t);return e?e.join("/"):null}var zc=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Hc="queryKey",ey=/(?:^|&)([^&=]*)=?([^&]*)/g,ty=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/;function Hf(t){for(var e=ty.exec(t),n={},r=14;r--;){var i=zc[r],s=e[r]||"",o=["user","password"].indexOf(i)!==-1;n[i]=o?decodeURIComponent(s):s}return n[Hc]={},n[zc[12]].replace(ey,function(f,g,w){g&&(n[Hc][g]=w)}),n}function wo(t,e){var n=[],r=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n.push(i),r.push(e[i]));return n.push(t),Function.apply(null,n).apply(null,r)}function Pi(t,e,n){return t.get(e).catch(function(r){if(r.status!==404)throw r;return{}}).then(function(r){var i=r._rev,s=n(r);return s?(s._id=e,s._rev=i,ny(t,s,n)):{updated:!1,rev:i}})}function ny(t,e,n){return t.put(e).then(function(r){return{updated:!0,rev:r.rev}},function(r){if(r.status!==409)throw r;return Pi(t,e._id,n)})}var bo=function(t){return atob(t)},Zr=function(t){return btoa(t)};function Ao(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(s){if(s.name!=="TypeError")throw s;for(var n=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}function ry(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function $o(t,e){return Ao([ry(t)],{type:e})}function Eo(t,e){return $o(bo(t),e)}function iy(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}function Gf(t,e){var n=new FileReader,r=typeof n.readAsBinaryString=="function";n.onloadend=function(i){var s=i.target.result||"";if(r)return e(s);e(iy(s))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function Wf(t,e){Gf(t,function(n){e(n)})}function So(t,e){Wf(t,function(n){e(Zr(n))})}function sy(t,e){var n=new FileReader;n.onloadend=function(r){var i=r.target.result||new ArrayBuffer(0);e(i)},n.readAsArrayBuffer(t)}var ay=self.setImmediate||self.setTimeout,oy=32768;function uy(t){return Zr(t)}function cy(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}function ly(t,e,n,r,i){(n>0||r<e.size)&&(e=cy(e,n,r)),sy(e,function(s){t.append(s),i()})}function fy(t,e,n,r,i){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),i()}function Co(t,e){var n=typeof t=="string",r=n?t.length:t.size,i=Math.min(oy,r),s=Math.ceil(r/i),o=0,f=n?new wa:new wa.ArrayBuffer,g=n?fy:ly;function w(){ay(h)}function A(){var y=f.end(!0),E=uy(y);e(E),f.destroy()}function h(){var y=o*i,E=y+i;o++,o<s?g(f,t,y,E,w):g(f,t,y,E,A)}h()}function Jf(t){return wa.hash(t)}function Qf(t,e){if(!e)return go().replace(/-/g,"").toLowerCase();var n=Mn({},t);return delete n._rev_tree,Jf(JSON.stringify(n))}var Wi=go;function Un(t){for(var e,n,r,i=t.rev_tree.slice(),s;s=i.pop();){var o=s.ids,f=o[2],g=s.pos;if(f.length){for(var w=0,A=f.length;w<A;w++)i.push({pos:g+1,ids:f[w]});continue}var h=!!o[1].deleted,y=o[0];(!e||(r!==h?r:n!==g?n<g:e<y))&&(e=y,n=g,r=h)}return n+"-"+e}function Kn(t,e){for(var n=t.slice(),r;r=n.pop();)for(var i=r.pos,s=r.ids,o=s[2],f=e(o.length===0,i,s[0],r.ctx,s[1]),g=0,w=o.length;g<w;g++)n.push({pos:i+1,ids:o[g],ctx:f})}function dy(t,e){return t.pos-e.pos}function xo(t){var e=[];Kn(t,function(i,s,o,f,g){i&&e.push({rev:s+"-"+o,pos:s,opts:g})}),e.sort(dy).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function Oo(t){for(var e=Un(t),n=xo(t.rev_tree),r=[],i=0,s=n.length;i<s;i++){var o=n[i];o.rev!==e&&!o.opts.deleted&&r.push(o.rev)}return r}function hy(t){var e=[];return Kn(t.rev_tree,function(n,r,i,s,o){o.status==="available"&&!n&&(e.push(r+"-"+i),o.status="missing")}),e}function vy(t,e){let n=[];const r=t.slice();let i;for(;i=r.pop();){const{pos:s,ids:o}=i,f=`${s}-${o[0]}`,g=o[2];if(n.push(f),f===e){if(g.length!==0)throw new Error("The requested revision is not a leaf");return n.reverse()}(g.length===0||g.length>1)&&(n=[]);for(let w=0,A=g.length;w<A;w++)r.push({pos:s+1,ids:g[w]})}if(n.length===0)throw new Error("The requested revision does not exist");return n.reverse()}function Xf(t){for(var e=[],n=t.slice(),r;r=n.pop();){var i=r.pos,s=r.ids,o=s[0],f=s[1],g=s[2],w=g.length===0,A=r.history?r.history.slice():[];A.push({id:o,opts:f}),w&&e.push({pos:i+1-A.length,ids:A});for(var h=0,y=g.length;h<y;h++)n.push({pos:i+1,ids:g[h],history:A})}return e.reverse()}function gy(t,e){return t.pos-e.pos}function py(t,e,n){for(var r=0,i=t.length,s;r<i;)s=r+i>>>1,n(t[s],e)<0?r=s+1:i=s;return r}function my(t,e,n){var r=py(t,e,n);t.splice(r,0,e)}function Gc(t,e){for(var n,r,i=e,s=t.length;i<s;i++){var o=t[i],f=[o.id,o.opts,[]];r?(r[2].push(f),r=f):n=r=f}return n}function _y(t,e){return t[0]<e[0]?-1:1}function Wc(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),s=i.tree1,o=i.tree2;(s[1].status||o[1].status)&&(s[1].status=s[1].status==="available"||o[1].status==="available"?"available":"missing");for(var f=0;f<o[2].length;f++){if(!s[2][0]){r="new_leaf",s[2][0]=o[2][f];continue}for(var g=!1,w=0;w<s[2].length;w++)s[2][w][0]===o[2][f][0]&&(n.push({tree1:s[2][w],tree2:o[2][f]}),g=!0);g||(r="new_branch",my(s[2],o[2][f],_y))}}return{conflicts:r,tree:t}}function Yf(t,e,n){var r=[],i=!1,s=!1,o;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var f=0,g=t.length;f<g;f++){var w=t[f];if(w.pos===e.pos&&w.ids[0]===e.ids[0])o=Wc(w.ids,e.ids),r.push({pos:w.pos,ids:o.tree}),i=i||o.conflicts,s=!0;else if(n!==!0){var A=w.pos<e.pos?w:e,h=w.pos<e.pos?e:w,y=h.pos-A.pos,E=[],S=[];for(S.push({ids:A.ids,diff:y,parent:null,parentIdx:null});S.length>0;){var O=S.pop();if(O.diff===0){O.ids[0]===h.ids[0]&&E.push(O);continue}for(var b=O.ids[2],p=0,l=b.length;p<l;p++)S.push({ids:b[p],diff:O.diff-1,parent:O.ids,parentIdx:p})}var u=E[0];u?(o=Wc(u.ids,h.ids),u.parent[2][u.parentIdx]=o.tree,r.push({pos:A.pos,ids:A.ids}),i=i||o.conflicts,s=!0):r.push(w)}else r.push(w)}return s||r.push(e),r.sort(gy),{tree:r,conflicts:i||"internal_node"}}function yy(t,e){for(var n=Xf(t),r,i,s=0,o=n.length;s<o;s++){var f=n[s],g=f.ids,w;if(g.length>e){r||(r={});var A=g.length-e;w={pos:f.pos+A,ids:Gc(g,A)};for(var h=0;h<A;h++){var y=f.pos+h+"-"+g[h].id;r[y]=!0}}else w={pos:f.pos,ids:Gc(g,0)};i?i=Yf(i,w,!0).tree:i=[w]}return r&&Kn(i,function(E,S,O){delete r[S+"-"+O]}),{tree:i,revs:r?Object.keys(r):[]}}function Zf(t,e,n){var r=Yf(t,e),i=yy(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function wy(t,e){for(var n=t.slice(),r=e.split("-"),i=parseInt(r[0],10),s=r[1],o;o=n.pop();){if(o.pos===i&&o.ids[0]===s)return!0;for(var f=o.ids[2],g=0,w=f.length;g<w;g++)n.push({pos:o.pos+1,ids:f[g]})}return!1}function by(t){return t.ids}function en(t,e){e||(e=Un(t));for(var n=e.substring(e.indexOf("-")+1),r=t.rev_tree.map(by),i;i=r.pop();){if(i[0]===n)return!!i[1].deleted;r=r.concat(i[2])}}function jn(t){return/^_local/.test(t)}function Ay(t,e){for(var n=e.rev_tree.slice(),r;r=n.pop();){var i=r.pos,s=r.ids,o=s[0],f=s[1],g=s[2],w=g.length===0,A=r.history?r.history.slice():[];if(A.push({id:o,pos:i,opts:f}),w)for(var h=0,y=A.length;h<y;h++){var E=A[h],S=E.pos+"-"+E.id;if(S===t)return i+"-"+o}for(var O=0,b=g.length;O<b;O++)n.push({pos:i+1,ids:g[O],history:A})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function $y(t,e,n,r){try{t.emit("change",e,n,r)}catch(i){xt("error",'Error in .on("change", function):',i)}}function Ey(t,e,n){var r=[{rev:t._rev}];n.style==="all_docs"&&(r=xo(e.rev_tree).map(function(s){return{rev:s.rev}}));var i={id:e.id,changes:r,doc:t};return en(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=Oo(e),i.doc._conflicts.length||delete i.doc._conflicts),i}class Sy extends rn{constructor(e,n,r){super(),this.db=e,n=n?Ze(n):{};var i=n.complete=Bf((f,g)=>{f?V_(this,"error")>0&&this.emit("error",f):this.emit("complete",g),this.removeAllListeners(),e.removeListener("destroyed",s)});r&&(this.on("complete",function(f){r(null,f)}),this.on("error",r));const s=()=>{this.cancel()};e.once("destroyed",s),n.onChange=(f,g,w)=>{this.isCancelled||$y(this,f,g,w)};var o=new Promise(function(f,g){n.complete=function(w,A){w?g(w):f(A)}});this.once("cancel",function(){e.removeListener("destroyed",s),n.complete(null,{status:"cancelled"})}),this.then=o.then.bind(o),this.catch=o.catch.bind(o),this.then(function(f){i(null,f)},i),e.taskqueue.isReady?this.validateChanges(n):e.taskqueue.addTask(f=>{f?n.complete(f):this.isCancelled?this.emit("cancel"):this.validateChanges(n)})}cancel(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")}validateChanges(e){var n=e.complete;Ee._changesFilterPlugin?Ee._changesFilterPlugin.validate(e,r=>{if(r)return n(r);this.doChanges(e)}):this.doChanges(e)}doChanges(e){var n=e.complete;if(e=Ze(e),"live"in e&&!("continuous"in e)&&(e.continuous=e.live),e.processChange=Ey,e.since==="latest"&&(e.since="now"),e.since||(e.since=0),e.since==="now"){this.db.info().then(i=>{if(this.isCancelled){n(null,{status:"cancelled"});return}e.since=i.update_seq,this.doChanges(e)},n);return}if(Ee._changesFilterPlugin){if(Ee._changesFilterPlugin.normalize(e),Ee._changesFilterPlugin.shouldFilter(this,e))return Ee._changesFilterPlugin.filter(this,e)}else["doc_ids","filter","selector","view"].forEach(function(i){i in e&&xt("warn",'The "'+i+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in e||(e.descending=!1),e.limit=e.limit===0?1:e.limit,e.complete=n;var r=this.db._changes(e);if(r&&typeof r.cancel=="function"){const i=this.cancel;this.cancel=(...s)=>{r.cancel(),i.apply(this,s)}}}}function Jc(t,e){return t<e?-1:t>e?1:0}function Ks(t,e){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=e,t(n)):t(null,r.length?r[0]:r)}}function Cy(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var s=r[i];n._attachments[s]=Yr(n._attachments[s],["data","digest","content_type","length","revpos","stub"])}}}function xy(t,e){var n=Jc(t._id,e._id);if(n!==0)return n;var r=t._revisions?t._revisions.start:0,i=e._revisions?e._revisions.start:0;return Jc(r,i)}function Oy(t){var e={},n=[];return Kn(t,function(r,i,s,o){var f=i+"-"+s;return r&&(e[f]=0),o!==void 0&&n.push({from:o,to:f}),f}),n.reverse(),n.forEach(function(r){e[r.from]===void 0?e[r.from]=1+e[r.to]:e[r.from]=Math.min(e[r.from],1+e[r.to])}),e}function Ty(t){var e="limit"in t?t.keys.slice(t.skip,t.limit+t.skip):t.skip>0?t.keys.slice(t.skip):t.keys;t.keys=e,t.skip=0,delete t.limit,t.descending&&(e.reverse(),t.descending=!1)}function Vf(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(i){i&&i.last_seq&&(n.last_seq=i.last_seq),t._compact(n,function(s,o){s?r(s):r(null,o),Wt(function(){t._compactionQueue.shift(),t._compactionQueue.length&&Vf(t)})})})}function ky(t,e,n){return t.get("_local/purges").then(function(r){const i=r.purgeSeq+1;return r.purges.push({docId:e,rev:n,purgeSeq:i}),r.purges.length>self.purged_infos_limit&&r.purges.splice(0,r.purges.length-self.purged_infos_limit),r.purgeSeq=i,r}).catch(function(r){if(r.status!==404)throw r;return{_id:"_local/purges",purges:[{docId:e,rev:n,purgeSeq:0}],purgeSeq:0}}).then(function(r){return t.put(r)})}function Dy(t){return t.charAt(0)==="_"?t+" is not a valid attachment name, attachment names cannot start with '_'":!1}class ed extends rn{_setup(){this.post=ze("post",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof e!="object"||Array.isArray(e))return r(Ae(Us));this.bulkDocs({docs:[e]},n,Ks(r,e._id))}).bind(this),this.put=ze("put",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof e!="object"||Array.isArray(e))return r(Ae(Us));if(zf(e._id),jn(e._id)&&typeof this._putLocal=="function")return e._deleted?this._removeLocal(e,r):this._putLocal(e,r);const i=o=>{typeof this._put=="function"&&n.new_edits!==!1?this._put(e,n,o):this.bulkDocs({docs:[e]},n,Ks(o,e._id))};n.force&&e._rev?(s(),i(function(o){var f=o?null:{ok:!0,id:e._id,rev:e._rev};r(o,f)})):i(r);function s(){var o=e._rev.split("-"),f=o[1],g=parseInt(o[0],10),w=g+1,A=Qf();e._revisions={start:w,ids:[A,f]},e._rev=w+"-"+A,n.new_edits=!1}}).bind(this),this.putAttachment=ze("putAttachment",function(e,n,r,i,s){var o=this;typeof s=="function"&&(s=i,i=r,r=null),typeof s>"u"&&(s=i,i=r,r=null),s||xt("warn","Attachment",n,"on document",e,"is missing content_type");function f(g){var w="_rev"in g?parseInt(g._rev,10):0;return g._attachments=g._attachments||{},g._attachments[n]={content_type:s,data:i,revpos:++w},o.put(g)}return o.get(e).then(function(g){if(g._rev!==r)throw Ae(Er);return f(g)},function(g){if(g.reason===Et.message)return f({_id:e});throw g})}).bind(this),this.removeAttachment=ze("removeAttachment",function(e,n,r,i){this.get(e,(s,o)=>{if(s){i(s);return}if(o._rev!==r){i(Ae(Er));return}if(!o._attachments)return i();delete o._attachments[n],Object.keys(o._attachments).length===0&&delete o._attachments,this.put(o,i)})}).bind(this),this.remove=ze("remove",function(e,n,r,i){var s;typeof n=="string"?(s={_id:e,_rev:n},typeof r=="function"&&(i=r,r={})):(s=e,typeof n=="function"?(i=n,r={}):(i=r,r=n)),r=r||{},r.was_delete=!0;var o={_id:s._id,_rev:s._rev||r.rev};if(o._deleted=!0,jn(o._id)&&typeof this._removeLocal=="function")return this._removeLocal(s,i);this.bulkDocs({docs:[o]},r,Ks(i,o._id))}).bind(this),this.revsDiff=ze("revsDiff",function(e,n,r){typeof n=="function"&&(r=n,n={});var i=Object.keys(e);if(!i.length)return r(null,{});var s=0,o=new dt;function f(w,A){o.has(w)||o.set(w,{missing:[]}),o.get(w).missing.push(A)}function g(w,A){var h=e[w].slice(0);Kn(A,function(y,E,S,O,b){var p=E+"-"+S,l=h.indexOf(p);l!==-1&&(h.splice(l,1),b.status!=="available"&&f(w,p))}),h.forEach(function(y){f(w,y)})}i.map(function(w){this._getRevisionTree(w,function(A,h){if(A&&A.status===404&&A.message==="missing")o.set(w,{missing:e[w]});else{if(A)return r(A);g(w,h)}if(++s===i.length){var y={};return o.forEach(function(E,S){y[S]=E}),r(null,y)}})},this)}).bind(this),this.bulkGet=ze("bulkGet",function(e,n){Ff(this,e,n)}).bind(this),this.compactDocument=ze("compactDocument",function(e,n,r){this._getRevisionTree(e,(i,s)=>{if(i)return r(i);var o=Oy(s),f=[],g=[];Object.keys(o).forEach(function(w){o[w]>n&&f.push(w)}),Kn(s,function(w,A,h,y,E){var S=A+"-"+h;E.status==="available"&&f.indexOf(S)!==-1&&g.push(S)}),this._doCompaction(e,g,r)})}).bind(this),this.compact=ze("compact",function(e,n){typeof e=="function"&&(n=e,e={}),e=e||{},this._compactionQueue=this._compactionQueue||[],this._compactionQueue.push({opts:e,callback:n}),this._compactionQueue.length===1&&Vf(this)}).bind(this),this.get=ze("get",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof e!="string")return r(Ae(Mf));if(jn(e)&&typeof this._getLocal=="function")return this._getLocal(e,r);var i=[];const s=()=>{var g=[],w=i.length;if(!w)return r(null,g);i.forEach(A=>{this.get(e,{rev:A,revs:n.revs,latest:n.latest,attachments:n.attachments,binary:n.binary},function(h,y){if(h)g.push({missing:A});else{for(var E,S=0,O=g.length;S<O;S++)if(g[S].ok&&g[S].ok._rev===y._rev){E=!0;break}E||g.push({ok:y})}w--,w||r(null,g)})})};if(n.open_revs){if(n.open_revs==="all")this._getRevisionTree(e,function(g,w){if(g)return r(g);i=xo(w).map(function(A){return A.rev}),s()});else if(Array.isArray(n.open_revs)){i=n.open_revs;for(var o=0;o<i.length;o++){var f=i[o];if(!(typeof f=="string"&&/^\d+-/.test(f)))return r(Ae(Kf))}s()}else return r(Ae(mo,"function_clause"));return}return this._get(e,n,(g,w)=>{if(g)return g.docId=e,r(g);var A=w.doc,h=w.metadata,y=w.ctx;if(n.conflicts){var E=Oo(h);E.length&&(A._conflicts=E)}if(en(h,A._rev)&&(A._deleted=!0),n.revs||n.revs_info){for(var S=A._rev.split("-"),O=parseInt(S[0],10),b=S[1],p=Xf(h.rev_tree),l=null,u=0;u<p.length;u++){var c=p[u],d=c.ids.map(function(X){return X.id}).indexOf(b),v=d===O-1;(v||!l&&d!==-1)&&(l=c)}if(!l)return g=new Error("invalid rev tree"),g.docId=e,r(g);var D=l.ids.map(function(X){return X.id}).indexOf(A._rev.split("-")[1])+1,I=l.ids.length-D;if(l.ids.splice(D,I),l.ids.reverse(),n.revs&&(A._revisions={start:l.pos+l.ids.length-1,ids:l.ids.map(function(X){return X.id})}),n.revs_info){var k=l.pos+l.ids.length;A._revs_info=l.ids.map(function(X){return k--,{rev:k+"-"+X.id,status:X.opts.status}})}}if(n.attachments&&A._attachments){var M=A._attachments,U=Object.keys(M).length;if(U===0)return r(null,A);Object.keys(M).forEach(X=>{this._getAttachment(A._id,X,M[X],{rev:A._rev,binary:n.binary,ctx:y},function(H,Z){var Q=A._attachments[X];Q.data=Z,delete Q.stub,delete Q.length,--U||r(null,A)})})}else{if(A._attachments)for(var ee in A._attachments)Object.prototype.hasOwnProperty.call(A._attachments,ee)&&(A._attachments[ee].stub=!0);r(null,A)}})}).bind(this),this.getAttachment=ze("getAttachment",function(e,n,r,i){r instanceof Function&&(i=r,r={}),this._get(e,r,(s,o)=>{if(s)return i(s);if(o.doc._attachments&&o.doc._attachments[n])r.ctx=o.ctx,r.binary=!0,this._getAttachment(e,n,o.doc._attachments[n],r,i);else return i(Ae(Et))})}).bind(this),this.allDocs=ze("allDocs",function(e,n){if(typeof e=="function"&&(n=e,e={}),e.skip=typeof e.skip<"u"?e.skip:0,e.start_key&&(e.startkey=e.start_key),e.end_key&&(e.endkey=e.end_key),"keys"in e){if(!Array.isArray(e.keys))return n(new TypeError("options.keys must be an array"));var r=["startkey","endkey","key"].filter(function(i){return i in e})[0];if(r){n(Ae(X_,"Query parameter `"+r+"` is not compatible with multi-get"));return}if(!Ht(this)&&(Ty(e),e.keys.length===0))return this._allDocs({limit:0},n)}return this._allDocs(e,n)}).bind(this),this.close=ze("close",function(e){return this._closed=!0,this.emit("closed"),this._close(e)}).bind(this),this.info=ze("info",function(e){this._info((n,r)=>{if(n)return e(n);r.db_name=r.db_name||this.name,r.auto_compaction=!!(this.auto_compaction&&!Ht(this)),r.adapter=this.adapter,e(null,r)})}).bind(this),this.id=ze("id",function(e){return this._id(e)}).bind(this),this.bulkDocs=ze("bulkDocs",function(e,n,r){if(typeof n=="function"&&(r=n,n={}),n=n||{},Array.isArray(e)&&(e={docs:e}),!e||!e.docs||!Array.isArray(e.docs))return r(Ae(W_));for(var i=0;i<e.docs.length;++i)if(typeof e.docs[i]!="object"||Array.isArray(e.docs[i]))return r(Ae(Us));var s;if(e.docs.forEach(function(g){g._attachments&&Object.keys(g._attachments).forEach(function(w){s=s||Dy(w),g._attachments[w].content_type||xt("warn","Attachment",w,"on document",g._id,"is missing content_type")})}),s)return r(Ae(Gi,s));"new_edits"in n||("new_edits"in e?n.new_edits=e.new_edits:n.new_edits=!0);var o=this;!n.new_edits&&!Ht(o)&&e.docs.sort(xy),Cy(e.docs);var f=e.docs.map(function(g){return g._id});this._bulkDocs(e,n,function(g,w){if(g)return r(g);if(n.new_edits||(w=w.filter(function(y){return y.error})),!Ht(o))for(var A=0,h=w.length;A<h;A++)w[A].id=w[A].id||f[A];r(null,w)})}).bind(this),this.registerDependentDatabase=ze("registerDependentDatabase",function(e,n){var r=Ze(this.__opts);this.__opts.view_adapter&&(r.adapter=this.__opts.view_adapter);var i=new this.constructor(e,r);function s(o){return o.dependentDbs=o.dependentDbs||{},o.dependentDbs[e]?!1:(o.dependentDbs[e]=!0,o)}Pi(this,"_local/_pouch_dependentDbs",s).then(function(){n(null,{db:i})}).catch(n)}).bind(this),this.destroy=ze("destroy",function(e,n){typeof e=="function"&&(n=e,e={});var r="use_prefix"in this?this.use_prefix:!0;const i=()=>{this._destroy(e,(s,o)=>{if(s)return n(s);this._destroyed=!0,this.emit("destroyed"),n(null,o||{ok:!0})})};if(Ht(this))return i();this.get("_local/_pouch_dependentDbs",(s,o)=>{if(s)return s.status!==404?n(s):i();var f=o.dependentDbs,g=this.constructor,w=Object.keys(f).map(A=>{var h=r?A.replace(new RegExp("^"+g.prefix),""):A;return new g(h,this.__opts).destroy()});Promise.all(w).then(i,n)})}).bind(this)}_compact(e,n){var r={return_docs:!1,last_seq:e.last_seq||0},i=[],s,o=0;const f=A=>{this.activeTasks.update(s,{completed_items:++o}),i.push(this.compactDocument(A.id,0))},g=A=>{this.activeTasks.remove(s,A),n(A)},w=A=>{var h=A.last_seq;Promise.all(i).then(()=>Pi(this,"_local/compaction",y=>!y.last_seq||y.last_seq<h?(y.last_seq=h,y):!1)).then(()=>{this.activeTasks.remove(s),n(null,{ok:!0})}).catch(g)};this.info().then(A=>{s=this.activeTasks.add({name:"database_compaction",total_items:A.update_seq-r.last_seq}),this.changes(r).on("change",f).on("complete",w).on("error",g)})}changes(e,n){return typeof e=="function"&&(n=e,e={}),e=e||{},e.return_docs="return_docs"in e?e.return_docs:!e.live,new Sy(this,e,n)}type(){return typeof this._type=="function"?this._type():this.adapter}}ed.prototype.purge=ze("_purge",function(t,e,n){if(typeof this._purge>"u")return n(Ae(mo,"Purge is not implemented in the "+this.adapter+" adapter."));var r=this;r._getRevisionTree(t,(i,s)=>{if(i)return n(i);if(!s)return n(Ae(Et));let o;try{o=vy(s,e)}catch(f){return n(f.message||f)}r._purge(t,o,(f,g)=>{if(f)return n(f);ky(r,t,e).then(function(){return n(null,g)})})})});class qy{constructor(){this.isReady=!1,this.failed=!1,this.queue=[]}execute(){var e;if(this.failed)for(;e=this.queue.shift();)e(this.failed);else for(;e=this.queue.shift();)e()}fail(e){this.failed=e,this.execute()}ready(e){this.isReady=!0,this.db=e,this.execute()}addTask(e){this.queue.push(e),this.failed&&this.execute()}}function Ly(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=Ee.adapters,i=Ee.preferredAdapters,s=Ee.prefix,o=e.adapter;if(!o)for(var f=0;f<i.length;++f){if(o=i[f],o==="idb"&&"websql"in r&&qi()&&localStorage["_pouch__websqldb_"+s+t]){xt("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.');continue}break}var g=r[o],w=g&&"use_prefix"in g?g.use_prefix:!0;return{name:w?s+t:t,adapter:o}}function Py(t,e){t.prototype=Object.create(e.prototype,{constructor:{value:t}})}function td(t,e){let n=function(...r){if(!(this instanceof n))return new n(...r);e.apply(this,r)};return Py(n,t),n}function Iy(t){function e(r){t.removeListener("closed",n),r||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}class Qc extends ed{constructor(e,n){super(),this._setup(e,n)}_setup(e,n){if(super._setup(),n=n||{},e&&typeof e=="object"&&(n=e,e=n.name,delete n.name),n.deterministic_revs===void 0&&(n.deterministic_revs=!0),this.__opts=n=Ze(n),this.auto_compaction=n.auto_compaction,this.purged_infos_limit=n.purged_infos_limit||1e3,this.prefix=Ee.prefix,typeof e!="string")throw new Error("Missing/invalid DB name");var r=(n.prefix||"")+e,i=Ly(r,n);if(n.name=i.name,n.adapter=n.adapter||i.adapter,this.name=e,this._adapter=n.adapter,Ee.emit("debug",["adapter","Picked adapter: ",n.adapter]),!Ee.adapters[n.adapter]||!Ee.adapters[n.adapter].valid())throw new Error("Invalid Adapter: "+n.adapter);if(n.view_adapter&&(!Ee.adapters[n.view_adapter]||!Ee.adapters[n.view_adapter].valid()))throw new Error("Invalid View Adapter: "+n.view_adapter);this.taskqueue=new qy,this.adapter=n.adapter,Ee.adapters[n.adapter].call(this,n,s=>{if(s)return this.taskqueue.fail(s);Iy(this),this.emit("created",this),Ee.emit("created",this.name),this.taskqueue.ready(this)})}}const Ee=td(Qc,function(t,e){Qc.prototype._setup.call(this,t,e)});var jy=typeof AbortController<"u"?AbortController:function(){return{abort:function(){}}},nd=fetch,pr=Headers;class Ry{constructor(){this.tasks={}}list(){return Object.values(this.tasks)}add(e){const n=go();return this.tasks[n]={id:n,name:e.name,total_items:e.total_items,created_at:new Date().toJSON()},n}get(e){return this.tasks[e]}remove(e,n){return delete this.tasks[e],this.tasks}update(e,n){const r=this.tasks[e];if(typeof r<"u"){const i={id:r.id,name:r.name,created_at:r.created_at,total_items:n.total_items||r.total_items,completed_items:n.completed_items||r.completed_items,updated_at:new Date().toJSON()};this.tasks[e]=i}return this.tasks}}Ee.adapters={};Ee.preferredAdapters=[];Ee.prefix="_pouch_";var Xc=new rn;function By(t){Object.keys(rn.prototype).forEach(function(n){typeof rn.prototype[n]=="function"&&(t[n]=Xc[n].bind(Xc))});var e=t._destructionListeners=new dt;t.on("ref",function(r){e.has(r.name)||e.set(r.name,[]),e.get(r.name).push(r)}),t.on("unref",function(r){if(e.has(r.name)){var i=e.get(r.name),s=i.indexOf(r);s<0||(i.splice(s,1),i.length>1?e.set(r.name,i):e.delete(r.name))}}),t.on("destroyed",function(r){if(e.has(r)){var i=e.get(r);e.delete(r),i.forEach(function(s){s.emit("destroyed",!0)})}})}By(Ee);Ee.adapter=function(t,e,n){e.valid()&&(Ee.adapters[t]=e,n&&Ee.preferredAdapters.push(t))};Ee.plugin=function(t){if(typeof t=="function")t(Ee);else{if(typeof t!="object"||Object.keys(t).length===0)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){Ee.prototype[e]=t[e]})}return this.__defaults&&(Ee.__defaults=Mn({},this.__defaults)),Ee};Ee.defaults=function(t){let e=td(Ee,function(n,r){r=r||{},n&&typeof n=="object"&&(r=n,n=r.name,delete r.name),r=Mn({},e.__defaults,r),Ee.call(this,n,r)});return e.preferredAdapters=Ee.preferredAdapters.slice(),Object.keys(Ee).forEach(function(n){n in e||(e[n]=Ee[n])}),e.__defaults=Mn({},this.__defaults,t),e};Ee.fetch=function(t,e){return nd(t,e)};Ee.prototype.activeTasks=Ee.activeTasks=new Ry;var Ny="8.0.1";function To(t,e){for(var n=t,r=0,i=e.length;r<i;r++){var s=e[r];if(n=n[s],!n)break}return n}function Fy(t,e){return t<e?-1:t>e?1:0}function ko(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var s=t[r];r>0&&t[r-1]==="\\"&&(s==="$"||s===".")?n=n.substring(0,n.length-1)+s:s==="."?(e.push(n),n=""):n+=s}return e.push(n),e}var My=["$or","$nor","$not"];function rd(t){return My.indexOf(t)>-1}function id(t){return Object.keys(t)[0]}function Uy(t){return t[id(t)]}function Gr(t){var e={},n={$or:!0,$nor:!0};return t.forEach(function(r){Object.keys(r).forEach(function(i){var s=r[i];if(typeof s!="object"&&(s={$eq:s}),rd(i))if(s instanceof Array){if(n[i]){n[i]=!1,e[i]=s;return}var o=[];e[i].forEach(function(g){Object.keys(s).forEach(function(w){var A=s[w],h=Math.max(Object.keys(g).length,Object.keys(A).length),y=Gr([g,A]);Object.keys(y).length<=h||o.push(y)})}),e[i]=o}else e[i]=Gr([s]);else{var f=e[i]=e[i]||{};Object.keys(s).forEach(function(g){var w=s[g];if(g==="$gt"||g==="$gte")return Ky(g,w,f);if(g==="$lt"||g==="$lte")return zy(g,w,f);if(g==="$ne")return Hy(w,f);if(g==="$eq")return Gy(w,f);if(g==="$regex")return Wy(w,f);f[g]=w})}})}),e}function Ky(t,e,n){typeof n.$eq<"u"||(typeof n.$gte<"u"?t==="$gte"?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):typeof n.$gt<"u"?t==="$gte"?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}function zy(t,e,n){typeof n.$eq<"u"||(typeof n.$lte<"u"?t==="$lte"?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):typeof n.$lt<"u"?t==="$lte"?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}function Hy(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}function Gy(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}function Wy(t,e){"$regex"in e?e.$regex.push(t):e.$regex=[t]}function sd(t){for(var e in t){if(Array.isArray(t))for(var n in t)t[n].$and&&(t[n]=Gr(t[n].$and));var r=t[e];typeof r=="object"&&sd(r)}return t}function ad(t,e){for(var n in t){n==="$and"&&(e=!0);var r=t[n];typeof r=="object"&&(e=ad(r,e))}return e}function Jy(t){var e=Ze(t);ad(e,!1)&&(e=sd(e),"$and"in e&&(e=Gr(e.$and))),["$or","$nor"].forEach(function(o){o in e&&e[o].forEach(function(f){for(var g=Object.keys(f),w=0;w<g.length;w++){var A=g[w],h=f[A];(typeof h!="object"||h===null)&&(f[A]={$eq:h})}})}),"$not"in e&&(e.$not=Gr([e.$not]));for(var n=Object.keys(e),r=0;r<n.length;r++){var i=n[r],s=e[i];(typeof s!="object"||s===null)&&(s={$eq:s}),e[i]=s}return Sa(e),e}function Sa(t){Object.keys(t).forEach(function(e){var n=t[e];Array.isArray(n)?n.forEach(function(r){r&&typeof r=="object"&&Sa(r)}):e==="$ne"?t.$ne=[n]:e==="$regex"?t.$regex=[n]:n&&typeof n=="object"&&Sa(n)})}function Qy(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}function Xy(t,e,n){var r=Qy(t,e,n);return r+t}var od=-324,Ca=3,xa="";function Ge(t,e){if(t===e)return 0;t=zn(t),e=zn(e);var n=Oa(t),r=Oa(e);if(n-r!==0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return n0(t,e)}return Array.isArray(t)?t0(t,e):r0(t,e)}function zn(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=zn(e[r])}else{if(t instanceof Date)return t.toJSON();if(t!==null){t={};for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var s=e[i];typeof s<"u"&&(t[i]=zn(s))}}}}return t}function Yy(t){if(t!==null)switch(typeof t){case"boolean":return t?1:0;case"number":return i0(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,s="";if(e)for(;++r<i;)s+=Lt(n[r]);else for(;++r<i;){var o=n[r];s+=Lt(o)+Lt(t[o])}return s}return""}function Lt(t){var e="\0";return t=zn(t),Oa(t)+xa+Yy(t)+e}function Zy(t,e){var n=e,r,i=t[e]==="1";if(i)r=0,e++;else{var s=t[e]==="0";e++;var o="",f=t.substring(e,e+Ca),g=parseInt(f,10)+od;for(s&&(g=-g),e+=Ca;;){var w=t[e];if(w==="\0")break;o+=w,e++}o=o.split("."),o.length===1?r=parseInt(o,10):r=parseFloat(o[0]+"."+o[1]),s&&(r=r-10),g!==0&&(r=parseFloat(r+"e"+g))}return{num:r,length:e-n}}function Vy(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,s=r.index;if(Array.isArray(i))i.push(n);else if(s===t.length-2){var o=t.pop();i[o]=n}else t.push(n)}}function e0(t){for(var e=[],n=[],r=0;;){var i=t[r++];if(i==="\0"){if(e.length===1)return e.pop();Vy(e,n);continue}switch(i){case"1":e.push(null);break;case"2":e.push(t[r]==="1"),r++;break;case"3":var s=Zy(t,r);e.push(s.num),r+=s.length;break;case"4":for(var o="";;){var f=t[r];if(f==="\0")break;o+=f,r++}o=o.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(o);break;case"5":var g={element:[],index:e.length};e.push(g.element),n.push(g);break;case"6":var w={element:{},index:e.length};e.push(w.element),n.push(w);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}}}function t0(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=Ge(t[r],e[r]);if(i!==0)return i}return t.length===e.length?0:t.length>e.length?1:-1}function n0(t,e){return t===e?0:t>e?1:-1}function r0(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),s=0;s<i;s++){var o=Ge(n[s],r[s]);if(o!==0||(o=Ge(t[n[s]],e[r[s]]),o!==0))return o}return n.length===r.length?0:n.length>r.length?1:-1}function Oa(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);if(~n)return t===null?1:Array.isArray(t)?5:n<3?n+2:n+3;if(Array.isArray(t))return 5}function i0(t){if(t===0)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,i=r?"0":"2",s=(r?-n:n)-od,o=Xy(s.toString(),"0",Ca);i+=xa+o;var f=Math.abs(parseFloat(e[0]));r&&(f=10-f);var g=f.toFixed(20);return g=g.replace(/\.?0+$/,""),i+=xa+g,i}function s0(t){function e(n){return t.map(function(r){var i=id(r),s=ko(i),o=To(n,s);return o})}return function(n,r){var i=e(n.doc),s=e(r.doc),o=Ge(i,s);return o!==0?o:Fy(n.doc._id,r.doc._id)}}function a0(t,e,n){if(t=t.filter(function(o){return mr(o.doc,e.selector,n)}),e.sort){var r=s0(e.sort);t=t.sort(r),typeof e.sort[0]!="string"&&Uy(e.sort[0])==="desc"&&(t=t.reverse())}if("limit"in e||"skip"in e){var i=e.skip||0,s=("limit"in e?e.limit:t.length)+i;t=t.slice(i,s)}return t}function mr(t,e,n){return n.every(function(r){var i=e[r],s=ko(r),o=To(t,s);return rd(r)?o0(r,i,t):Ii(i,t,s,o)})}function Ii(t,e,n,r){return t?typeof t=="object"?Object.keys(t).every(function(i){var s=t[i];if(i.indexOf("$")===0)return Yc(i,e,s,n,r);var o=ko(i);if(r===void 0&&typeof s!="object"&&o.length>0)return!1;var f=To(r,o);return typeof s=="object"?Ii(s,e,n,f):Yc("$eq",e,s,o,f)}):t===r:!0}function o0(t,e,n){return t==="$or"?e.some(function(r){return mr(n,r,Object.keys(r))}):t==="$not"?!mr(n,e,Object.keys(e)):!e.find(function(r){return mr(n,r,Object.keys(r))})}function Yc(t,e,n,r,i){if(!Vc[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return Vc[t](e,n,r,i)}function jr(t){return typeof t<"u"&&t!==null}function Cn(t){return typeof t<"u"}function u0(t,e){if(typeof t!="number"||parseInt(t,10)!==t)return!1;var n=e[0],r=e[1];return t%n===r}function Zc(t,e){return e.some(function(n){return t instanceof Array?t.some(function(r){return Ge(n,r)===0}):Ge(n,t)===0})}function c0(t,e){return e.every(function(n){return t.some(function(r){return Ge(n,r)===0})})}function l0(t,e){return t.length===e}function f0(t,e){var n=new RegExp(e);return n.test(t)}function d0(t,e){switch(e){case"null":return t===null;case"boolean":return typeof t=="boolean";case"number":return typeof t=="number";case"string":return typeof t=="string";case"array":return t instanceof Array;case"object":return{}.toString.call(t)==="[object Object]"}}var Vc={$elemMatch:function(t,e,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.some(function(i){return mr(i,e,Object.keys(e))}):r.some(function(i){return Ii(e,t,n,i)})},$allMatch:function(t,e,n,r){return!Array.isArray(r)||r.length===0?!1:typeof r[0]=="object"&&r[0]!==null?r.every(function(i){return mr(i,e,Object.keys(e))}):r.every(function(i){return Ii(e,t,n,i)})},$eq:function(t,e,n,r){return Cn(r)&&Ge(r,e)===0},$gte:function(t,e,n,r){return Cn(r)&&Ge(r,e)>=0},$gt:function(t,e,n,r){return Cn(r)&&Ge(r,e)>0},$lte:function(t,e,n,r){return Cn(r)&&Ge(r,e)<=0},$lt:function(t,e,n,r){return Cn(r)&&Ge(r,e)<0},$exists:function(t,e,n,r){return e?Cn(r):!Cn(r)},$mod:function(t,e,n,r){return jr(r)&&u0(r,e)},$ne:function(t,e,n,r){return e.every(function(i){return Ge(r,i)!==0})},$in:function(t,e,n,r){return jr(r)&&Zc(r,e)},$nin:function(t,e,n,r){return jr(r)&&!Zc(r,e)},$size:function(t,e,n,r){return jr(r)&&Array.isArray(r)&&l0(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&c0(r,e)},$regex:function(t,e,n,r){return jr(r)&&typeof r=="string"&&e.every(function(i){return f0(r,i)})},$type:function(t,e,n,r){return d0(r,e)}};function h0(t,e){if(typeof e!="object")throw new Error("Selector error: expected a JSON object");e=Jy(e);var n={doc:t},r=a0([n],{selector:e},Object.keys(e));return r&&r.length===1}function v0(t){return wo(`"use strict";
return `+t+";",{})}function g0(t){var e=["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join(`
`);return wo(e,{})}function p0(t,e){if(t.selector&&t.filter&&t.filter!=="_selector"){var n=typeof t.filter=="string"?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function m0(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&typeof t.filter=="string"&&(t.filter==="_view"?t.view=Kc(t.view):t.filter=Kc(t.filter))}function _0(t,e){return e.filter&&typeof e.filter=="string"&&!e.doc_ids&&!Ht(t.db)}function y0(t,e){var n=e.complete;if(e.filter==="_view"){if(!e.view||typeof e.view!="string"){var r=Ae(Gi,"`view` filter parameter not found or invalid.");return n(r)}var i=Ea(e.view);t.db.get("_design/"+i[0],function(o,f){if(t.isCancelled)return n(null,{status:"cancelled"});if(o)return n(Sr(o));var g=f&&f.views&&f.views[i[1]]&&f.views[i[1]].map;if(!g)return n(Ae(Et,f.views?"missing json key: "+i[1]:"missing json key: views"));e.filter=g0(g),t.doChanges(e)})}else if(e.selector)e.filter=function(o){return h0(o,e.selector)},t.doChanges(e);else{var s=Ea(e.filter);t.db.get("_design/"+s[0],function(o,f){if(t.isCancelled)return n(null,{status:"cancelled"});if(o)return n(Sr(o));var g=f&&f.filters&&f.filters[s[1]];if(!g)return n(Ae(Et,f&&f.filters?"missing json key: "+s[1]:"missing json key: filters"));e.filter=v0(g),t.doChanges(e)})}}function w0(t){t._changesFilterPlugin={validate:p0,normalize:m0,shouldFilter:_0,filter:y0}}Ee.plugin(w0);Ee.version=Ny;function ud(t){return t.reduce(function(e,n){return e[n]=!0,e},{})}var b0=ud(["_id","_rev","_access","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),A0=ud(["_access","_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]);function el(t){if(!/^\d+-/.test(t))return Ae(Kf);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function $0(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],s=1,o=r.length;s<o;s++)i=[r[s],{status:"missing"},[i]];return[{pos:n,ids:i}]}function cd(t,e,n){n||(n={deterministic_revs:!0});var r,i,s,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=Wi()),i=Qf(t,n.deterministic_revs),t._rev){if(s=el(t._rev),s.error)return s;t._rev_tree=[{pos:s.prefix,ids:[s.id,{status:"missing"},[[i,o,[]]]]}],r=s.prefix+1}else t._rev_tree=[{pos:1,ids:[i,o,[]]}],r=1;else if(t._revisions&&(t._rev_tree=$0(t._revisions,o),r=t._revisions.start,i=t._revisions.ids[0]),!t._rev_tree){if(s=el(t._rev),s.error)return s;r=s.prefix,i=s.id,t._rev_tree=[{pos:r,ids:[i,o,[]]}]}zf(t._id),t._rev=r+"-"+i;var f={metadata:{},data:{}};for(var g in t)if(Object.prototype.hasOwnProperty.call(t,g)){var w=g[0]==="_";if(w&&!b0[g]){var A=Ae(Uc,g);throw A.message=Uc.message+": "+g,A}else w&&!A0[g]?f.metadata[g.slice(1)]=t[g]:f.data[g]=t[g]}return f}function E0(t){try{return bo(t)}catch{var e=Ae(Uf,"Attachment is not a valid base64 string");return{error:e}}}function S0(t,e,n){var r=E0(t.data);if(r.error)return n(r.error);t.length=r.length,e==="blob"?t.data=$o(r,t.content_type):e==="base64"?t.data=Zr(r):t.data=r,Co(r,function(i){t.digest="md5-"+i,n()})}function C0(t,e,n){Co(t.data,function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,e==="binary"?Wf(t.data,function(i){t.data=i,n()}):e==="base64"?So(t.data,function(i){t.data=i,n()}):n()})}function x0(t,e,n){if(t.stub)return n();typeof t.data=="string"?S0(t,e,n):C0(t,e,n)}function O0(t,e,n){if(!t.length)return n();var r=0,i;t.forEach(function(o){var f=o.data&&o.data._attachments?Object.keys(o.data._attachments):[],g=0;if(!f.length)return s();function w(h){i=h,g++,g===f.length&&s()}for(var A in o.data._attachments)Object.prototype.hasOwnProperty.call(o.data._attachments,A)&&x0(o.data._attachments[A],e,w)});function s(){r++,t.length===r&&(i?n(i):n())}}function T0(t,e,n,r,i,s,o,f){if(wy(e.rev_tree,n.metadata.rev)&&!f)return r[i]=n,s();var g=e.winningRev||Un(e),w="deleted"in e?e.deleted:en(e,g),A="deleted"in n.metadata?n.metadata.deleted:en(n.metadata),h=/^1-/.test(n.metadata.rev);if(w&&!A&&f&&h){var y=n.data;y._rev=g,y._id=n.metadata.id,n=cd(y,f)}var E=Zf(e.rev_tree,n.metadata.rev_tree[0],t),S=f&&(w&&A&&E.conflicts!=="new_leaf"||!w&&E.conflicts!=="new_leaf"||w&&!A&&E.conflicts==="new_branch");if(S){var O=Ae(Er);return r[i]=O,s()}var b=n.metadata.rev;n.metadata.rev_tree=E.tree,n.stemmedRevs=E.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var p=Un(n.metadata),l=en(n.metadata,p),u=w===l?0:w<l?-1:1,c;b===p?c=l:c=en(n.metadata,b),o(n,p,l,c,!0,u,i,s)}function k0(t){return t.metadata.rev_tree[0].ids[1].status==="missing"}function D0(t,e,n,r,i,s,o,f,g){t=t||1e3;function w(O,b,p){var l=Un(O.metadata),u=en(O.metadata,l);if("was_delete"in f&&u)return s[b]=Ae(Et,"deleted"),p();var c=A&&k0(O);if(c){var d=Ae(Er);return s[b]=d,p()}var v=u?0:1;o(O,l,u,u,!1,v,b,p)}var A=f.new_edits,h=new dt,y=0,E=e.length;function S(){++y===E&&g&&g()}e.forEach(function(O,b){if(O._id&&jn(O._id)){var p=O._deleted?"_removeLocal":"_putLocal";n[p](O,{ctx:i},function(u,c){s[b]=u||c,S()});return}var l=O.metadata.id;h.has(l)?(E--,h.get(l).push([O,b])):h.set(l,[[O,b]])}),h.forEach(function(O,b){var p=0;function l(){++p<O.length?u():S()}function u(){var c=O[p],d=c[0],v=c[1];if(r.has(b))T0(t,r.get(b),d,s,v,l,o,A);else{var D=Zf([],d.metadata.rev_tree[0],t);d.metadata.rev_tree=D.tree,d.stemmedRevs=D.stemmedRevs||[],w(d,v,l)}}u()})}var q0=5,Je="document-store",rt="by-sequence",St="attach-store",Ln="attach-seq-store",ct="meta-store",Ft="local-store",Ta="detect-blob-support";function L0(t){try{return JSON.parse(t)}catch{return Ki.parse(t)}}function P0(t){try{return JSON.stringify(t)}catch{return Ki.stringify(t)}}function Kt(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(Ae(_o,n,e.type))}}function ka(t,e,n){return{data:P0(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function Pn(t){if(!t)return null;var e=L0(t.data);return e.winningRev=t.winningRev,e.deleted=t.deletedOrLocal==="1",e.seq=t.seq,e}function ji(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function ld(t,e,n,r){n?r(t?typeof t!="string"?t:Eo(t,e):Ao([""],{type:e})):t?typeof t!="string"?Gf(t,function(i){r(Zr(i))}):r(t):r("")}function fd(t,e,n,r){var i=Object.keys(t._attachments||{});if(!i.length)return r&&r();var s=0;function o(){++s===i.length&&r&&r()}function f(g,w){var A=g._attachments[w],h=A.digest,y=n.objectStore(St).get(h);y.onsuccess=function(E){A.body=E.target.result.body,o()}}i.forEach(function(g){e.attachments&&e.include_docs?f(t,g):(t._attachments[g].stub=!0,o())})}function Da(t,e){return Promise.all(t.map(function(n){if(n.doc&&n.doc._attachments){var r=Object.keys(n.doc._attachments);return Promise.all(r.map(function(i){var s=n.doc._attachments[i];if("body"in s){var o=s.body,f=s.content_type;return new Promise(function(g){ld(o,f,e,function(w){n.doc._attachments[i]=Mn(Yr(s,["digest","content_type"]),{data:w}),g()})})}}))}}))}function dd(t,e,n){var r=[],i=n.objectStore(rt),s=n.objectStore(St),o=n.objectStore(Ln),f=t.length;function g(){f--,f||w()}function w(){r.length&&r.forEach(function(A){var h=o.index("digestSeq").count(IDBKeyRange.bound(A+"::",A+"::ï¿¿",!1,!1));h.onsuccess=function(y){var E=y.target.result;E||s.delete(A)}})}t.forEach(function(A){var h=i.index("_doc_id_rev"),y=e+"::"+A;h.getKey(y).onsuccess=function(E){var S=E.target.result;if(typeof S!="number")return g();i.delete(S);var O=o.index("seq").openCursor(IDBKeyRange.only(S));O.onsuccess=function(b){var p=b.target.result;if(p){var l=p.value.digestSeq.split("::")[0];r.push(l),o.delete(p.primaryKey),p.continue()}else g()}}})}function Pt(t,e,n){try{return{txn:t.transaction(e,n)}}catch(r){return{error:r}}}var Kr=new z_;function I0(t,e,n,r,i,s){for(var o=e.docs,f,g,w,A,h,y,E,S,O=0,b=o.length;O<b;O++){var p=o[O];p._id&&jn(p._id)||(p=o[O]=cd(p,n.new_edits,t),p.error&&!E&&(E=p))}if(E)return s(E);var l=!1,u=0,c=new Array(o.length),d=new dt,v=!1,D=r._meta.blobSupport?"blob":"base64";O0(o,D,function(q){if(q)return s(q);I()});function I(){var q=[Je,rt,St,Ft,Ln,ct],j=Pt(i,q,"readwrite");if(j.error)return s(j.error);f=j.txn,f.onabort=Kt(s),f.ontimeout=Kt(s),f.oncomplete=X,g=f.objectStore(Je),w=f.objectStore(rt),A=f.objectStore(St),h=f.objectStore(Ln),y=f.objectStore(ct),y.get(ct).onsuccess=function(K){S=K.target.result,U()},Z(function(K){if(K)return v=!0,s(K);ee()})}function k(){l=!0,U()}function M(){D0(t.revs_limit,o,r,d,f,c,Q,n,k)}function U(){!S||!l||(S.docCount+=u,y.put(S))}function ee(){if(!o.length)return;var q=0;function j(){++q===o.length&&M()}function K(N){var G=Pn(N.target.result);G&&d.set(G.id,G),j()}for(var J=0,F=o.length;J<F;J++){var T=o[J];if(T._id&&jn(T._id)){j();continue}var L=g.get(T.metadata.id);L.onsuccess=K}}function X(){v||(Kr.notify(r._meta.name),s(null,c))}function H(q,j){var K=A.get(q);K.onsuccess=function(J){if(J.target.result)j();else{var F=Ae(Y_,"unknown stub attachment with digest "+q);F.status=412,j(F)}}}function Z(q){var j=[];if(o.forEach(function(T){T.data&&T.data._attachments&&Object.keys(T.data._attachments).forEach(function(L){var N=T.data._attachments[L];N.stub&&j.push(N.digest)})}),!j.length)return q();var K=0,J;function F(){++K===j.length&&q(J)}j.forEach(function(T){H(T,function(L){L&&!J&&(J=L),F()})})}function Q(q,j,K,J,F,T,L,N){q.metadata.winningRev=j,q.metadata.deleted=K;var G=q.data;G._id=q.metadata.id,G._rev=q.metadata.rev,J&&(G._deleted=!0);var W=G._attachments&&Object.keys(G._attachments).length;if(W)return $(q,j,K,F,L,N);u+=T,U(),te(q,j,K,F,L,N)}function te(q,j,K,J,F,T){var L=q.data,N=q.metadata;L._doc_id_rev=N.id+"::"+N.rev,delete L._id,delete L._rev;function G(de){var Oe=q.stemmedRevs||[];J&&r.auto_compaction&&(Oe=Oe.concat(hy(q.metadata))),Oe&&Oe.length&&dd(Oe,q.metadata.id,f),N.seq=de.target.result;var je=ka(N,j,K),re=g.put(je);re.onsuccess=se}function W(de){de.preventDefault(),de.stopPropagation();var Oe=w.index("_doc_id_rev"),je=Oe.getKey(L._doc_id_rev);je.onsuccess=function(re){var ue=w.put(L,re.target.result);ue.onsuccess=G}}function se(){c[F]={ok:!0,id:N.id,rev:N.rev},d.set(q.metadata.id,q.metadata),C(q,N.seq,T)}var ce=w.put(L);ce.onsuccess=G,ce.onerror=W}function $(q,j,K,J,F,T){var L=q.data,N=0,G=Object.keys(L._attachments);function W(){N===G.length&&te(q,j,K,J,F,T)}function se(){N++,W()}G.forEach(function(ce){var de=q.data._attachments[ce];if(de.stub)N++,W();else{var Oe=de.data;delete de.data,de.revpos=parseInt(j,10);var je=de.digest;P(je,Oe,se)}})}function C(q,j,K){var J=0,F=Object.keys(q.data._attachments||{});if(!F.length)return K();function T(){++J===F.length&&K()}function L(G){var W=q.data._attachments[G].digest,se=h.put({seq:j,digestSeq:W+"::"+j});se.onsuccess=T,se.onerror=function(ce){ce.preventDefault(),ce.stopPropagation(),T()}}for(var N=0;N<F.length;N++)L(F[N])}function P(q,j,K){var J=A.count(q);J.onsuccess=function(F){var T=F.target.result;if(T)return K();var L={digest:q,body:j},N=A.put(L);N.onsuccess=K}}}function hd(t,e,n,r,i){r===-1&&(r=1e3);var s=typeof t.getAll=="function"&&typeof t.getAllKeys=="function"&&r>1&&!n,o,f,g;function w(E){f=E.target.result,o&&i(o,f,g)}function A(E){o=E.target.result,f&&i(o,f,g)}function h(){if(!o.length)return i();var E=o[o.length-1],S;if(e&&e.upper)try{S=IDBKeyRange.bound(E,e.upper,!0,e.upperOpen)}catch(O){if(O.name==="DataError"&&O.code===0)return i()}else S=IDBKeyRange.lowerBound(E,!0);e=S,o=null,f=null,t.getAll(e,r).onsuccess=w,t.getAllKeys(e,r).onsuccess=A}function y(E){var S=E.target.result;if(!S)return i();i([S.key],[S.value],S)}s?(g={continue:h},t.getAll(e,r).onsuccess=w,t.getAllKeys(e,r).onsuccess=A):n?t.openCursor(e,"prev").onsuccess=y:t.openCursor(e).onsuccess=y}function j0(t,e,n){if(typeof t.getAll=="function"){t.getAll(e).onsuccess=n;return}var r=[];function i(s){var o=s.target.result;o?(r.push(o.value),o.continue()):n({target:{result:r}})}t.openCursor(e).onsuccess=i}function R0(t,e,n){var r=new Array(t.length),i=0;t.forEach(function(s,o){e.get(s).onsuccess=function(f){f.target.result?r[o]=f.target.result:r[o]={key:s,error:"not_found"},i++,i===t.length&&n(t,r,{})}})}function B0(t,e,n,r,i){try{if(t&&e)return i?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return i?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return i?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(s){return{error:s}}return null}function N0(t,e,n){var r="startkey"in t?t.startkey:!1,i="endkey"in t?t.endkey:!1,s="key"in t?t.key:!1,o="keys"in t?t.keys:!1,f=t.skip||0,g=typeof t.limit=="number"?t.limit:-1,w=t.inclusive_end!==!1,A,h;if(!o&&(A=B0(r,i,w,s,t.descending),h=A&&A.error,h&&!(h.name==="DataError"&&h.code===0)))return n(Ae(_o,h.name,h.message));var y=[Je,rt,ct];t.attachments&&y.push(St);var E=Pt(e,y,"readonly");if(E.error)return n(E.error);var S=E.txn;S.oncomplete=X,S.onabort=Kt(n);var O=S.objectStore(Je),b=S.objectStore(rt),p=S.objectStore(ct),l=b.index("_doc_id_rev"),u=[],c,d;p.get(ct).onsuccess=function(H){c=H.target.result.docCount},t.update_seq&&v(b,function(H){H.target.result&&H.target.result.length>0&&(d=H.target.result[0])});function v(H,Z){function Q(te){var $=te.target.result,C=void 0;return $&&$.key&&(C=$.key),Z({target:{result:[C]}})}H.openCursor(null,"prev").onsuccess=Q}function D(H,Z,Q){var te=H.id+"::"+Q;l.get(te).onsuccess=function(C){if(Z.doc=ji(C.target.result)||{},t.conflicts){var P=Oo(H);P.length&&(Z.doc._conflicts=P)}fd(Z.doc,t,S)}}function I(H,Z){var Q={id:Z.id,key:Z.id,value:{rev:H}},te=Z.deleted;te?o&&(u.push(Q),Q.value.deleted=!0,Q.doc=null):f--<=0&&(u.push(Q),t.include_docs&&D(Z,Q,H))}function k(H){for(var Z=0,Q=H.length;Z<Q&&u.length!==g;Z++){var te=H[Z];if(te.error&&o){u.push(te);continue}var $=Pn(te),C=$.winningRev;I(C,$)}}function M(H,Z,Q){Q&&(k(Z),u.length<g&&Q.continue())}function U(H){var Z=H.target.result;t.descending&&(Z=Z.reverse()),k(Z)}function ee(){var H={total_rows:c,offset:t.skip,rows:u};t.update_seq&&d!==void 0&&(H.update_seq=d),n(null,H)}function X(){t.attachments?Da(u,t.binary).then(ee):ee()}if(!(h||g===0)){if(o)return R0(t.keys,O,M);if(g===-1)return j0(O,A,U);hd(O,A,t.descending,g+f,M)}}function F0(t){return new Promise(function(e){var n=Ao([""]),r=t.objectStore(Ta).put(n,"key");r.onsuccess=function(){var i=navigator.userAgent.match(/Chrome\/(\d+)/),s=navigator.userAgent.match(/Edge\//);e(s||!i||parseInt(i[1],10)>=43)},r.onerror=t.onabort=function(i){i.preventDefault(),i.stopPropagation(),e(!1)}}).catch(function(){return!1})}function M0(t,e){var n=t.objectStore(Je).index("deletedOrLocal");n.count(IDBKeyRange.only("0")).onsuccess=function(r){e(r.target.result)}}var qa=!1,La=[];function U0(t,e,n,r){try{t(e,n)}catch(i){r.emit("error",i)}}function tl(){qa||!La.length||(qa=!0,La.shift()())}function K0(t,e,n){La.push(function(){t(function(s,o){U0(e,s,o,n),qa=!1,Wt(function(){tl()})})}),tl()}function z0(t,e,n,r){if(t=Ze(t),t.continuous){var i=n+":"+Wi();return Kr.addListener(n,i,e,t),Kr.notify(n),{cancel:function(){Kr.removeListener(n,i)}}}var s=t.doc_ids&&new $r(t.doc_ids);t.since=t.since||0;var o=t.since,f="limit"in t?t.limit:-1;f===0&&(f=1);var g=[],w=0,A=yo(t),h=new dt,y,E,S,O;function b(I,k,M){if(!M||!I.length)return;var U=new Array(I.length),ee=new Array(I.length);function X(Q,te){var $=t.processChange(te,Q,t);o=$.seq=Q.seq;var C=A($);return typeof C=="object"?Promise.reject(C):C?(w++,t.return_docs&&g.push($),t.attachments&&t.include_docs?new Promise(function(P){fd(te,t,y,function(){Da([$],t.binary).then(function(){P($)})})}):Promise.resolve($)):Promise.resolve()}function H(){for(var Q=[],te=0,$=U.length;te<$&&w!==f;te++){var C=U[te];if(C){var P=ee[te];Q.push(X(P,C))}}Promise.all(Q).then(function(q){for(var j=0,K=q.length;j<K;j++)q[j]&&t.onChange(q[j])}).catch(t.complete),w!==f&&M.continue()}var Z=0;k.forEach(function(Q,te){var $=ji(Q),C=I[te];l($,C,function(P,q){ee[te]=P,U[te]=q,++Z===I.length&&H()})})}function p(I,k,M,U){if(M.seq!==k)return U();if(M.winningRev===I._rev)return U(M,I);var ee=I._id+"::"+M.winningRev,X=O.get(ee);X.onsuccess=function(H){U(M,ji(H.target.result))}}function l(I,k,M){if(s&&!s.has(I._id))return M();var U=h.get(I._id);if(U)return p(I,k,U,M);S.get(I._id).onsuccess=function(ee){U=Pn(ee.target.result),h.set(I._id,U),p(I,k,U,M)}}function u(){t.complete(null,{results:g,last_seq:o})}function c(){!t.continuous&&t.attachments?Da(g).then(u):u()}var d=[Je,rt];t.attachments&&d.push(St);var v=Pt(r,d,"readonly");if(v.error)return t.complete(v.error);y=v.txn,y.onabort=Kt(t.complete),y.oncomplete=c,E=y.objectStore(rt),S=y.objectStore(Je),O=E.index("_doc_id_rev");var D=t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null;hd(E,D,t.descending,f,b)}var cr=new dt,zs,Hs=new dt;function vd(t,e){var n=this;K0(function(r){H0(n,t,r)},e,n.constructor)}function H0(t,e,n){var r=e.name,i=null,s=null;t._meta=null;function o(b){return function(p,l){p&&p instanceof Error&&!p.reason&&s&&(p.reason=s),b(p,l)}}function f(b){var p=b.createObjectStore(Je,{keyPath:"id"});b.createObjectStore(rt,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),b.createObjectStore(St,{keyPath:"digest"}),b.createObjectStore(ct,{keyPath:"id",autoIncrement:!1}),b.createObjectStore(Ta),p.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),b.createObjectStore(Ft,{keyPath:"_id"});var l=b.createObjectStore(Ln,{autoIncrement:!0});l.createIndex("seq","seq"),l.createIndex("digestSeq","digestSeq",{unique:!0})}function g(b,p){var l=b.objectStore(Je);l.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),l.openCursor().onsuccess=function(u){var c=u.target.result;if(c){var d=c.value,v=en(d);d.deletedOrLocal=v?"1":"0",l.put(d),c.continue()}else p()}}function w(b){b.createObjectStore(Ft,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function A(b,p){var l=b.objectStore(Ft),u=b.objectStore(Je),c=b.objectStore(rt),d=u.openCursor();d.onsuccess=function(v){var D=v.target.result;if(D){var I=D.value,k=I.id,M=jn(k),U=Un(I);if(M){var ee=k+"::"+U,X=k+"::",H=k+"::~",Z=c.index("_doc_id_rev"),Q=IDBKeyRange.bound(X,H,!1,!1),te=Z.openCursor(Q);te.onsuccess=function($){if(te=$.target.result,!te)u.delete(D.primaryKey),D.continue();else{var C=te.value;C._doc_id_rev===ee&&l.put(C),c.delete(te.primaryKey),te.continue()}}}else D.continue()}else p&&p()}}function h(b){var p=b.createObjectStore(Ln,{autoIncrement:!0});p.createIndex("seq","seq"),p.createIndex("digestSeq","digestSeq",{unique:!0})}function y(b,p){var l=b.objectStore(rt),u=b.objectStore(St),c=b.objectStore(Ln),d=u.count();d.onsuccess=function(v){var D=v.target.result;if(!D)return p();l.openCursor().onsuccess=function(I){var k=I.target.result;if(!k)return p();for(var M=k.value,U=k.primaryKey,ee=Object.keys(M._attachments||{}),X={},H=0;H<ee.length;H++){var Z=M._attachments[ee[H]];X[Z.digest]=!0}var Q=Object.keys(X);for(H=0;H<Q.length;H++){var te=Q[H];c.put({seq:U,digestSeq:te+"::"+U})}k.continue()}}}function E(b){function p(d){return d.data?Pn(d):(d.deleted=d.deletedOrLocal==="1",d)}var l=b.objectStore(rt),u=b.objectStore(Je),c=u.openCursor();c.onsuccess=function(d){var v=d.target.result;if(!v)return;var D=p(v.value);D.winningRev=D.winningRev||Un(D);function I(){var M=D.id+"::",U=D.id+"::ï¿¿",ee=l.index("_doc_id_rev").openCursor(IDBKeyRange.bound(M,U)),X=0;ee.onsuccess=function(H){var Z=H.target.result;if(!Z)return D.seq=X,k();var Q=Z.primaryKey;Q>X&&(X=Q),Z.continue()}}function k(){var M=ka(D,D.winningRev,D.deleted),U=u.put(M);U.onsuccess=function(){v.continue()}}if(D.seq)return k();I()}}t._remote=!1,t.type=function(){return"idb"},t._id=Nf(function(b){b(null,t._meta.instanceId)}),t._bulkDocs=function(p,l,u){I0(e,p,l,t,i,o(u))},t._get=function(p,l,u){var c,d,v,D=l.ctx;if(!D){var I=Pt(i,[Je,rt,St],"readonly");if(I.error)return u(I.error);D=I.txn}function k(){u(v,{doc:c,metadata:d,ctx:D})}D.objectStore(Je).get(p).onsuccess=function(M){if(d=Pn(M.target.result),!d)return v=Ae(Et,"missing"),k();var U;if(l.rev)U=l.latest?Ay(l.rev,d):l.rev;else{U=d.winningRev;var ee=en(d);if(ee)return v=Ae(Et,"deleted"),k()}var X=D.objectStore(rt),H=d.id+"::"+U;X.index("_doc_id_rev").get(H).onsuccess=function(Z){if(c=Z.target.result,c&&(c=ji(c)),!c)return v=Ae(Et,"missing"),k();k()}}},t._getAttachment=function(b,p,l,u,c){var d;if(u.ctx)d=u.ctx;else{var v=Pt(i,[Je,rt,St],"readonly");if(v.error)return c(v.error);d=v.txn}var D=l.digest,I=l.content_type;d.objectStore(St).get(D).onsuccess=function(k){var M=k.target.result.body;ld(M,I,u.binary,function(U){c(null,U)})}},t._info=function(p){var l,u,c=Pt(i,[ct,rt],"readonly");if(c.error)return p(c.error);var d=c.txn;d.objectStore(ct).get(ct).onsuccess=function(v){u=v.target.result.docCount},d.objectStore(rt).openCursor(null,"prev").onsuccess=function(v){var D=v.target.result;l=D?D.key:0},d.oncomplete=function(){p(null,{doc_count:u,update_seq:l,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(p,l){N0(p,i,o(l))},t._changes=function(p){return z0(p,t,r,i)},t._close=function(b){i.close(),cr.delete(r),b()},t._getRevisionTree=function(b,p){var l=Pt(i,[Je],"readonly");if(l.error)return p(l.error);var u=l.txn,c=u.objectStore(Je).get(b);c.onsuccess=function(d){var v=Pn(d.target.result);v?p(null,v.rev_tree):p(Ae(Et))}},t._doCompaction=function(b,p,l){var u=[Je,rt,St,Ln],c=Pt(i,u,"readwrite");if(c.error)return l(c.error);var d=c.txn,v=d.objectStore(Je);v.get(b).onsuccess=function(D){var I=Pn(D.target.result);Kn(I.rev_tree,function(U,ee,X,H,Z){var Q=ee+"-"+X;p.indexOf(Q)!==-1&&(Z.status="missing")}),dd(p,b,d);var k=I.winningRev,M=I.deleted;d.objectStore(Je).put(ka(I,k,M))},d.onabort=Kt(l),d.oncomplete=function(){l()}},t._getLocal=function(b,p){var l=Pt(i,[Ft],"readonly");if(l.error)return p(l.error);var u=l.txn,c=u.objectStore(Ft).get(b);c.onerror=Kt(p),c.onsuccess=function(d){var v=d.target.result;v?(delete v._doc_id_rev,p(null,v)):p(Ae(Et))}},t._putLocal=function(b,p,l){typeof p=="function"&&(l=p,p={}),delete b._revisions;var u=b._rev,c=b._id;u?b._rev="0-"+(parseInt(u.split("-")[1],10)+1):b._rev="0-1";var d=p.ctx,v;if(!d){var D=Pt(i,[Ft],"readwrite");if(D.error)return l(D.error);d=D.txn,d.onerror=Kt(l),d.oncomplete=function(){v&&l(null,v)}}var I=d.objectStore(Ft),k;u?(k=I.get(c),k.onsuccess=function(M){var U=M.target.result;if(!U||U._rev!==u)l(Ae(Er));else{var ee=I.put(b);ee.onsuccess=function(){v={ok:!0,id:b._id,rev:b._rev},p.ctx&&l(null,v)}}}):(k=I.add(b),k.onerror=function(M){l(Ae(Er)),M.preventDefault(),M.stopPropagation()},k.onsuccess=function(){v={ok:!0,id:b._id,rev:b._rev},p.ctx&&l(null,v)})},t._removeLocal=function(b,p,l){typeof p=="function"&&(l=p,p={});var u=p.ctx;if(!u){var c=Pt(i,[Ft],"readwrite");if(c.error)return l(c.error);u=c.txn,u.oncomplete=function(){d&&l(null,d)}}var d,v=b._id,D=u.objectStore(Ft),I=D.get(v);I.onerror=Kt(l),I.onsuccess=function(k){var M=k.target.result;!M||M._rev!==b._rev?l(Ae(Et)):(D.delete(v),d={ok:!0,id:v,rev:"0-0"},p.ctx&&l(null,d))}},t._destroy=function(b,p){Kr.removeAllListeners(r);var l=Hs.get(r);l&&l.result&&(l.result.close(),cr.delete(r));var u=indexedDB.deleteDatabase(r);u.onsuccess=function(){Hs.delete(r),qi()&&r in localStorage&&delete localStorage[r],p(null,{ok:!0})},u.onerror=Kt(p)};var S=cr.get(r);if(S)return i=S.idb,t._meta=S.global,Wt(function(){n(null,t)});var O=indexedDB.open(r,q0);Hs.set(r,O),O.onupgradeneeded=function(b){var p=b.target.result;if(b.oldVersion<1)return f(p);var l=b.currentTarget.transaction;b.oldVersion<3&&w(p),b.oldVersion<4&&h(p);var u=[g,A,y,E],c=b.oldVersion;function d(){var v=u[c-1];c++,v&&v(l,d)}d()},O.onsuccess=function(b){i=b.target.result,i.onversionchange=function(){i.close(),cr.delete(r)},i.onabort=function(k){xt("error","Database has a global failure",k.target.error),s=k.target.error,i.close(),cr.delete(r)};var p=i.transaction([ct,Ta,Je],"readwrite"),l=!1,u,c,d,v;function D(){typeof d>"u"||!l||(t._meta={name:r,instanceId:v,blobSupport:d},cr.set(r,{idb:i,global:t._meta}),n(null,t))}function I(){if(!(typeof c>"u"||typeof u>"u")){var k=r+"_id";k in u?v=u[k]:u[k]=v=Wi(),u.docCount=c,p.objectStore(ct).put(u)}}p.objectStore(ct).get(ct).onsuccess=function(k){u=k.target.result||{id:ct},I()},M0(p,function(k){c=k,I()}),zs||(zs=F0(p)),zs.then(function(k){d=k,D()}),p.oncomplete=function(){l=!0,D()},p.onabort=Kt(n)},O.onerror=function(b){var p=b.target.error&&b.target.error.message;p?p.indexOf("stored database is a higher version")!==-1&&(p=new Error('This DB was created with the newer "indexeddb" adapter, but you are trying to open it with the older "idb" adapter')):p="Failed to open indexedDB, are you in private browsing mode?",xt("error",p),n(Ae(_o,p))}}vd.valid=function(){try{return typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}};function G0(t){t.adapter("idb",vd,!0)}function W0(t,e){return new Promise(function(n,r){var i=0,s=0,o=0,f=t.length,g;function w(){i++,t[s++]().then(h,y)}function A(){++o===f?g?r(g):n():E()}function h(){i--,A()}function y(S){i--,g=g||S,A()}function E(){for(;i<e&&s<f;)w()}E()})}const J0=25,Q0=50,wi=5e3,X0=1e4;let Gs={};function Ws(t){let e=t.doc||t.ok,n=e&&e._attachments;n&&Object.keys(n).forEach(function(r){let i=n[r];i.data=Eo(i.data,i.content_type)})}function xn(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function nl(t){return!t._attachments||!Object.keys(t._attachments)?Promise.resolve():Promise.all(Object.keys(t._attachments).map(function(e){let n=t._attachments[e];if(n.data&&typeof n.data!="string")return new Promise(function(r){So(n.data,r)}).then(function(r){n.data=r})}))}function Y0(t){if(!t.prefix)return!1;let e=Hf(t.prefix).protocol;return e==="http"||e==="https"}function Z0(t,e){if(Y0(e)){let i=e.name.substr(e.prefix.length);t=e.prefix.replace(/\/?$/,"/")+encodeURIComponent(i)}let n=Hf(t);(n.user||n.password)&&(n.auth={username:n.user,password:n.password});let r=n.path.replace(/(^\/|\/$)/g,"").split("/");return n.db=r.pop(),n.db.indexOf("%")===-1&&(n.db=encodeURIComponent(n.db)),n.path=r.join("/"),n}function Xe(t,e){return Si(t,t.db+"/"+e)}function Si(t,e){let n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function bi(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function V0(t){let e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",n=e.indexOf("msie")!==-1,r=e.indexOf("trident")!==-1,i=e.indexOf("edge")!==-1,s=!("method"in t)||t.method==="GET";return(n||r||i)&&s}function Pa(t,e){let n=this,r=Z0(t.name,t),i=Xe(r,"");t=Ze(t);const s=async function(h,y){if(y=y||{},y.headers=y.headers||new pr,y.credentials="include",t.auth||r.auth){let O=t.auth||r.auth,b=O.username+":"+O.password,p=Zr(unescape(encodeURIComponent(b)));y.headers.set("Authorization","Basic "+p)}let E=t.headers||{};return Object.keys(E).forEach(function(O){y.headers.append(O,E[O])}),V0(y)&&(h+=(h.indexOf("?")===-1?"?":"&")+"_nonce="+Date.now()),await(t.fetch||nd)(h,y)};function o(h,y){return ze(h,function(...E){w().then(function(){return y.apply(this,E)}).catch(function(S){E.pop()(S)})}).bind(n)}async function f(h,y){let E={};y=y||{},y.headers=y.headers||new pr,y.headers.get("Content-Type")||y.headers.set("Content-Type","application/json"),y.headers.get("Accept")||y.headers.set("Accept","application/json");const S=await s(h,y);E.ok=S.ok,E.status=S.status;const O=await S.json();if(E.data=O,!E.ok)throw E.data.status=E.status,Sr(E.data);return Array.isArray(E.data)&&(E.data=E.data.map(function(b){return b.error||b.missing?Sr(b):b})),E}let g;async function w(){return t.skip_setup?Promise.resolve():g||(g=f(i).catch(function(h){return h&&h.status&&h.status===404?(Aa(404,"PouchDB is just detecting if the remote exists."),f(i,{method:"PUT"})):Promise.reject(h)}).catch(function(h){return h&&h.status&&h.status===412?!0:Promise.reject(h)}),g.catch(function(){g=null}),g)}Wt(function(){e(null,n)}),n._remote=!0,n.type=function(){return"http"},n.id=o("id",async function(h){let y;try{y=await(await s(Si(r,""))).json()}catch{y={}}let E=y&&y.uuid?y.uuid+r.db:Xe(r,"");h(null,E)}),n.compact=o("compact",async function(h,y){typeof h=="function"&&(y=h,h={}),h=Ze(h),await f(Xe(r,"_compact"),{method:"POST"});function E(){n.info(function(S,O){O&&!O.compact_running?y(null,{ok:!0}):setTimeout(E,h.interval||200)})}E()}),n.bulkGet=ze("bulkGet",function(h,y){let E=this;async function S(l){let u={};h.revs&&(u.revs=!0),h.attachments&&(u.attachments=!0),h.latest&&(u.latest=!0);try{const c=await f(Xe(r,"_bulk_get"+bi(u)),{method:"POST",body:JSON.stringify({docs:h.docs})});h.attachments&&h.binary&&c.data.results.forEach(function(d){d.docs.forEach(Ws)}),l(null,c.data)}catch(c){l(c)}}function O(){let l=Q0,u=Math.ceil(h.docs.length/l),c=0,d=new Array(u);function v(D){return function(I,k){d[D]=k.results,++c===u&&y(null,{results:Li(d)})}}for(let D=0;D<u;D++){let I=Yr(h,["revs","attachments","binary","latest"]);I.docs=h.docs.slice(D*l,Math.min(h.docs.length,(D+1)*l)),Ff(E,I,v(D))}}let b=Si(r,""),p=Gs[b];typeof p!="boolean"?S(function(l,u){l?(Gs[b]=!1,Aa(l.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),O()):(Gs[b]=!0,y(null,u))}):p?S(y):O()}),n._info=async function(h){try{await w();const E=await(await s(Xe(r,""))).json();E.host=Xe(r,""),h(null,E)}catch(y){h(y)}},n.fetch=async function(h,y){await w();const E=h.substring(0,1)==="/"?Si(r,h.substring(1)):Xe(r,h);return s(E,y)},n.get=o("get",async function(h,y,E){typeof y=="function"&&(E=y,y={}),y=Ze(y);let S={};y.revs&&(S.revs=!0),y.revs_info&&(S.revs_info=!0),y.latest&&(S.latest=!0),y.open_revs&&(y.open_revs!=="all"&&(y.open_revs=JSON.stringify(y.open_revs)),S.open_revs=y.open_revs),y.rev&&(S.rev=y.rev),y.conflicts&&(S.conflicts=y.conflicts),y.update_seq&&(S.update_seq=y.update_seq),h=xn(h);function O(l){let u=l._attachments,c=u&&Object.keys(u);if(!u||!c.length)return;async function d(D){const I=u[D],k=xn(l._id)+"/"+A(D)+"?rev="+l._rev,M=await s(Xe(r,k));let U;"buffer"in M?U=await M.buffer():U=await M.blob();let ee;if(y.binary){let X=Object.getOwnPropertyDescriptor(U.__proto__,"type");(!X||X.set)&&(U.type=I.content_type),ee=U}else ee=await new Promise(function(X){So(U,X)});delete I.stub,delete I.length,I.data=ee}let v=c.map(function(D){return function(){return d(D)}});return W0(v,5)}function b(l){return Array.isArray(l)?Promise.all(l.map(function(u){if(u.ok)return O(u.ok)})):O(l)}const p=Xe(r,h+bi(S));try{const l=await f(p);y.attachments&&await b(l.data),E(null,l.data)}catch(l){l.docId=h,E(l)}}),n.remove=o("remove",async function(h,y,E,S){let O;typeof y=="string"?(O={_id:h,_rev:y},typeof E=="function"&&(S=E,E={})):(O=h,typeof y=="function"?(S=y,E={}):(S=E,E=y));const b=O._rev||E.rev,p=Xe(r,xn(O._id))+"?rev="+b;try{const l=await f(p,{method:"DELETE"});S(null,l.data)}catch(l){S(l)}});function A(h){return h.split("/").map(encodeURIComponent).join("/")}n.getAttachment=o("getAttachment",async function(h,y,E,S){typeof E=="function"&&(S=E,E={});const O=E.rev?"?rev="+E.rev:"",b=Xe(r,xn(h))+"/"+A(y)+O;let p;try{const u=await s(b,{method:"GET"});if(!u.ok)throw u;p=u.headers.get("content-type");let c;if(typeof process<"u"&&!process.browser&&typeof u.buffer=="function"?c=await u.buffer():c=await u.blob(),typeof process<"u"&&!process.browser){var l=Object.getOwnPropertyDescriptor(c.__proto__,"type");(!l||l.set)&&(c.type=p)}S(null,c)}catch(u){S(u)}}),n.removeAttachment=o("removeAttachment",async function(h,y,E,S){const O=Xe(r,xn(h)+"/"+A(y))+"?rev="+E;try{const b=await f(O,{method:"DELETE"});S(null,b.data)}catch(b){S(b)}}),n.putAttachment=o("putAttachment",async function(h,y,E,S,O,b){typeof O=="function"&&(b=O,O=S,S=E,E=null);const p=xn(h)+"/"+A(y);let l=Xe(r,p);if(E&&(l+="?rev="+E),typeof S=="string"){let u;try{u=bo(S)}catch{return b(Ae(Uf,"Attachment is not a valid base64 string"))}S=u?$o(u,O):""}try{const u=await f(l,{headers:new pr({"Content-Type":O}),method:"PUT",body:S});b(null,u.data)}catch(u){b(u)}}),n._bulkDocs=async function(h,y,E){h.new_edits=y.new_edits;try{await w(),await Promise.all(h.docs.map(nl));const S=await f(Xe(r,"_bulk_docs"),{method:"POST",body:JSON.stringify(h)});E(null,S.data)}catch(S){E(S)}},n._put=async function(h,y,E){try{await w(),await nl(h);const S=await f(Xe(r,xn(h._id)),{method:"PUT",body:JSON.stringify(h)});E(null,S.data)}catch(S){S.docId=h&&h._id,E(S)}},n.allDocs=o("allDocs",async function(h,y){typeof h=="function"&&(y=h,h={}),h=Ze(h);let E={},S,O="GET";h.conflicts&&(E.conflicts=!0),h.update_seq&&(E.update_seq=!0),h.descending&&(E.descending=!0),h.include_docs&&(E.include_docs=!0),h.attachments&&(E.attachments=!0),h.key&&(E.key=JSON.stringify(h.key)),h.start_key&&(h.startkey=h.start_key),h.startkey&&(E.startkey=JSON.stringify(h.startkey)),h.end_key&&(h.endkey=h.end_key),h.endkey&&(E.endkey=JSON.stringify(h.endkey)),typeof h.inclusive_end<"u"&&(E.inclusive_end=!!h.inclusive_end),typeof h.limit<"u"&&(E.limit=h.limit),typeof h.skip<"u"&&(E.skip=h.skip);let b=bi(E);typeof h.keys<"u"&&(O="POST",S={keys:h.keys});try{const p=await f(Xe(r,"_all_docs"+b),{method:O,body:JSON.stringify(S)});h.include_docs&&h.attachments&&h.binary&&p.data.rows.forEach(Ws),y(null,p.data)}catch(p){y(p)}}),n._changes=function(h){let y="batch_size"in h?h.batch_size:J0;h=Ze(h),h.continuous&&!("heartbeat"in h)&&(h.heartbeat=X0);let E="timeout"in h?h.timeout:30*1e3;"timeout"in h&&h.timeout&&E-h.timeout<wi&&(E=h.timeout+wi),"heartbeat"in h&&h.heartbeat&&E-h.heartbeat<wi&&(E=h.heartbeat+wi);let S={};"timeout"in h&&h.timeout&&(S.timeout=h.timeout);let O=typeof h.limit<"u"?h.limit:!1,b=O;if(h.style&&(S.style=h.style),(h.include_docs||h.filter&&typeof h.filter=="function")&&(S.include_docs=!0),h.attachments&&(S.attachments=!0),h.continuous&&(S.feed="longpoll"),h.seq_interval&&(S.seq_interval=h.seq_interval),h.conflicts&&(S.conflicts=!0),h.descending&&(S.descending=!0),h.update_seq&&(S.update_seq=!0),"heartbeat"in h&&h.heartbeat&&(S.heartbeat=h.heartbeat),h.filter&&typeof h.filter=="string"&&(S.filter=h.filter),h.view&&typeof h.view=="string"&&(S.filter="_view",S.view=h.view),h.query_params&&typeof h.query_params=="object")for(let I in h.query_params)Object.prototype.hasOwnProperty.call(h.query_params,I)&&(S[I]=h.query_params[I]);let p="GET",l;h.doc_ids?(S.filter="_doc_ids",p="POST",l={doc_ids:h.doc_ids}):h.selector&&(S.filter="_selector",p="POST",l={selector:h.selector});let u=new jy,c;const d=async function(I,k){if(h.aborted)return;S.since=I,typeof S.since=="object"&&(S.since=JSON.stringify(S.since)),h.descending?O&&(S.limit=b):S.limit=!O||b>y?y:b;let M=Xe(r,"_changes"+bi(S)),U={signal:u.signal,method:p,body:JSON.stringify(l)};if(c=I,!h.aborted)try{await w();const ee=await f(M,U);k(null,ee.data)}catch(ee){k(ee)}};let v={results:[]};const D=function(I,k){if(h.aborted)return;let M=0;if(k&&k.results){M=k.results.length,v.last_seq=k.last_seq;let ee=null,X=null;typeof k.pending=="number"&&(ee=k.pending),(typeof v.last_seq=="string"||typeof v.last_seq=="number")&&(X=v.last_seq),h.query_params,k.results=k.results.filter(function(H){b--;let Z=yo(h)(H);return Z&&(h.include_docs&&h.attachments&&h.binary&&Ws(H),h.return_docs&&v.results.push(H),h.onChange(H,ee,X)),Z})}else if(I){h.aborted=!0,h.complete(I);return}k&&k.last_seq&&(c=k.last_seq);let U=O&&b<=0||k&&M<y||h.descending;h.continuous&&!(O&&b<=0)||!U?Wt(function(){d(c,D)}):h.complete(null,v)};return d(h.since||0,D),{cancel:function(){h.aborted=!0,u.abort()}}},n.revsDiff=o("revsDiff",async function(h,y,E){typeof y=="function"&&(E=y,y={});try{const S=await f(Xe(r,"_revs_diff"),{method:"POST",body:JSON.stringify(h)});E(null,S.data)}catch(S){E(S)}}),n._close=function(h){h()},n._destroy=async function(h,y){try{const E=await f(Xe(r,""),{method:"DELETE"});y(null,E)}catch(E){E.status===404?y(null,{ok:!0}):y(E)}}}Pa.valid=function(){return!0};function ew(t){t.adapter("http",Pa,!1),t.adapter("https",Pa,!1)}class On extends Error{constructor(e){super(),this.status=400,this.name="query_parse_error",this.message=e,this.error=!0;try{Error.captureStackTrace(this,On)}catch{}}}class Ji extends Error{constructor(e){super(),this.status=404,this.name="not_found",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Ji)}catch{}}}class Qi extends Error{constructor(e){super(),this.status=500,this.name="invalid_value",this.message=e,this.error=!0;try{Error.captureStackTrace(this,Qi)}catch{}}}function gd(t,e){return e&&t.then(function(n){Wt(function(){e(null,n)})},function(n){Wt(function(){e(n)})}),t}function tw(t){return function(...e){var n=e.pop(),r=t.apply(this,e);return typeof n=="function"&&gd(r,n),r}}function nw(t,e){return t.then(function(n){return e().then(function(){return n})},function(n){return e().then(function(){throw n})})}function Js(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function rl(t){var e=new $r(t),n=new Array(e.size),r=-1;return e.forEach(function(i){n[++r]=i}),n}function Qs(t){var e=new Array(t.size),n=-1;return t.forEach(function(r,i){e[++n]=i}),e}function il(t){var e="builtin "+t+" function requires map values to be numbers or number arrays";return new Qi(e)}function Ia(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if(typeof i!="number")if(Array.isArray(i)){e=typeof e=="number"?[e]:e;for(var s=0,o=i.length;s<o;s++){var f=i[s];if(typeof f!="number")throw il("_sum");typeof e[s]>"u"?e.push(f):e[s]+=f}}else throw il("_sum");else typeof e=="number"?e+=i:e[0]+=i}return e}var rw=xt.bind(null,"log"),iw=Array.isArray,sw=JSON.parse;function pd(t,e){return wo("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:Ia,log:rw,isArray:iw,toJSON:sw})}class ja{constructor(){this.promise=new Promise(function(e){e()})}add(e){return this.promise=this.promise.catch(function(){}).then(function(){return e()}),this.promise}finish(){return this.promise}}function sl(t){if(!t)return"undefined";switch(typeof t){case"function":return t.toString();case"string":return t.toString();default:return JSON.stringify(t)}}function aw(t,e){return sl(t)+sl(e)+"undefined"}async function al(t,e,n,r,i,s){const o=aw(n,r);let f;if(!i&&(f=t._cachedViews=t._cachedViews||{},f[o]))return f[o];const g=t.info().then(async function(w){const A=w.db_name+"-mrview-"+(i?"temp":Jf(o));function h(b){b.views=b.views||{};let p=e;p.indexOf("/")===-1&&(p=e+"/"+e);const l=b.views[p]=b.views[p]||{};if(!l[A])return l[A]=!0,b}await Pi(t,"_local/"+s,h);const E=(await t.registerDependentDatabase(A)).db;E.auto_compaction=!0;const S={name:A,db:E,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:r};let O;try{O=await S.db.get("_local/lastSeq")}catch(b){if(b.status!==404)throw b}return S.seq=O?O.seq:0,f&&S.db.once("destroyed",function(){delete f[o]}),S});return f&&(f[o]=g),g}var ol={},ul=new ja,ow=50;function Xs(t){return t.indexOf("/")===-1?[t,t]:t.split("/")}function uw(t){return t.length===1&&/^1-/.test(t[0].rev)}function cl(t,e,n){try{t.emit("error",e)}catch{xt("error",`The user's map/reduce function threw an uncaught error.
You can debug this error by doing:
myDatabase.on('error', function (err) { debugger; });
Please double-check your map/reduce function.`),xt("error",e,n)}}function cw(t,e,n,r){function i($,C,P){try{C(P)}catch(q){cl($,q,{fun:C,doc:P})}}function s($,C,P,q,j){try{return{output:C(P,q,j)}}catch(K){return cl($,K,{fun:C,keys:P,values:q,rereduce:j}),{error:K}}}function o($,C){const P=Ge($.key,C.key);return P!==0?P:Ge($.value,C.value)}function f($,C,P){return P=P||0,typeof C=="number"?$.slice(P,C+P):P>0?$.slice(P):$}function g($){const C=$.value;return C&&typeof C=="object"&&C._id||$.id}function w($){$.rows.forEach(function(C){const P=C.doc&&C.doc._attachments;P&&Object.keys(P).forEach(function(q){const j=P[q];P[q].data=Eo(j.data,j.content_type)})})}function A($){return function(C){return $.include_docs&&$.attachments&&$.binary&&w(C),C}}function h($,C,P,q){let j=C[$];typeof j<"u"&&(q&&(j=encodeURIComponent(JSON.stringify(j))),P.push($+"="+j))}function y($){if(typeof $<"u"){const C=Number($);return!isNaN(C)&&C===parseInt($,10)?C:$}}function E($){return $.group_level=y($.group_level),$.limit=y($.limit),$.skip=y($.skip),$}function S($){if($){if(typeof $!="number")return new On(`Invalid value for integer: "${$}"`);if($<0)return new On(`Invalid value for positive integer: "${$}"`)}}function O($,C){const P=$.descending?"endkey":"startkey",q=$.descending?"startkey":"endkey";if(typeof $[P]<"u"&&typeof $[q]<"u"&&Ge($[P],$[q])>0)throw new On("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(C.reduce&&$.reduce!==!1){if($.include_docs)throw new On("{include_docs:true} is invalid for reduce");if($.keys&&$.keys.length>1&&!$.group&&!$.group_level)throw new On("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(j){const K=S($[j]);if(K)throw K})}async function b($,C,P){let q=[],j,K="GET",J;if(h("reduce",P,q),h("include_docs",P,q),h("attachments",P,q),h("limit",P,q),h("descending",P,q),h("group",P,q),h("group_level",P,q),h("skip",P,q),h("stale",P,q),h("conflicts",P,q),h("startkey",P,q,!0),h("start_key",P,q,!0),h("endkey",P,q,!0),h("end_key",P,q,!0),h("inclusive_end",P,q),h("key",P,q,!0),h("update_seq",P,q),q=q.join("&"),q=q===""?"":"?"+q,typeof P.keys<"u"){const N=`keys=${encodeURIComponent(JSON.stringify(P.keys))}`;N.length+q.length+1<=2e3?q+=(q[0]==="?"?"&":"?")+N:(K="POST",typeof C=="string"?j={keys:P.keys}:C.keys=P.keys)}if(typeof C=="string"){const L=Xs(C),N=await $.fetch("_design/"+L[0]+"/_view/"+L[1]+q,{headers:new pr({"Content-Type":"application/json"}),method:K,body:JSON.stringify(j)});J=N.ok;const G=await N.json();if(!J)throw G.status=N.status,Sr(G);return G.rows.forEach(function(W){if(W.value&&W.value.error&&W.value.error==="builtin_reduce_error")throw new Error(W.reason)}),new Promise(function(W){W(G)}).then(A(P))}j=j||{},Object.keys(C).forEach(function(L){Array.isArray(C[L])?j[L]=C[L]:j[L]=C[L].toString()});const F=await $.fetch("_temp_view"+q,{headers:new pr({"Content-Type":"application/json"}),method:"POST",body:JSON.stringify(j)});J=F.ok;const T=await F.json();if(!J)throw T.status=F.status,Sr(T);return new Promise(function(L){L(T)}).then(A(P))}function p($,C,P){return new Promise(function(q,j){$._query(C,P,function(K,J){if(K)return j(K);q(J)})})}function l($){return new Promise(function(C,P){$._viewCleanup(function(q,j){if(q)return P(q);C(j)})})}function u($){return function(C){if(C.status===404)return $;throw C}}async function c($,C,P){const q="_local/doc_"+$,j={_id:q,keys:[]},K=P.get($),J=K[0],F=K[1];function T(){return uw(F)?Promise.resolve(j):C.db.get(q).catch(u(j))}function L(se){return se.keys.length?C.db.allDocs({keys:se.keys,include_docs:!0}):Promise.resolve({rows:[]})}function N(se,ce){const de=[],Oe=new $r;for(let re=0,ue=ce.rows.length;re<ue;re++){const ge=ce.rows[re].doc;if(ge&&(de.push(ge),Oe.add(ge._id),ge._deleted=!J.has(ge._id),!ge._deleted)){const me=J.get(ge._id);"value"in me&&(ge.value=me.value)}}const je=Qs(J);return je.forEach(function(re){if(!Oe.has(re)){const ue={_id:re},fe=J.get(re);"value"in fe&&(ue.value=fe.value),de.push(ue)}}),se.keys=rl(je.concat(se.keys)),de.push(se),de}const G=await T(),W=await L(G);return N(G,W)}function d($){return $.sourceDB.get("_local/purges").then(function(C){const P=C.purgeSeq;return $.db.get("_local/purgeSeq").then(function(q){return q._rev}).catch(function(q){if(q.status!==404)throw q}).then(function(q){return $.db.put({_id:"_local/purgeSeq",_rev:q,purgeSeq:P})})}).catch(function(C){if(C.status!==404)throw C})}function v($,C,P){var q="_local/lastSeq";return $.db.get(q).catch(u({_id:q,seq:0})).then(function(j){var K=Qs(C);return Promise.all(K.map(function(J){return c(J,$,C)})).then(function(J){var F=Li(J);return j.seq=P,F.push(j),$.db.bulkDocs({docs:F})}).then(()=>d($))})}function D($){const C=typeof $=="string"?$:$.name;let P=ol[C];return P||(P=ol[C]=new ja),P}async function I($,C){return Js(D($),function(){return k($,C)})()}async function k($,C){let P,q,j;function K(re,ue){const fe={id:q._id,key:zn(re)};typeof ue<"u"&&ue!==null&&(fe.value=zn(ue)),P.push(fe)}const J=e($.mapFun,K);let F=$.seq||0;function T(){return $.sourceDB.info().then(function(re){j=$.sourceDB.activeTasks.add({name:"view_indexing",total_items:re.update_seq-F})})}function L(re,ue){return function(){return v($,re,ue)}}let N=0;const G={view:$.name,indexed_docs:N};$.sourceDB.emit("indexing",G);const W=new ja;async function se(){const re=await $.sourceDB.changes({return_docs:!0,conflicts:!0,include_docs:!0,style:"all_docs",since:F,limit:C.changes_batch_size}),ue=await ce();return de(re,ue)}function ce(){return $.db.get("_local/purgeSeq").then(function(re){return re.purgeSeq}).catch(function(re){if(re&&re.status!==404)throw re;return-1}).then(function(re){return $.sourceDB.get("_local/purges").then(function(ue){const fe=ue.purges.filter(function(me,he){return he>re}).map(me=>me.docId),ge=fe.filter(function(me,he){return fe.indexOf(me)===he});return Promise.all(ge.map(function(me){return $.sourceDB.get(me).then(function(he){return{docId:me,doc:he}}).catch(function(he){if(he.status!==404)throw he;return{docId:me}})}))}).catch(function(ue){if(ue&&ue.status!==404)throw ue;return[]})})}function de(re,ue){var fe=re.results;if(!fe.length&&!ue.length)return;for(let he of ue)if(fe.findIndex(function(st){return st.id===he.docId})<0){const st={_id:he.docId,doc:{_id:he.docId,_deleted:1},changes:[]};he.doc&&(st.doc=he.doc,st.changes.push({rev:he.doc._rev})),fe.push(st)}var ge=Oe(fe);W.add(L(ge,F)),N=N+fe.length;const me={view:$.name,last_seq:re.last_seq,results_count:fe.length,indexed_docs:N};if($.sourceDB.emit("indexing",me),$.sourceDB.activeTasks.update(j,{completed_items:N}),!(fe.length<C.changes_batch_size))return se()}function Oe(re){const ue=new dt;for(let fe=0,ge=re.length;fe<ge;fe++){const me=re[fe];if(me.doc._id[0]!=="_"){P=[],q=me.doc,q._deleted||i($.sourceDB,J,q),P.sort(o);const he=je(P);ue.set(me.doc._id,[he,me.changes])}F=me.seq}return ue}function je(re){const ue=new dt;let fe;for(let ge=0,me=re.length;ge<me;ge++){const he=re[ge],Ot=[he.key,he.id];ge>0&&Ge(he.key,fe)===0&&Ot.push(ge),ue.set(Lt(Ot),he),fe=he.key}return ue}try{await T(),await se(),await W.finish(),$.seq=F,$.sourceDB.activeTasks.remove(j)}catch(re){$.sourceDB.activeTasks.remove(j,re)}}function M($,C,P){P.group_level===0&&delete P.group_level;const q=P.group||P.group_level,j=n($.reduceFun),K=[],J=isNaN(P.group_level)?Number.POSITIVE_INFINITY:P.group_level;C.forEach(function(F){const T=K[K.length-1];let L=q?F.key:null;if(q&&Array.isArray(L)&&(L=L.slice(0,J)),T&&Ge(T.groupKey,L)===0){T.keys.push([F.key,F.id]),T.values.push(F.value);return}K.push({keys:[[F.key,F.id]],values:[F.value],groupKey:L})}),C=[];for(let F=0,T=K.length;F<T;F++){const L=K[F],N=s($.sourceDB,j,L.keys,L.values,!1);if(N.error&&N.error instanceof Qi)throw N.error;C.push({value:N.error?null:N.output,key:L.groupKey})}return{rows:f(C,P.limit,P.skip)}}function U($,C){return Js(D($),function(){return ee($,C)})()}async function ee($,C){let P;const q=$.reduceFun&&C.reduce!==!1,j=C.skip||0;typeof C.keys<"u"&&!C.keys.length&&(C.limit=0,delete C.keys);async function K(F){F.include_docs=!0;const T=await $.db.allDocs(F);return P=T.total_rows,T.rows.map(function(L){if("value"in L.doc&&typeof L.doc.value=="object"&&L.doc.value!==null){const G=Object.keys(L.doc.value).sort(),W=["id","key","value"];if(!(G<W||G>W))return L.doc.value}const N=e0(L.doc._id);return{key:N[0],id:N[1],value:"value"in L.doc?L.doc.value:null}})}async function J(F){let T;if(q?T=M($,F,C):typeof C.keys>"u"?T={total_rows:P,offset:j,rows:F}:T={total_rows:P,offset:j,rows:f(F,C.limit,C.skip)},C.update_seq&&(T.update_seq=$.seq),C.include_docs){const N=rl(F.map(g)),G=await $.sourceDB.allDocs({keys:N,include_docs:!0,conflicts:C.conflicts,attachments:C.attachments,binary:C.binary});var L=new dt;return G.rows.forEach(function(W){L.set(W.id,W.doc)}),F.forEach(function(W){var se=g(W),ce=L.get(se);ce&&(W.doc=ce)}),T}else return T}if(typeof C.keys<"u"){const T=C.keys.map(function(G){const W={startkey:Lt([G]),endkey:Lt([G,{}])};return C.update_seq&&(W.update_seq=!0),K(W)}),L=await Promise.all(T),N=Li(L);return J(N)}else{const F={descending:C.descending};C.update_seq&&(F.update_seq=!0);let T,L;if("start_key"in C&&(T=C.start_key),"startkey"in C&&(T=C.startkey),"end_key"in C&&(L=C.end_key),"endkey"in C&&(L=C.endkey),typeof T<"u"&&(F.startkey=C.descending?Lt([T,{}]):Lt([T])),typeof L<"u"){let G=C.inclusive_end!==!1;C.descending&&(G=!G),F.endkey=Lt(G?[L,{}]:[L])}if(typeof C.key<"u"){const G=Lt([C.key]),W=Lt([C.key,{}]);F.descending?(F.endkey=G,F.startkey=W):(F.startkey=G,F.endkey=W)}q||(typeof C.limit=="number"&&(F.limit=C.limit),F.skip=j);const N=await K(F);return J(N)}}async function X($){return(await $.fetch("_view_cleanup",{headers:new pr({"Content-Type":"application/json"}),method:"POST"})).json()}async function H($){try{const C=await $.get("_local/"+t),P=new dt;Object.keys(C.views).forEach(function(T){const L=Xs(T),N="_design/"+L[0],G=L[1];let W=P.get(N);W||(W=new $r,P.set(N,W)),W.add(G)});const q={keys:Qs(P),include_docs:!0},j=await $.allDocs(q),K={};j.rows.forEach(function(T){const L=T.key.substring(8);P.get(T.key).forEach(function(N){let G=L+"/"+N;C.views[G]||(G=N);const W=Object.keys(C.views[G]),se=T.doc&&T.doc.views&&T.doc.views[N];W.forEach(function(ce){K[ce]=K[ce]||se})})});const F=Object.keys(K).filter(function(T){return!K[T]}).map(function(T){return Js(D(T),function(){return new $.constructor(T,$.__opts).destroy()})()});return Promise.all(F).then(function(){return{ok:!0}})}catch(C){if(C.status===404)return{ok:!0};throw C}}async function Z($,C,P){if(typeof $._query=="function")return p($,C,P);if(Ht($))return b($,C,P);const q={changes_batch_size:$.__opts.view_update_changes_batch_size||ow};if(typeof C!="string")return O(P,C),ul.add(async function(){const j=await al($,"temp_view/temp_view",C.map,C.reduce,!0,t);return nw(I(j,q).then(function(){return U(j,P)}),function(){return j.db.destroy()})}),ul.finish();{const j=C,K=Xs(j),J=K[0],F=K[1],T=await $.get("_design/"+J);if(C=T.views&&T.views[F],!C)throw new Ji(`ddoc ${T._id} has no view named ${F}`);r(T,F),O(P,C);const L=await al($,j,C.map,C.reduce,!1,t);return P.stale==="ok"||P.stale==="update_after"?(P.stale==="update_after"&&Wt(function(){I(L,q)}),U(L,P)):(await I(L,q),U(L,P))}}function Q($,C,P){const q=this;typeof C=="function"&&(P=C,C={}),C=C?E(C):{},typeof $=="function"&&($={map:$});const j=Promise.resolve().then(function(){return Z(q,$,C)});return gd(j,P),j}const te=tw(function(){const $=this;return typeof $._viewCleanup=="function"?l($):Ht($)?X($):H($)});return{query:Q,viewCleanup:te}}var Ys={_sum:function(t,e){return Ia(e)},_count:function(t,e){return e.length},_stats:function(t,e){function n(r){for(var i=0,s=0,o=r.length;s<o;s++){var f=r[s];i+=f*f}return i}return{sum:Ia(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:n(e)}}};function lw(t){if(/^_sum/.test(t))return Ys._sum;if(/^_count/.test(t))return Ys._count;if(/^_stats/.test(t))return Ys._stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}function fw(t,e){if(typeof t=="function"&&t.length===2){var n=t;return function(r){return n(r,e)}}else return pd(t.toString(),e)}function dw(t){var e=t.toString(),n=lw(e);return n||pd(e)}function hw(t,e){var n=t.views&&t.views[e];if(typeof n.map!="string")throw new Ji("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}var vw="mrviews",md=cw(vw,fw,dw,hw);function gw(t,e,n){return md.query.call(this,t,e,n)}function pw(t){return md.viewCleanup.call(this,t)}var mw={query:gw,viewCleanup:pw};function _w(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}function ll(t,e){var n=Object.keys(e._attachments);return Promise.all(n.map(function(r){return t.getAttachment(e._id,r,{rev:e._rev})}))}function yw(t,e,n){var r=Ht(e)&&!Ht(t),i=Object.keys(n._attachments);return r?t.get(n._id).then(function(s){return Promise.all(i.map(function(o){return _w(s,n,o)?e.getAttachment(n._id,o):t.getAttachment(s._id,o)}))}).catch(function(s){if(s.status!==404)throw s;return ll(e,n)}):ll(e,n)}function ww(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n].missing;r.forEach(function(i){e.push({id:n,rev:i})})}),{docs:e,revs:!0,latest:!0}}function bw(t,e,n,r){n=Ze(n);var i=[],s=!0;function o(){var g=ww(n);if(g.docs.length)return t.bulkGet(g).then(function(w){if(r.cancelled)throw new Error("cancelled");return Promise.all(w.results.map(function(A){return Promise.all(A.docs.map(function(h){var y=h.ok;return h.error&&(s=!1),!y||!y._attachments?y:yw(e,t,y).then(function(E){var S=Object.keys(y._attachments);return E.forEach(function(O,b){var p=y._attachments[S[b]];delete p.stub,delete p.length,p.data=O}),y})}))})).then(function(A){i=i.concat(Li(A).filter(Boolean))})})}function f(){return{ok:s,docs:i}}return Promise.resolve().then(o).then(f)}var fl=1,dl="pouchdb",Aw=5,Mt=0;function Ra(t,e,n,r,i){return t.get(e).catch(function(s){if(s.status===404)return(t.adapter==="http"||t.adapter==="https")&&Aa(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:dl,version:fl};throw s}).then(function(s){if(!i.cancelled&&s.last_seq!==n)return s.history=(s.history||[]).filter(function(o){return o.session_id!==r}),s.history.unshift({last_seq:n,session_id:r}),s.history=s.history.slice(0,Aw),s.version=fl,s.replicator=dl,s.session_id=r,s.last_seq=n,t.put(s).catch(function(o){if(o.status===409)return Ra(t,e,n,r,i);throw o})})}class hl{constructor(e,n,r,i,s){this.src=e,this.target=n,this.id=r,this.returnValue=i,this.opts=s||{}}writeCheckpoint(e,n){var r=this;return this.updateTarget(e,n).then(function(){return r.updateSource(e,n)})}updateTarget(e,n){return this.opts.writeTargetCheckpoint?Ra(this.target,this.id,e,n,this.returnValue):Promise.resolve(!0)}updateSource(e,n){if(this.opts.writeSourceCheckpoint){var r=this;return Ra(this.src,this.id,e,n,this.returnValue).catch(function(i){if(gl(i))return r.opts.writeSourceCheckpoint=!1,!0;throw i})}else return Promise.resolve(!0)}getCheckpoint(){var e=this;return e.opts&&e.opts.writeSourceCheckpoint&&!e.opts.writeTargetCheckpoint?e.src.get(e.id).then(function(n){return n.last_seq||Mt}).catch(function(n){if(n.status!==404)throw n;return Mt}):e.target.get(e.id).then(function(n){return e.opts&&e.opts.writeTargetCheckpoint&&!e.opts.writeSourceCheckpoint?n.last_seq||Mt:e.src.get(e.id).then(function(r){if(n.version!==r.version)return Mt;var i;return n.version?i=n.version.toString():i="undefined",i in vl?vl[i](n,r):Mt},function(r){if(r.status===404&&n.last_seq)return e.src.put({_id:e.id,last_seq:Mt}).then(function(){return Mt},function(i){return gl(i)?(e.opts.writeSourceCheckpoint=!1,n.last_seq):Mt});throw r})}).catch(function(n){if(n.status!==404)throw n;return Mt})}}var vl={undefined:function(t,e){return Ge(t.last_seq,e.last_seq)===0?e.last_seq:0},1:function(t,e){return $w(e,t).last_seq}};function $w(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:_d(t.history,e.history)}function _d(t,e){var n=t[0],r=t.slice(1),i=e[0],s=e.slice(1);if(!n||e.length===0)return{last_seq:Mt,history:[]};var o=n.session_id;if(Ba(o,e))return{last_seq:n.last_seq,history:t};var f=i.session_id;return Ba(f,r)?{last_seq:i.last_seq,history:s}:_d(r,s)}function Ba(t,e){var n=e[0],r=e.slice(1);return!t||e.length===0?!1:t===n.session_id?!0:Ba(t,r)}function gl(t){return typeof t.status=="number"&&Math.floor(t.status/100)===4}function yd(t,e,n,r,i){return this instanceof hl?yd:new hl(t,e,n,r,i)}var pl=0;function Ew(t,e,n,r){if(t.retry===!1){e.emit("error",n),e.removeAllListeners();return}if(typeof t.back_off_function!="function"&&(t.back_off_function=G_),e.emit("requestError",n),e.state==="active"||e.state==="pending"){e.emit("paused",n),e.state="stopped";var i=function(){t.current_back_off=pl},s=function(){e.removeListener("active",i)};e.once("paused",s),e.once("active",i)}t.current_back_off=t.current_back_off||pl,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}function Sw(t){return Object.keys(t).sort(Ge).reduce(function(e,n){return e[n]=t[n],e},{})}function Cw(t,e,n){var r=n.doc_ids?n.doc_ids.sort(Ge):"",i=n.filter?n.filter.toString():"",s="",o="",f="";return n.selector&&(f=JSON.stringify(n.selector)),n.filter&&n.query_params&&(s=JSON.stringify(Sw(n.query_params))),n.filter&&n.filter==="_view"&&(o=n.view.toString()),Promise.all([t.id(),e.id()]).then(function(g){var w=g[0]+g[1]+i+o+s+r+f;return new Promise(function(A){Co(w,A)})}).then(function(g){return g=g.replace(/\//g,".").replace(/\+/g,"_"),"_local/"+g})}function wd(t,e,n,r,i){var s=[],o,f={seq:0,changes:[],docs:[]},g=!1,w=!1,A=!1,h=0,y=0,E=n.continuous||n.live||!1,S=n.batch_size||100,O=n.batches_limit||10,b=n.style||"all_docs",p=!1,l=n.doc_ids,u=n.selector,c,d,v=[],D=Wi(),I;i=i||{ok:!0,start_time:new Date().toISOString(),docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var k={};r.ready(t,e);function M(){return d?Promise.resolve():Cw(t,e,n).then(function(T){c=T;var L={};n.checkpoint===!1?L={writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:n.checkpoint==="source"?L={writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:n.checkpoint==="target"?L={writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:L={writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},d=new yd(t,e,c,r,L)})}function U(){if(v=[],o.docs.length!==0){var T=o.docs,L={timeout:n.timeout};return e.bulkDocs({docs:T,new_edits:!1},L).then(function(N){if(r.cancelled)throw $(),new Error("cancelled");var G=Object.create(null);N.forEach(function(se){se.error&&(G[se.id]=se)});var W=Object.keys(G).length;i.doc_write_failures+=W,i.docs_written+=T.length-W,T.forEach(function(se){var ce=G[se._id];if(ce){i.errors.push(ce);var de=(ce.name||"").toLowerCase();if(de==="unauthorized"||de==="forbidden")r.emit("denied",Ze(ce));else throw ce}else v.push(se)})},function(N){throw i.doc_write_failures+=T.length,N})}}function ee(){if(o.error)throw new Error("There was a problem getting docs.");i.last_seq=y=o.seq;var T=Ze(i);return v.length&&(T.docs=v,typeof o.pending=="number"&&(T.pending=o.pending,delete o.pending),r.emit("change",T)),g=!0,t.info().then(function(L){var N=t.activeTasks.get(I);if(!(!o||!N)){var G=N.completed_items||0,W=parseInt(L.update_seq,10)-parseInt(h,10);t.activeTasks.update(I,{completed_items:G+o.changes.length,total_items:W})}}),d.writeCheckpoint(o.seq,D).then(function(){if(r.emit("checkpoint",{checkpoint:o.seq}),g=!1,r.cancelled)throw $(),new Error("cancelled");o=void 0,j()}).catch(function(L){throw F(L),L})}function X(){var T={};return o.changes.forEach(function(L){r.emit("checkpoint",{revs_diff:L}),L.id!=="_user/"&&(T[L.id]=L.changes.map(function(N){return N.rev}))}),e.revsDiff(T).then(function(L){if(r.cancelled)throw $(),new Error("cancelled");o.diffs=L})}function H(){return bw(t,e,o.diffs,r).then(function(T){o.error=!T.ok,T.docs.forEach(function(L){delete o.diffs[L._id],i.docs_read++,o.docs.push(L)})})}function Z(){if(!(r.cancelled||o)){if(s.length===0){Q(!0);return}o=s.shift(),r.emit("checkpoint",{start_next_batch:o.seq}),X().then(H).then(U).then(ee).then(Z).catch(function(T){te("batch processing terminated with error",T)})}}function Q(T){if(f.changes.length===0){s.length===0&&!o&&((E&&k.live||w)&&(r.state="pending",r.emit("paused")),w&&$());return}(T||w||f.changes.length>=S)&&(s.push(f),f={seq:0,changes:[],docs:[]},(r.state==="pending"||r.state==="stopped")&&(r.state="active",r.emit("active")),Z())}function te(T,L){A||(L.message||(L.message=T),i.ok=!1,i.status="aborting",s=[],f={seq:0,changes:[],docs:[]},$(L))}function $(T){if(!A&&!(r.cancelled&&(i.status="cancelled",g)))if(i.status=i.status||"complete",i.end_time=new Date().toISOString(),i.last_seq=y,A=!0,t.activeTasks.remove(I,T),T){T=Ae(T),T.result=i;var L=(T.name||"").toLowerCase();L==="unauthorized"||L==="forbidden"?(r.emit("error",T),r.removeAllListeners()):Ew(n,r,T,function(){wd(t,e,n,r)})}else r.emit("complete",i),r.removeAllListeners()}function C(T,L,N){if(r.cancelled)return $();typeof L=="number"&&(f.pending=L);var G=yo(n)(T);if(!G){var W=t.activeTasks.get(I);if(W){var se=W.completed_items||0;t.activeTasks.update(I,{completed_items:++se})}return}f.seq=T.seq||N,f.changes.push(T),r.emit("checkpoint",{pending_batch:f.seq}),Wt(function(){Q(s.length===0&&k.live)})}function P(T){if(p=!1,r.cancelled)return $();if(T.results.length>0)k.since=T.results[T.results.length-1].seq,j(),Q(!0);else{var L=function(){E?(k.live=!0,j()):w=!0,Q(!0)};!o&&T.results.length===0?(g=!0,d.writeCheckpoint(T.last_seq,D).then(function(){if(g=!1,i.last_seq=y=T.last_seq,r.cancelled)throw $(),new Error("cancelled");L()}).catch(F)):L()}}function q(T){if(p=!1,r.cancelled)return $();te("changes rejected",T)}function j(){if(!(!p&&!w&&s.length<O))return;p=!0;function T(){N.cancel()}function L(){r.removeListener("cancel",T)}r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",T);var N=t.changes(k).on("change",C);N.then(L,L),N.then(P).catch(q),n.retry&&(r._changes=N,r._abortChanges=T)}function K(T){return t.info().then(function(L){var N=typeof n.since>"u"?parseInt(L.update_seq,10)-parseInt(T,10):parseInt(L.update_seq,10);return I=t.activeTasks.add({name:`${E?"continuous ":""}replication from ${L.db_name}`,total_items:N}),T})}function J(){M().then(function(){if(r.cancelled){$();return}return d.getCheckpoint().then(K).then(function(T){y=T,h=T,k={since:y,limit:S,batch_size:S,style:b,doc_ids:l,selector:u,return_docs:!0},n.filter&&(typeof n.filter!="string"?k.include_docs=!0:k.filter=n.filter),"heartbeat"in n&&(k.heartbeat=n.heartbeat),"timeout"in n&&(k.timeout=n.timeout),n.query_params&&(k.query_params=n.query_params),n.view&&(k.view=n.view),j()})}).catch(function(T){te("getCheckpoint rejected with ",T)})}function F(T){g=!1,te("writeCheckpoint completed with error",T)}if(r.cancelled){$();return}r._addedListeners||(r.once("cancel",$),typeof n.complete=="function"&&(r.once("error",n.complete),r.once("complete",function(T){n.complete(null,T)})),r._addedListeners=!0),typeof n.since>"u"?J():M().then(function(){return g=!0,d.writeCheckpoint(n.since,D)}).then(function(){if(g=!1,r.cancelled){$();return}y=n.since,J()}).catch(F)}class xw extends rn{constructor(){super(),this.cancelled=!1,this.state="pending";const e=new Promise((n,r)=>{this.once("complete",n),this.once("error",r)});this.then=function(n,r){return e.then(n,r)},this.catch=function(n){return e.catch(n)},this.catch(function(){})}cancel(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")}ready(e,n){if(this._readyCalled)return;this._readyCalled=!0;const r=()=>{this.cancel()};e.once("destroyed",r),n.once("destroyed",r);function i(){e.removeListener("destroyed",r),n.removeListener("destroyed",r)}this.once("complete",i),this.once("error",i)}}function Ri(t,e){var n=e.PouchConstructor;return typeof t=="string"?new n(t,e):t}function Na(t,e,n,r){if(typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw Ae(Gi,"`doc_ids` filter parameter is not a list.");n.complete=r,n=Ze(n),n.continuous=n.continuous||n.live,n.retry="retry"in n?n.retry:!1,n.PouchConstructor=n.PouchConstructor||this;var i=new xw(n),s=Ri(t,n),o=Ri(e,n);return wd(s,o,n,i),i}function Ow(t,e,n,r){return typeof n=="function"&&(r=n,n={}),typeof n>"u"&&(n={}),n=Ze(n),n.PouchConstructor=n.PouchConstructor||this,t=Ri(t,n),e=Ri(e,n),new Tw(t,e,n,r)}class Tw extends rn{constructor(e,n,r,i){super(),this.canceled=!1;const s=r.push?Mn({},r,r.push):r,o=r.pull?Mn({},r,r.pull):r;this.push=Na(e,n,s),this.pull=Na(n,e,o),this.pushPaused=!0,this.pullPaused=!0;const f=u=>{this.emit("change",{direction:"pull",change:u})},g=u=>{this.emit("change",{direction:"push",change:u})},w=u=>{this.emit("denied",{direction:"push",doc:u})},A=u=>{this.emit("denied",{direction:"pull",doc:u})},h=()=>{this.pushPaused=!0,this.pullPaused&&this.emit("paused")},y=()=>{this.pullPaused=!0,this.pushPaused&&this.emit("paused")},E=()=>{this.pushPaused=!1,this.pullPaused&&this.emit("active",{direction:"push"})},S=()=>{this.pullPaused=!1,this.pushPaused&&this.emit("active",{direction:"pull"})};let O={};const b=u=>(c,d)=>{(c==="change"&&(d===f||d===g)||c==="denied"&&(d===A||d===w)||c==="paused"&&(d===y||d===h)||c==="active"&&(d===S||d===E))&&(c in O||(O[c]={}),O[c][u]=!0,Object.keys(O[c]).length===2&&this.removeAllListeners(c))};r.live&&(this.push.on("complete",this.pull.cancel.bind(this.pull)),this.pull.on("complete",this.push.cancel.bind(this.push)));function p(u,c,d){u.listeners(c).indexOf(d)==-1&&u.on(c,d)}this.on("newListener",function(u){u==="change"?(p(this.pull,"change",f),p(this.push,"change",g)):u==="denied"?(p(this.pull,"denied",A),p(this.push,"denied",w)):u==="active"?(p(this.pull,"active",S),p(this.push,"active",E)):u==="paused"&&(p(this.pull,"paused",y),p(this.push,"paused",h))}),this.on("removeListener",function(u){u==="change"?(this.pull.removeListener("change",f),this.push.removeListener("change",g)):u==="denied"?(this.pull.removeListener("denied",A),this.push.removeListener("denied",w)):u==="active"?(this.pull.removeListener("active",S),this.push.removeListener("active",E)):u==="paused"&&(this.pull.removeListener("paused",y),this.push.removeListener("paused",h))}),this.pull.on("removeListener",b("pull")),this.push.on("removeListener",b("push"));const l=Promise.all([this.push,this.pull]).then(u=>{const c={push:u[0],pull:u[1]};return this.emit("complete",c),i&&i(null,c),this.removeAllListeners(),c},u=>{if(this.cancel(),i?i(u):this.emit("error",u),this.removeAllListeners(),i)throw u});this.then=function(u,c){return l.then(u,c)},this.catch=function(u){return l.catch(u)}}cancel(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())}}function kw(t){t.replicate=Na,t.sync=Ow,Object.defineProperty(t.prototype,"replicate",{get:function(){var e=this;return typeof this.replicateMethods>"u"&&(this.replicateMethods={from:function(n,r,i){return e.constructor.replicate(n,e,r,i)},to:function(n,r,i){return e.constructor.replicate(e,n,r,i)}}),this.replicateMethods}}),t.prototype.sync=function(e,n,r){return this.constructor.sync(this,e,n,r)}}Ee.plugin(G0).plugin(ew).plugin(mw).plugin(kw);const bd=we.default||we,zr=new Map;let Ad=0;function Dw(){return crypto.randomUUID()}function it(t,e="info"){const n=document.getElementById("toast-container"),r=document.createElement("div");r.className=`toast show align-items-center text-bg-${e} border-0`,r.setAttribute("role","alert"),r.innerHTML=`
    <div class="d-flex">
      <div class="toast-body">${t}</div>
      <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
    </div>
  `,n.appendChild(r),setTimeout(()=>{r.classList.remove("show"),setTimeout(()=>r.remove(),300)},3e3)}function Fa(){const t=document.getElementById("memory-table-body"),e=t.closest("table").querySelector("thead tr");if(zr.size===0){e.innerHTML='<th>ID</th><th>Rev</th><th>Data</th><th class="w-1"></th>',t.innerHTML='<tr><td colspan="4" class="text-muted">No documents yet...</td></tr>';return}const n=new Set;zr.forEach(i=>{Object.keys(i).forEach(s=>{s.startsWith("_")||n.add(s)})});const r=Array.from(n).sort();e.innerHTML=`
    <th>ID</th>
    <th>Rev</th>
    ${r.map(i=>`<th>${i}</th>`).join("")}
    <th class="w-1"></th>
  `,t.innerHTML=Array.from(zr.values()).map(i=>`
      <tr>
        <td><code>${i._id}</code></td>
        <td><code class="text-muted">${i._rev.substring(0,8)}...</code></td>
        ${r.map(s=>`<td>${i[s]!==void 0?i[s]:"-"}</td>`).join("")}
        <td>
          <a href="#" class="delete-doc-btn" data-id="${i._id}">Delete</a>
        </td>
      </tr>
    `).join(""),t.querySelectorAll(".delete-doc-btn").forEach(i=>{i.addEventListener("click",async s=>{s.preventDefault();const o=i.dataset.id;await Hn.delete("demo",o),it(`Deleted document: ${o}`,"success")})})}async function tn(t,e,n){const r=document.getElementById(e);try{const i=await t.allDocs({include_docs:!0});if(i.rows.length===0){r.innerHTML='<tr><td colspan="4" class="text-muted">No documents yet...</td></tr>';return}r.innerHTML=i.rows.filter(s=>!s.id.startsWith("_design/")).map(s=>{const o=s.doc,f=o.d?o.d.substring(0,50)+"...":"N/A";return`
          <tr>
            <td><code class="text-muted">${o._id}</code></td>
            <td><code class="text-muted">${o._rev}</code></td>
            <td><code class="text-muted">${f}</code></td>
            <td>
              <a href="#" class="delete-raw-btn" data-db="${n}" data-id="${o._id}" data-rev="${o._rev}">Delete</a>
            </td>
          </tr>
        `}).join(""),r.querySelectorAll(".delete-raw-btn").forEach(s=>{s.addEventListener("click",async o=>{o.preventDefault();const f=s.dataset.id,g=s.dataset.rev,A=s.dataset.db==="local"?_r:yr;try{await A.remove(f,g),it(`Deleted raw document: ${f}`,"success"),tn(A,e,n)}catch(h){it(`Error deleting: ${h}`,"danger")}})})}catch(i){r.innerHTML=`<tr><td colspan="4" class="text-danger">Error: ${i}</td></tr>`}}const _r=new bd("demo-encrypted-pouch"),yr=new bd("demo-encrypted-pouch-synced"),Hn=new m_(_r,"demo-password",{onChange:t=>{t.forEach(({table:e,docs:n})=>{n.forEach(r=>zr.set(r._id,r)),it(`${n.length} document(s) changed in ${e}`,"info")}),Fa(),tn(_r,"local-db-table-body","local")},onDelete:t=>{t.forEach(({table:e,docs:n})=>{n.forEach(r=>zr.delete(r._id)),it(`${n.length} document(s) deleted from ${e}`,"warning")}),Fa(),tn(_r,"local-db-table-body","local")},onConflict:t=>{it(`${t.length} conflict(s) detected!`,"warning"),console.log("Conflicts:",t)},onSync:t=>{it(`Sync ${t.direction}: ${t.change.docs_written||t.change.docs_read||0} docs`,"success"),tn(yr,"remote-db-table-body","remote")},onError:t=>{t.forEach(e=>{it(`Decryption error: ${e.docId}`,"danger"),console.error("Decryption error:",e)})}});async function qw(){try{$d(),await Hn.loadAll(),it("Local store loaded","success"),await Hn.connectRemote({url:yr,live:!0,retry:!0}),it("Sync connected","success"),Fa(),tn(_r,"local-db-table-body","local"),tn(yr,"remote-db-table-body","remote"),setInterval(()=>tn(yr,"remote-db-table-body","remote"),2e3)}catch(t){it(`Initialization error: ${t}`,"danger"),console.error("Init error:",t)}}function $d(){const t=document.getElementById("field-_id"),e=document.getElementById("field-random");t.value=Dw(),e.value=String(Math.floor(Math.random()*1e3)+1);const n=document.getElementById("dynamic-fields");n.innerHTML="",Ad=0}document.getElementById("add-field-btn").addEventListener("click",()=>{const t=document.getElementById("dynamic-fields"),e=Ad++,n=`
    <div class="row mb-3" id="dynamic-field-${e}">
      <div class="col-md-5">
        <label class="form-label">Field Name</label>
        <input type="text" class="form-control field-key" placeholder="key" />
      </div>
      <div class="col-md-5">
        <label class="form-label">Field Value</label>
        <input type="text" class="form-control field-value" placeholder="value" />
      </div>
      <div class="col-md-2">
        <label class="form-label">&nbsp;</label>
        <button type="button" class="btn btn-outline-danger w-100 remove-field-btn" data-field-id="${e}">
          Remove
        </button>
      </div>
    </div>
  `;t.insertAdjacentHTML("beforeend",n),t.querySelector(`[data-field-id="${e}"]`).addEventListener("click",()=>{var i;(i=document.getElementById(`dynamic-field-${e}`))==null||i.remove()})});document.getElementById("add-doc-form").addEventListener("submit",async t=>{t.preventDefault();const e=t.target,n=new FormData(e),r={_id:n.get("_id"),random:parseInt(n.get("random"),10)};document.getElementById("dynamic-fields").querySelectorAll(".row").forEach(s=>{const o=s.querySelector(".field-key"),f=s.querySelector(".field-value");if(o&&f&&o.value.trim()){const g=f.value;r[o.value.trim()]=isNaN(Number(g))?g:Number(g)}});try{await Hn.put("demo",r),it(`Created document: ${r._id}`,"success"),$d()}catch(s){it(`Error creating document: ${s}`,"danger")}});document.getElementById("disconnect-remote-btn").addEventListener("click",()=>{Hn.disconnectRemote(),it("Disconnected from remote sync","warning")});document.getElementById("delete-all-local-btn").addEventListener("click",async()=>{confirm("Delete all local documents? This will NOT sync deletions.")&&(await Hn.deleteAllLocal(),it("All local documents deleted","warning"),tn(_r,"local-db-table-body","local"))});document.getElementById("delete-all-remote-btn").addEventListener("click",async()=>{if(confirm("Delete all documents and sync to remote? This WILL delete from remote too!"))try{await Hn.deleteAllAndSync(),it("All documents deleted and synced","warning"),tn(yr,"remote-db-table-body","remote")}catch(t){it(`Error: ${t}`,"danger")}});async function Lw(){try{const e=await(await fetch("/main.ts")).text(),n=document.getElementById("source-code");n.textContent=e,n.className="language-typescript",tg.highlightElement(n)}catch{document.getElementById("source-code").textContent="Error loading source code"}}qw();Lw();
